function define(a,b,c){if(typeof a!="string"){console.error(this.depth+" Error: Module name is not a string."),console.trace();return}arguments.length==2&&(c=b),define.debugDependencies&&console.log("define: "+a+" -> "+c.toString().slice(0,40).replace(/\n/,"\\n").replace(/\r/,"\\r")+"..."),a in define.modules&&console.error(this.depth+" Error: Redefining module: "+a),define.modules[a]=c}define.modules={},define.debugDependencies=!1,function(){function a(){this.modules={},define.debugDependencies&&(this.depth="")}a.prototype.require=function(a,b){if(Array.isArray(a)){var c=a.map(function(a){return this.lookup(a)},this);return b&&b.apply(null,c),undefined}return this.lookup(a)},a.prototype.lookup=function(a){if(a in this.modules){var b=this.modules[a];return define.debugDependencies&&console.log(this.depth+" Using module: "+a),b}if(a in define.modules){var b=define.modules[a];define.debugDependencies&&console.log(this.depth+" Compiling module: "+a);if(typeof b=="function"){define.debugDependencies&&(this.depth+=".");var c={};try{b(this.require.bind(this),c,{id:a,uri:""})}catch(d){throw console.error("Error using module: "+a,d),d}b=c,define.debugDependencies&&(this.depth=this.depth.slice(0,-1))}return this.modules[a]=b,b}return console.error(this.depth+" Missing module: "+a),null},define.Domain=a,define.globalDomain=new a}();var require=define.globalDomain.require.bind(define.globalDomain);define("gcli/index",["require","exports","module","gcli/canon","gcli/types/basic","gcli/types/command","gcli/types/javascript","gcli/types/node","gcli/types/resource","gcli/types/selection","gcli/types/setting","gcli/settings","gcli/cli","gcli/ui/intro","gcli/ui/focus","gcli/ui/fields/basic","gcli/ui/fields/javascript","gcli/ui/fields/selection","gcli/ui/display"],function(a,b,c){b.addCommand=a("gcli/canon").addCommand,b.removeCommand=a("gcli/canon").removeCommand,a("gcli/types/basic").startup(),a("gcli/types/command").startup(),a("gcli/types/javascript").startup(),a("gcli/types/node").startup(),a("gcli/types/resource").startup(),a("gcli/types/selection").startup(),a("gcli/types/setting").startup(),a("gcli/settings").startup(),a("gcli/cli").startup(),a("gcli/ui/intro").startup(),a("gcli/ui/focus").startup(),a("gcli/ui/fields/basic").startup(),a("gcli/ui/fields/javascript").startup(),a("gcli/ui/fields/selection").startup();var d=a("gcli/ui/display");b.createDisplay=function(a){return d.createDisplay(a||{})},b.createView=b.createDisplay}),define("gcli/canon",["require","exports","module","gcli/util","gcli/l10n","gcli/types","gcli/types/basic"],function(a,b,c){function j(a,b){if(a==null)return b?f.lookup(b):a;if(typeof a=="string")return a;if(typeof a=="object"){if(a.key)return f.lookup(a.key);var c=f.getPreferredLocales(),d;return c.some(function(b){return d=a[b],d!=null}),d!=null?d:(console.error("Can't find locale in descriptions: locales="+JSON.stringify(c)+", "+"description="+JSON.stringify(a)),"(No description)")}return f.lookup(b)}function k(a){Object.keys(a).forEach(function(b){this[b]=a[b]},this);if(!this.name)throw new Error("All registered commands must have a name");this.params==null&&(this.params=[]);if(!Array.isArray(this.params))throw new Error("command.params must be an array in "+this.name);this.description="description"in this?this.description:undefined,this.description=j(this.description,"canonDescNone"),this.manual="manual"in this?this.manual:undefined,this.manual=j(this.manual);var b=this.params;this.params=[];var c=!1;this.returnType==null&&(this.returnType="string"),b.forEach(function(a){if(!a.group)if(c)console.error("Parameters can't come after param groups. Ignoring "+this.name+"/"+a.name);else{var b=new l(a,this,null);this.params.push(b)}else a.params.forEach(function(b){var c=new l(b,this,a.group);this.params.push(c)},this),c=!0},this)}function l(a,b,c){this.command=b||{name:"unnamed"},this.paramSpec=a,this.name=this.paramSpec.name,this.type=this.paramSpec.type,this.groupName=c,this.defaultValue=this.paramSpec.defaultValue;if(!this.name)throw new Error("In "+this.command.name+": all params must have a name");var d=this.type;this.type=g.getType(d);if(this.type==null)throw console.error("Known types: "+g.getTypeNames().join(", ")),new Error("In "+this.command.name+"/"+this.name+": can't find type for: "+JSON.stringify(d));this.type instanceof i&&(this.defaultValue!==undefined&&console.error("In "+this.command.name+"/"+this.name+": boolean parameters can not have a defaultValue."+" Ignoring"),this.defaultValue=!1);if(this.defaultValue!=null)try{var e=this.type.stringify(this.defaultValue),f=this.type.parseString(e);f.getStatus()!==h.VALID&&console.error("In "+this.command.name+"/"+this.name+": Error round tripping defaultValue. status = "+f.getStatus())}catch(j){console.error("In "+this.command.name+"/"+this.name+": "+j)}this.defaultValue===undefined&&(this.defaultValue=this.type.getBlank().value)}function p(){this.onOutput=e.createEvent("CommandOutputManager.onOutput")}var d=b,e=a("gcli/util"),f=a("gcli/l10n"),g=a("gcli/types"),h=a("gcli/types").Status,i=a("gcli/types/basic").BooleanType;d.Command=k,l.prototype.isKnownAs=function(a){return a==="--"+this.name?!0:!1},l.prototype.getBlank=function(){var a;return this.type.getBlank?this.type.getBlank():this.type.parseString("")},Object.defineProperty(l.prototype,"manual",{get:function(){return j(this.paramSpec.manual||undefined)},enumerable:!0}),Object.defineProperty(l.prototype,"description",{get:function(){return j(this.paramSpec.description||undefined,"canonDescNone")},enumerable:!0}),Object.defineProperty(l.prototype,"isDataRequired",{get:function(){return this.defaultValue===undefined},enumerable:!0}),Object.defineProperty(l.prototype,"isPositionalAllowed",{get:function(){return this.groupName==null},enumerable:!0}),d.Parameter=l;var m={},n=[],o={};d.addCommand=function(b){m[b.name]!=null&&(delete m[b.name],n=n.filter(function(a){return a!==b.name}));var c=new k(b);return m[b.name]=c,n.push(b.name),n.sort(),o[b.name]=b,d.onCanonChange(),c},d.removeCommand=function(b){var c=typeof b=="string"?b:b.name;delete m[c],delete o[c],n=n.filter(function(a){return a!==c}),d.onCanonChange()},d.getCommand=function(b){return m[b]||undefined},d.getCommands=function(){return Object.keys(m).map(function(a){return m[a]},this)},d.getCommandNames=function(){return n.slice(0)},d.getCommandSpecs=function(){return o},d.onCanonChange=e.createEvent("canon.onCanonChange"),d.CommandOutputManager=p,d.commandOutputManager=new p}),define("gcli/util",["require","exports","module"],function(a,b,c){function e(a){var b=a.scope?a.scope.constructor.name+".":"",c=a.func.name;if(c)return b+c;for(var d in a.scope)if(a.scope[d]===a.func)return b+d;return b+a.func}function g(a){var b=0;if(a.length==0)return b;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d,b&=b}return b}function h(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return c;return-1}var d=!1;b.createEvent=function(a){var b=[],c=!1,f=[],g=undefined,h=function(g){if(c){f.push(g),d&&console.log("Held fire: "+a,g);return}d&&console.group("Fire: "+a+" to "+b.length+" listeners",g);for(var h=0;h<b.length;h++){var i=b[h];d&&console.log(e(i)),i.func.call(i.scope,g)}d&&console.groupEnd()};return h.add=function(a,c){b.push({func:a,scope:c})},h.remove=function(c,d){var e=!1;b=b.filter(function(a){var b=a.func!==c&&a.scope!==d;return b||(e=!0),b}),e||console.warn("Failed to remove handler from "+a)},h.removeAll=function(){b=[]},h.holdFire=function(){d&&console.group("Holding fire: "+a),c=!0},h.resumeFire=function(){d&&console.groupEnd("Resume fire: "+a);if(c!==!0)throw new Error("Event not held: "+a);c=!1;if(f.length===0)return;if(f.length===1)h(f[0]);else{var b=f[0],e=f[f.length-1];g?h(g(b,e,f)):h(e)}f=[]},Object.defineProperty(h,"eventCombiner",{set:function(a){if(typeof a!="function")throw new Error("eventCombiner is not a function");g=a},enumerable:!0}),h},b.NS_XHTML="http://www.w3.org/1999/xhtml",b.NS_XUL="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul",b.createElement=function(a,c){return b.isXmlDocument(a)?a.createElementNS(b.NS_XHTML,c):a.createElement(c)},b.clearElement=function(a){while(a.hasChildNodes())a.removeChild(a.firstChild)};var f=/^\s*$/;b.removeWhitespace=function(a,c){var d=0;while(d<a.childNodes.length){var e=a.childNodes.item(d);e.nodeType===3&&f.test(e.textContent)?a.removeChild(e):(c&&e.nodeType===1&&b.removeWhitespace(e,c),d++)}},b.importCss=function(a,c,d){if(!a)return undefined;c=c||document,d||(d="hash-"+g(a));var e=c.getElementById(d);if(e)return e.tagName.toLowerCase()!=="style"&&console.error("Warning: importCss passed id="+d+", but that pre-exists (and isn't a style tag)"),e;var f=b.createElement(c,"style");f.id=d,f.appendChild(c.createTextNode(a));var h=c.getElementsByTagName("head")[0]||c.documentElement;return h.appendChild(f),f},b.setContents=function(a,c){if(typeof HTMLElement!="undefined"&&c instanceof HTMLElement){b.clearElement(a),a.appendChild(c);return}if(b.isXmlDocument(a.ownerDocument))try{var d=a.ownerDocument.documentElement.namespaceURI;d||(d=b.NS_XHTML),b.clearElement(a),c='<div xmlns="'+d+'">'+c+"</div>";var e=a.ownerDocument.createRange(),f=e.createContextualFragment(c).firstChild;while(f.hasChildNodes())a.appendChild(f.firstChild)}catch(g){throw console.error("Bad XHTML",g),console.trace(),g}else a.innerHTML=c},b.toDom=function(a,c){var d=b.createElement(a,"div");return b.setContents(d,c),d.children[0]},b.isXmlDocument=function(a){return a=a||document,a.contentType&&a.contentType!="text/html"?!0:a.xmlVersion!=null?!0:!1},b.findCssSelector=function(a){var c=a.ownerDocument;if(a.id&&c.getElementById(a.id)===a)return"#"+a.id;var d=a.tagName.toLowerCase();if(d==="html")return"html";if(d==="head")return"head";if(d==="body")return"body";a.parentNode==null&&console.log("danger: "+d);var e,f,g;if(a.classList.length>0)for(var i=0;i<a.classList.length;i++){e="."+a.classList.item(i),g=c.querySelectorAll(e);if(g.length===1)return e;e=d+e,g=c.querySelectorAll(e);if(g.length===1)return e;f=h(a,a.parentNode.children)+1,e=e+":nth-child("+f+")",g=c.querySelectorAll(e);if(g.length===1)return e}return f=h(a,a.parentNode.children)+1,e=b.findCssSelector(a.parentNode)+" > "+d+":nth-child("+f+")",e},b.createUrlLookup=function(b){return function(d){try{return a("text!gcli/ui/"+d)}catch(e){if(b.filename)return b.filename+d;var f=b.id.split("/").pop()+".js";if(b.uri.substr(-f.length)!==f)return console.error("Can't work out path from module.uri/module.id"),d;if(b.uri){var g=b.uri.length-f.length-1;return b.uri.substr(0,g)+"/"+d}return f+"/"+d}}},b.KeyEvent={DOM_VK_CANCEL:3,DOM_VK_HELP:6,DOM_VK_BACK_SPACE:8,DOM_VK_TAB:9,DOM_VK_CLEAR:12,DOM_VK_RETURN:13,DOM_VK_ENTER:14,DOM_VK_SHIFT:16,DOM_VK_CONTROL:17,DOM_VK_ALT:18,DOM_VK_PAUSE:19,DOM_VK_CAPS_LOCK:20,DOM_VK_ESCAPE:27,DOM_VK_SPACE:32,DOM_VK_PAGE_UP:33,DOM_VK_PAGE_DOWN:34,DOM_VK_END:35,DOM_VK_HOME:36,DOM_VK_LEFT:37,DOM_VK_UP:38,DOM_VK_RIGHT:39,DOM_VK_DOWN:40,DOM_VK_PRINTSCREEN:44,DOM_VK_INSERT:45,DOM_VK_DELETE:46,DOM_VK_0:48,DOM_VK_1:49,DOM_VK_2:50,DOM_VK_3:51,DOM_VK_4:52,DOM_VK_5:53,DOM_VK_6:54,DOM_VK_7:55,DOM_VK_8:56,DOM_VK_9:57,DOM_VK_SEMICOLON:59,DOM_VK_EQUALS:61,DOM_VK_A:65,DOM_VK_B:66,DOM_VK_C:67,DOM_VK_D:68,DOM_VK_E:69,DOM_VK_F:70,DOM_VK_G:71,DOM_VK_H:72,DOM_VK_I:73,DOM_VK_J:74,DOM_VK_K:75,DOM_VK_L:76,DOM_VK_M:77,DOM_VK_N:78,DOM_VK_O:79,DOM_VK_P:80,DOM_VK_Q:81,DOM_VK_R:82,DOM_VK_S:83,DOM_VK_T:84,DOM_VK_U:85,DOM_VK_V:86,DOM_VK_W:87,DOM_VK_X:88,DOM_VK_Y:89,DOM_VK_Z:90,DOM_VK_CONTEXT_MENU:93,DOM_VK_NUMPAD0:96,DOM_VK_NUMPAD1:97,DOM_VK_NUMPAD2:98,DOM_VK_NUMPAD3:99,DOM_VK_NUMPAD4:100,DOM_VK_NUMPAD5:101,DOM_VK_NUMPAD6:102,DOM_VK_NUMPAD7:103,DOM_VK_NUMPAD8:104,DOM_VK_NUMPAD9:105,DOM_VK_MULTIPLY:106,DOM_VK_ADD:107,DOM_VK_SEPARATOR:108,DOM_VK_SUBTRACT:109,DOM_VK_DECIMAL:110,DOM_VK_DIVIDE:111,DOM_VK_F1:112,DOM_VK_F2:113,DOM_VK_F3:114,DOM_VK_F4:115,DOM_VK_F5:116,DOM_VK_F6:117,DOM_VK_F7:118,DOM_VK_F8:119,DOM_VK_F9:120,DOM_VK_F10:121,DOM_VK_F11:122,DOM_VK_F12:123,DOM_VK_F13:124,DOM_VK_F14:125,DOM_VK_F15:126,DOM_VK_F16:127,DOM_VK_F17:128,DOM_VK_F18:129,DOM_VK_F19:130,DOM_VK_F20:131,DOM_VK_F21:132,DOM_VK_F22:133,DOM_VK_F23:134,DOM_VK_F24:135,DOM_VK_NUM_LOCK:144,DOM_VK_SCROLL_LOCK:145,DOM_VK_COMMA:188,DOM_VK_PERIOD:190,DOM_VK_SLASH:191,DOM_VK_BACK_QUOTE:192,DOM_VK_OPEN_BRACKET:219,DOM_VK_BACK_SLASH:220,DOM_VK_CLOSE_BRACKET:221,DOM_VK_QUOTE:222,DOM_VK_META:224}}),define("gcli/l10n",["require","exports","module","gcli/nls/strings"],function(a,b,c){function e(a,b){return a.replace(/\{[^}]*\}/g,function(a){a=a.slice(1,-1);if(b==null)return console.log("Missing swaps while looking up '"+a+"'"),"";var c=b[a];return c==null&&(console.log("Can't find '"+a+"' in "+JSON.stringify(b)),c=""),c})}function f(a,b){var c=0;return a=a.replace(/%S/g,function(){return b[c++]}),a=a.replace(/%([0-9])\$S/g,function(a,c){return b[c-1]}),a}function g(){if(!i){var a=navigator.language||navigator.userLanguage;h.some(function(b){return b.locales.indexOf(a)!==-1?(i=b,!0):!1}),i||(console.error("Failed to find plural rule for "+a),i=h[0])}return i}var d={};b.registerStringsSource=function(b){var c=a(b).root;Object.keys(c).forEach(function(a){if(d[a]){console.error("Key '"+a+"' (loaded from "+b+") "+"already exists. Ignoring.");return}d[a]=c[a]},this)},a("gcli/nls/strings"),b.registerStringsSource("gcli/nls/strings"),b.unregisterStringsSource=function(b){var c=a(b).root;Object.keys(c).forEach(function(a){delete d[a]},this)},b.getPreferredLocales=function(){var a=typeof navigator!="undefined"?(navigator.language||navigator.userLanguage).toLowerCase():"en-us",b=a.split("-"),c=b.map(function(a,c){return b.slice(0,b.length-c).join("-")});return c.push("root"),c},b.lookup=function(a){var b=d[a];if(b==null)throw new Error("No i18n key: "+a);return b},typeof Proxy!="undefined"?b.propertyLookup=Proxy.create({get:function(a,c){return b.lookup(c)}}):b.propertyLookup=d,b.lookupSwap=function(a,c){var d=b.lookup(a);return e(d,c)},b.lookupFormat=function(a,c){var d=b.lookup(a);return f(d,c)},b.lookupPlural=function(a,c,d){var f=g().get(c),h=b.lookup(a),i=h[f];return d=d||{},d.ord=c,e(i,d)};var h=[{locales:["fa","fa-ir","id","ja","ja-jp-mac","ka","ko","ko-kr","th","th-th","tr","tr-tr","zh","zh-tw","zh-cn"],numForms:1,get:function(a){return 0}},{locales:["af","af-za","as","ast","bg","br","bs","bs-ba","ca","cy","cy-gb","da","de","de-de","de-ch","en","en-gb","en-us","en-za","el","el-gr","eo","es","es-es","es-ar","es-cl","es-mx","et","et-ee","eu","fi","fi-fi","fy","fy-nl","gl","gl-gl","he","hu","hu-hu","hy","hy-am","it","it-it","kk","ku","lg","mai","ml","ml-in","mn","nb","nb-no","no","no-no","nl","nn","nn-no","no","no-no","nb","nb-no","nso","nso-za","pa","pa-in","pt","pt-pt","rm","rm-ch","si","si-lk","son","son-ml","sq","sq-al","sv","sv-se","vi","vi-vn","zu","zu-za"],numForms:2,get:function(a){return a!=1?1:0}},{locales:["ak","ak-gh","bn","bn-in","bn-bd","fr","fr-fr","gu","gu-in","kn","kn-in","mr","mr-in","oc","oc-oc","or","or-in","pt-br","ta","ta-in","ta-lk","te","te-in"],numForms:2,get:function(a){return a>1?1:0}},{locales:["lv"],numForms:3,get:function(a){return a%10==1&&a%100!=11?1:a!=0?2:0}},{locales:["gd","gd-gb"],numForms:4,get:function(a){return a==1||a==11?0:a==2||a==12?1:a>0&&a<20?2:3}},{locales:["ro","ro-ro"],numForms:3,get:function(a){return a==1?0:a==0||a%100>0&&a%100<20?1:2}},{locales:["lt"],numForms:3,get:function(a){return a%10==1&&a%100!=11?0:a%10>=2&&(a%100<10||a%100>=20)?2:1}},{locales:["be","be-by","hr","hr-hr","ru","ru-ru","sr","sr-rs","sr-cs","uk"],numForms:3,get:function(a){return a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2}},{locales:["cs","sk"],numForms:3,get:function(a){return a==1?0:a>=2&&a<=4?1:2}},{locales:["pl"],numForms:3,get:function(a){return a==1?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2}},{locales:["sl"],numForms:4,get:function(a){return a%100==1?0:a%100==2?1:a%100==3||a%100==4?2:3}},{locales:["ga-ie","ga-ie","ga","en-ie"],numForms:5,get:function(a){return a==1?0:a==2?1:a>=3&&a<=6?2:a>=7&&a<=10?3:4}},{locales:["ar"],numForms:6,get:function(a){return a==0?5:a==1?0:a==2?1:a%100>=3&&a%100<=10?2:a%100>=11&&a%100<=99?3:4}},{locales:["mt"],numForms:4,get:function(a){return a==1?0:a==0||a%100>0&&a%100<=10?1:a%100>10&&a%100<20?2:3}},{locales:["mk","mk-mk"],numForms:3,get:function(a){return a%10==1?0:a%10==2?1:2}},{locales:["is"],numForms:2,get:function(a){return a%10==1&&a%100!=11?0:1}}],i}),define("gcli/nls/strings",["require","exports","module"],function(a,b,c){var d={root:{canonDescNone:"(No description)",cliEvalJavascript:"Enter JavaScript directly",fieldSelectionSelect:"Select a %S…",fieldArrayAdd:"Add",fieldArrayDel:"Delete",jstypeParseScope:"Scope lost",jstypeParseMissing:"Can't find property '%S'",jstypeBeginSyntax:"Syntax error",jstypeBeginUnterm:"Unterminated string literal",jstypeParseError:"Error",typesNumberNan:'Can\'t convert "%S" to a number.',typesNumberMax:"%1$S is greater than maximum allowed: %2$S.",typesNumberMin:"%1$S is smaller than minimum allowed: %2$S.",typesSelectionNomatch:"Can't use '%S'.",nodeParseSyntax:"Syntax error in CSS query",nodeParseMultiple:"Too many matches (%S)",nodeParseNone:"No matches",helpDesc:"Get help on the available commands",helpManual:"Provide help either on a specific command (if a search string is provided and an exact match is found) or on the available commands (if a search string is not provided, or if no exact match is found).",helpSearchDesc:"Search string",helpSearchManual2:"<strong>search string</strong> to use in narrowing down the displayed commands. Regular expressions not supported.",helpManSynopsis:"Synopsis",helpManDescription:"Description",helpManParameters:"Parameters",helpManNone:"None",subCommands:"Sub-Commands",subCommandsNone:"None",prefDesc:"Commands to control settings",prefManual:"Commands to display and alter preferences both for GCLI and the surrounding environment",prefListDesc:"Display available settings",prefListManual:"Display a list of preferences, optionally filtered when using the 'search' parameter",prefListSearchDesc:"Filter the list of settings displayed",prefListSearchManual:"Search for the given string in the list of available preferences",prefSetDesc:"Alter a setting",prefSetManual:"Alter preferences defined by the environment",prefSetSettingDesc:"Setting to alter",prefSetSettingManual:"The name of the setting to alter.",prefSetValueDesc:"New value for setting",prefSetValueManual:"The new value for the specified setting",prefSetCheckHeading:"This might void your warranty!",prefSetCheckBody:"Changing these advanced settings can be harmful to the stability, security, and performance of this application. You should only continue if you are sure of what you are doing.",prefSetCheckGo:"I'll be careful, I promise!",prefResetDesc:"Reset a setting",prefResetManual:"Reset the value of a setting to the system defaults",prefResetSettingDesc:"Setting to reset",prefResetSettingManual:"The name of the setting to reset to the system default value",prefOutputFilter:"Filter",prefOutputName:"Name",prefOutputValue:"Value",introDesc:"Show the opening message",introManual:"Redisplay the message that is shown to new users until they click the 'Got it!' button",hideIntroDesc:"Show the initial welcome message",eagerHelperDesc:"How eager are the tooltips",allowSetDesc:"Has the user enabled the 'pref set' command?"}};b.root=d.root}),define("gcli/types",["require","exports","module","gcli/argument"],function(a,b,c){function g(a,b,c,d,e){this.value=a,this.arg=b;if(b==null)throw new Error("Missing arg");this._status=c||f.VALID,this.message=d,this.predictions=e}function h(a,b){this.arg=b,this.conversions=a,this.value=a.map(function(a){return a.value},this),this._status=f.combine(a.map(function(a){return a.getStatus()})),this.message="",this.predictions=[]}function i(){}var d=b,e=a("gcli/argument").Argument,f={VALID:{toString:function(){return"VALID"},valueOf:function(){return 0}},INCOMPLETE:{toString:function(){return"INCOMPLETE"},valueOf:function(){return 1}},ERROR:{toString:function(){return"ERROR"},valueOf:function(){return 2}},combine:function(){var a=f.VALID;for(var b=0;b<arguments.length;b++){var c=arguments[b];Array.isArray(c)&&(c=f.combine.apply(null,c)),c>a&&(a=c)}return a}};d.Status=f,d.Conversion=g,g.prototype.assign=function(a){this.arg.assign(a)},g.prototype.isDataProvided=function(){return!this.arg.isBlank()},g.prototype.equals=function(a){return this===a?!0:a==null?!1:this.valueEquals(a)&&this.argEquals(a)},g.prototype.valueEquals=function(a){return this.value===a.value},g.prototype.argEquals=function(a){return a==null?!1:this.arg.equals(a.arg)},g.prototype.getStatus=function(a){return this._status},g.prototype.toString=function(){return this.arg.toString()},g.prototype.getPredictions=function(){return typeof this.predictions=="function"?this.predictions():this.predictions||[]},g.prototype.getPredictionAt=function(a){if(a==null)return undefined;var b=this.getPredictions();return b.length===0?undefined:(a%=b.length,a<0&&(a=b.length+a),b[a])},g.prototype.constrainPredictionIndex=function(a){if(a==null)return undefined;var b=this.getPredictions();return b.length===0?undefined:(a%=b.length,a<0&&(a=b.length+a),a)},h.prototype=Object.create(g.prototype),h.prototype.assign=function(a){this.conversions.forEach(function(b){b.assign(a)},this),this.assignment=a},h.prototype.getStatus=function(a){return a&&a.conversion?a.conversion.getStatus():this._status},h.prototype.isDataProvided=function(){return this.conversions.length>0},h.prototype.valueEquals=function(a){if(a instanceof h){if(this.value===a.value)return!0;if(this.value.length!==a.value.length)return!1;for(var b=0;b<this.conversions.length;b++)if(!this.conversions[b].valueEquals(a.conversions[b]))return!1;return!0}throw new Error("Can't compare values with non ArrayConversion")},h.prototype.toString=function(){return"[ "+this.conversions.map(function(a){return a.toString()},this).join(", ")+" ]"},d.ArrayConversion=h,i.prototype.stringify=function(a){throw new Error("Not implemented")},i.prototype.parse=function(a){throw new Error("Not implemented")},i.prototype.parseString=function(a){return this.parse(new e(a))},i.prototype.name=undefined,i.prototype.increment=function(a){return undefined},i.prototype.decrement=function(a){return undefined},i.prototype.getBlank=function(){return this.parse(new e)},i.prototype.getType=function(){return this},d.Type=i;var j={};d.getTypeNames=function(){return Object.keys(j)},d.registerType=function(a){if(typeof a=="object"){if(!(a instanceof i))throw new Error("Can't registerType using: "+a);if(!a.name)throw new Error("All registered types must have a name");j[a.name]=a}else{if(typeof a!="function")throw new Error("Unknown type: "+a);if(!a.prototype.name)throw new Error("All registered types must have a name");j[a.prototype.name]=a}},d.registerTypes=function(b){Object.keys(b).forEach(function(a){var c=b[a];c.name=a,b.registerType(c)})},d.deregisterType=function(a){delete j[a.name]},d.getType=function(a){var b;if(typeof a=="string")return b=j[a],typeof b=="function"&&(b=new b({})),b;if(typeof a=="object"){if(!a.name)throw new Error("Missing 'name' member to typeSpec");return b=j[a.name],typeof b=="function"&&(b=new b(a)),b}throw new Error("Can't extract type from "+a)}}),define("gcli/argument",["require","exports","module"],function(a,b,c){function e(a,b,c){a===undefined?(this.text="",this.prefix="",this.suffix=""):(this.text=a,this.prefix=b!==undefined?b:"",this.suffix=c!==undefined?c:"")}function f(a,b,c){this.text=a!==undefined?a:"",this.prefix=b!==undefined?b:"",this.suffix=c!==undefined?c:"";while(this.text.charAt(0)===" ")this.prefix=this.prefix+" ",this.text=this.text.substring(1);while(this.text.charAt(this.text.length-1)===" ")this.suffix=" "+this.suffix,this.text=this.text.slice(0,-1)}function g(a,b,c){if(!Array.isArray(a))throw new Error("args is not an array of Arguments");b===undefined?this.args=a:this.args=a.slice(b,c);var d=e.merge(this.args);this.text=d.text,this.prefix=d.prefix,this.suffix=d.suffix}function h(a,b){this.arg=b,this.text=b?b.text:"--"+a,this.prefix=b?b.prefix:" ",this.suffix=b?b.suffix:""}function i(){this.text="",this.prefix="",this.suffix=""}function j(a,b){this.nameArg=a,this.valueArg=b,this.text=b.text,this.prefix=a.toString()+b.prefix,this.suffix=b.suffix}function k(){this.args=[]}var d=b;e.prototype.merge=function(a){return new e(this.text+this.suffix+a.prefix+a.text,this.prefix,a.suffix)},e.prototype.beget=function(a,b){var c=this.prefix,d=this.suffix,f=a.indexOf(" ")>=0||a.length==0?"'":"";return b&&(c=(b.prefixSpace?" ":"")+f,d=f),new e(a,c,d)},e.prototype.isBlank=function(){return this.text===""&&this.prefix.trim()===""&&this.suffix.trim()===""},e.prototype.assign=function(a){this.assignment=a},e.prototype.getArgs=function(){return[this]},e.prototype.equals=function(a){return this===a?!0:a!=null&&a instanceof e?this.text===a.text&&this.prefix===a.prefix&&this.suffix===a.suffix:!1},e.prototype.toString=function(){return this.prefix+this.text+this.suffix},e.merge=function(a,b,c){b=b===undefined?0:b,c=c===undefined?a.length:c;var d;for(var e=b;e<c;e++){var f=a[e];d?d=d.merge(f):d=f}return d},d.Argument=e,f.prototype=Object.create(e.prototype),f.prototype.beget=function(a,b){var c=this.prefix,d=this.suffix;return b&&b.normalize&&(c="{ ",d=" }"),new f(a,c,d)},f.prototype.isBlank=function(){return!1},d.ScriptArgument=f,g.prototype=Object.create(e.prototype),g.prototype.assign=function(a){this.args.forEach(function(b){b.assign(a)},this),this.assignment=a},g.prototype.getArgs=function(){return this.args},g.prototype.equals=function(a){return this===a?!0:a!=null&&a instanceof g?this.text===a.text&&this.prefix===a.prefix&&this.suffix===a.suffix:!1},d.MergedArgument=g,h.prototype=Object.create(e.prototype),h.prototype.assign=function(a){this.arg&&this.arg.assign(a),this.assignment=a},h.prototype.getArgs=function(){return this.arg?[this,this.arg]:[this]},h.prototype.equals=function(a){return this===a?!0:a!=null&&a instanceof h?this.text===a.text&&this.prefix===a.prefix&&this.suffix===a.suffix:!1},d.TrueNamedArgument=h,i.prototype=Object.create(e.prototype),i.prototype.getArgs=function(){return[]},i.prototype.equals=function(a){return this===a?!0:a!=null&&a instanceof i?this.text===a.text&&this.prefix===a.prefix&&this.suffix===a.suffix:!1},d.FalseNamedArgument=i,j.prototype=Object.create(e.prototype),j.prototype.assign=function(a){this.nameArg.assign(a),this.valueArg.assign(a),this.assignment=a},j.prototype.getArgs=function(){return[this.nameArg,this.valueArg]},j.prototype.equals=function(a){return this===a?!0:a==null?!1:a instanceof j?this.text===a.text&&this.prefix===a.prefix&&this.suffix===a.suffix:!1},d.NamedArgument=j,k.prototype=Object.create(e.prototype),k.prototype.addArgument=function(a){this.args.push(a)},k.prototype.addArguments=function(a){Array.prototype.push.apply(this.args,a)},k.prototype.getArguments=function(){return this.args},k.prototype.assign=function(a){this.args.forEach(function(b){b.assign(a)},this),this.assignment=a},k.prototype.getArgs=function(){return this.args},k.prototype.equals=function(a){if(this===a)return!0;if(a==null)return!1;if(a instanceof k){if(this.args.length!==a.args.length)return!1;for(var b=0;b<this.args.length;b++)if(!this.args[b].equals(a.args[b]))return!1;return!0}return!1},k.prototype.toString=function(){return"{"+this.args.map(function(a){return a.toString()},this).join(",")+"}"},d.ArrayArgument=k}),define("gcli/types/basic",["require","exports","module","gcli/l10n","gcli/types","gcli/types/spell","gcli/types/selection","gcli/argument"],function(a,b,c){function p(a){if(Object.keys(a).length>0)throw new Error("StringType can not be customized")}function q(a){a?(this._min=a.min,this._max=a.max,this._step=a.step||1):this._step=1}function r(a){if(Object.keys(a).length>0)throw new Error("BooleanType can not be customized")}function s(a){if(typeof a.defer!="function")throw new Error("Instances of DeferredType need typeSpec.defer to be a function that returns a type");Object.keys(a).forEach(function(b){this[b]=a[b]},this)}function t(a){if(Object.keys(a).length>0)throw new Error("BlankType can not be customized")}function u(a){a.subtype||(console.error("Array.typeSpec is missing subtype. Assuming string."+JSON.stringify(a)),a.subtype="string"),Object.keys(a).forEach(function(b){this[b]=a[b]},this),this.subtype=e.getType(this.subtype)}var d=a("gcli/l10n"),e=a("gcli/types"),f=a("gcli/types").Type,g=a("gcli/types").Status,h=a("gcli/types").Conversion,i=a("gcli/types").ArrayConversion,j=a("gcli/types/spell").Speller,k=a("gcli/types/selection").SelectionType,l=a("gcli/argument").Argument,m=a("gcli/argument").TrueNamedArgument,n=a("gcli/argument").FalseNamedArgument,o=a("gcli/argument").ArrayArgument;b.startup=function(){e.registerType(p),e.registerType(q),e.registerType(r),e.registerType(t),e.registerType(s),e.registerType(u)},b.shutdown=function(){e.unregisterType(p),e.unregisterType(q),e.unregisterType(r),e.unregisterType(t),e.unregisterType(s),e.unregisterType(u)},p.prototype=Object.create(f.prototype),p.prototype.stringify=function(a){return a==null?"":a.toString()},p.prototype.parse=function(a){return a.text==null||a.text===""?new h(undefined,a,g.INCOMPLETE,""):new h(a.text,a)},p.prototype.name="string",b.StringType=p,q.prototype=Object.create(f.prototype),q.prototype.stringify=function(a){return a==null?"":""+a},q.prototype.getMin=function(){if(this._min){if(typeof this._min=="function")return this._min();if(typeof this._min=="number")return this._min}return undefined},q.prototype.getMax=function(){if(this._max){if(typeof this._max=="function")return this._max();if(typeof this._max=="number")return this._max}return undefined},q.prototype.parse=function(a){if(a.text.replace(/\s/g,"").length===0)return new h(undefined,a,g.INCOMPLETE,"");var b=parseInt(a.text,10);if(isNaN(b))return new h(undefined,a,g.ERROR,d.lookupFormat("typesNumberNan",[a.text]));var c=this.getMax();if(c!=null&&b>c)return new h(undefined,a,g.ERROR,d.lookupFormat("typesNumberMax",[b,c]));var e=this.getMin();return e!=null&&b<e?new h(undefined,a,g.ERROR,d.lookupFormat("typesNumberMin",[b,e])):new h(b,a)},q.prototype.decrement=function(a){if(typeof a!="number"||isNaN(a))return this.getMax()||1;var b=a-this._step;return b=Math.ceil(b/this._step)*this._step,this._boundsCheck(b)},q.prototype.increment=function(a){if(typeof a!="number"||isNaN(a)){var b=this.getMin();return b!=null?b:0}var c=a+this._step;return c=Math.floor(c/this._step)*this._step,this.getMax()==null?c:this._boundsCheck(c)},q.prototype._boundsCheck=function(a){var b=this.getMin();if(b!=null&&a<b)return b;var c=this.getMax();return c!=null&&a>c?c:a},q.prototype.name="number",b.NumberType=q,r.prototype=Object.create(k.prototype),r.prototype.lookup=[{name:"false",value:!1},{name:"true",value:!0}],r.prototype.parse=function(a){return a instanceof m?new h(!0,a):a instanceof n?new h(!1,a):k.prototype.parse.call(this,a)},r.prototype.stringify=function(a){return""+a},r.prototype.getBlank=function(){return new h(!1,new l,g.VALID,"",this.lookup)},r.prototype.name="boolean",b.BooleanType=r,s.prototype=Object.create(f.prototype),s.prototype.stringify=function(a){return this.defer().stringify(a)},s.prototype.parse=function(a){return this.defer().parse(a)},s.prototype.decrement=function(a){var b=this.defer();return b.decrement?b.decrement(a):undefined},s.prototype.increment=function(a){var b=this.defer();return b.increment?b.increment(a):undefined},s.prototype.increment=function(a){var b=this.defer();return b.increment?b.increment(a):undefined},s.prototype.getType=function(){return this.defer()},Object.defineProperty(s.prototype,"isImportant",{get:function(){return this.defer().isImportant},enumerable:!0}),s.prototype.name="deferred",b.DeferredType=s,t.prototype=Object.create(f.prototype),t.prototype.stringify=function(a){return""},t.prototype.parse=function(a){return new h(undefined,a)},t.prototype.name="blank",b.BlankType=t,u.prototype=Object.create(f.prototype),u.prototype.stringify=function(a){return a.join(" ")},u.prototype.parse=function(a){if(a instanceof o){var b=a.getArguments().map(function(a){var b=this.subtype.parse(a);return a.conversion=b,b},this);return new i(b,a)}throw console.error("non ArrayArgument to ArrayType.parse",a),new Error("non ArrayArgument to ArrayType.parse")},u.prototype.getBlank=function(a){return new i([],new o)},u.prototype.name="array",b.ArrayType=u}),define("gcli/types/spell",["require","exports","module"],function(a,b,c){function d(){this._nWords={}}d.letters="abcdefghijklmnopqrstuvwxyz".split(""),d.prototype.train=function(a){a.forEach(function(a){a=a.toLowerCase(),this._nWords[a]=this._nWords.hasOwnProperty(a)?this._nWords[a]+1:1},this)},d.prototype.correct=function(a){if(this._nWords.hasOwnProperty(a))return a;var b={},c=this._edits(a);return c.forEach(function(a){this._nWords.hasOwnProperty(a)&&(b[this._nWords[a]]=a)},this),this._countKeys(b)>0?b[this._max(b)]:(c.forEach(function(a){this._edits(a).forEach(function(a){this._nWords.hasOwnProperty(a)&&(b[this._nWords[a]]=a)},this)},this),this._countKeys(b)>0?b[this._max(b)]:null)},d.prototype._countKeys=function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},d.prototype._max=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return Math.max.apply(null,b)},d.prototype._edits=function(a){var b=[];for(var c=0;c<a.length;c++)b.push(a.slice(0,c)+a.slice(c+1));for(c=0;c<a.length-1;c++)b.push(a.slice(0,c)+a.slice(c+1,c+2)+a.slice(c,c+1)+a.slice(c+2));for(c=0;c<a.length;c++)d.letters.forEach(function(d){b.push(a.slice(0,c)+d+a.slice(c+1))},this);for(c=0;c<=a.length;c++)d.letters.forEach(function(d){b.push(a.slice(0,c)+d+a.slice(c))},this);return b},b.Speller=d}),define("gcli/types/selection",["require","exports","module","gcli/l10n","gcli/types","gcli/types/spell","gcli/argument"],function(a,b,c){function k(a){a&&Object.keys(a).forEach(function(b){this[b]=a[b]},this)}var d=a("gcli/l10n"),e=a("gcli/types"),f=a("gcli/types").Type,g=a("gcli/types").Status,h=a("gcli/types").Conversion,i=a("gcli/types/spell").Speller,j=a("gcli/argument").Argument;b.startup=function(){e.registerType(k)},b.shutdown=function(){e.unregisterType(k)},k.prototype=Object.create(f.prototype),k.prototype.maxPredictions=10,k.prototype.stringify=function(a){if(this.stringifyProperty!=null)return a[this.stringifyProperty];var b=null,c=this.getLookup();return c.some(function(c){return c.value===a?(b=c.name,!0):!1},this),b},k.prototype.getLookup=function(){if(this.lookup)return typeof this.lookup=="function"?this.lookup():this.lookup;if(Array.isArray(this.data))return this.lookup=this._dataToLookup(this.data),this.lookup;if(typeof this.data=="function")return this._dataToLookup(this.data());throw new Error("SelectionType has no data")},k.prototype._dataToLookup=function(a){return a.map(function(a){return{name:a,value:a}},this)},k.prototype._findPredictions=function(a){var b=[],c=this.getLookup(),d,e;if(a.suffix.length>0){for(d=0;d<c.length&&b.length<this.maxPredictions;d++)e=c[d],e.name===a.text&&this._addToPredictions(b,e,a);return b}for(d=0;d<c.length&&b.length<this.maxPredictions;d++)e=c[d],e.name.indexOf(a.text)===0&&this._addToPredictions(b,e,a);if(b.length<this.maxPredictions/2)for(d=0;d<c.length&&b.length<this.maxPredictions;d++)e=c[d],e.name.indexOf(a.text)!==-1&&b.indexOf(e)===-1&&this._addToPredictions(b,e,a);return b},k.prototype._addToPredictions=function(a,b,c){a.push(b)},k.prototype.parse=function(a){var b=this._findPredictions(a);if(b.length===0){var c=d.lookupFormat("typesSelectionNomatch",[a.text]);return new h(undefined,a,g.ERROR,c,b)}this.noMatch&&this.noMatch();var e=b[0].value;return b[0].name===a.text?new h(e,a,g.VALID,"",b):new h(undefined,a,g.INCOMPLETE,"",b)},k.prototype.decrement=function(a){var b=this.getLookup(),c=this._findValue(b,a);return c===-1&&(c=0),c++,c>=b.length&&(c=0),b[c].value},k.prototype.increment=function(a){var b=this.getLookup(),c=this._findValue(b,a);return c===-1&&(c=1),c--,c<0&&(c=b.length-1),b[c].value},k.prototype._findValue=function(a,b){var c=-1;for(var d=0;d<a.length;d++){var e=a[d];if(e.value===b){c=d;break}}return c},k.prototype.name="selection",b.SelectionType=k}),define("gcli/types/command",["require","exports","module","gcli/canon","gcli/l10n","gcli/types","gcli/types/selection"],function(a,b,c){function j(){this.stringifyProperty="name"}var d=a("gcli/canon"),e=a("gcli/l10n"),f=a("gcli/types"),g=a("gcli/types/selection").SelectionType,h=a("gcli/types").Status,i=a("gcli/types").Conversion;b.startup=function(){f.registerType(j)},b.shutdown=function(){f.unregisterType(j)},j.prototype=Object.create(g.prototype),j.prototype.name="command",j.prototype.lookup=function(){var a=d.getCommands();return a.sort(function(a,b){return a.name.localeCompare(b.name)}),a.map(function(a){return{name:a.name,value:a}},this)},j.prototype._addToPredictions=function(a,b,c){if(b.value.hidden)return;(c.text.length!==0||b.name.indexOf(" ")===-1)&&a.push(b)},j.prototype.parse=function(a){var b=function(){return this._findPredictions(a)}.bind(this),c=this._findPredictions(a);if(c.length===0){var d=e.lookupFormat("typesSelectionNomatch",[a.text]);return new i(undefined,a,h.ERROR,d,b)}var f=c[0].value;return c.length===1?f.name===a.text&&typeof f.exec=="function"?new i(f,a,h.VALID,""):new i(undefined,a,h.INCOMPLETE,"",b):c[0].name===a.text?new i(f,a,h.VALID,"",b):new i(undefined,a,h.INCOMPLETE,"",b)}}),define("gcli/types/javascript",["require","exports","module","gcli/l10n","gcli/types"],function(a,b,c){function j(a){if(Object.keys(a).length>0)throw new Error("JavascriptType can not be customized")}function k(a){return a.indexOf("moz")===0||a.indexOf("webkit")===0||a.indexOf("ms")===0}var d=a("gcli/l10n"),e=a("gcli/types"),f=e.Conversion,g=e.Type,h=e.Status;b.startup=function(){e.registerType(j)},b.shutdown=function(){e.unregisterType(j)};var i;typeof window!="undefined"&&(i=window),b.setGlobalObject=function(a){i=a},b.getGlobalObject=function(){return i},b.unsetGlobalObject=function(){i=undefined},j.prototype=Object.create(g.prototype),j.prototype.stringify=function(a){return a==null?"":a},j.MAX_COMPLETION_MATCHES=10,j.prototype.parse=function(a){var b=a.text,c=i;if(b==="")return new f(undefined,a,h.INCOMPLETE);if(!isNaN(parseFloat(b))&&isFinite(b))return new f(b,a);if(b.trim().match(/(null|undefined|NaN|Infinity|true|false)/))return new f(b,a);var e=this._findCompletionBeginning(b);if(e.err)return new f(b,a,h.ERROR,e.err);if(e.state===l.COMPLEX)return new f(b,a);if(e.state!==l.NORMAL)return new f(b,a,h.INCOMPLETE,"");var g=b.substring(e.startPos),m=g.split("."),n,o;if(m.length>1){n=m.pop().trimLeft();for(var p=0;p<m.length;p++){o=m[p].trim();if(c==null)return new f(b,a,h.ERROR,d.lookup("jstypeParseScope"));if(o==="")return new f(b,a,h.INCOMPLETE,"");if(this._isSafeProperty(c,o))return new f(b,a);try{c=c[o]}catch(q){return new f(b,a,h.VALID,"")}}}else n=m[0].trimLeft();if(o&&!o.match(/^[0-9A-Za-z]*$/))return new f(b,a);if(c==null)return new f(b,a,h.ERROR,d.lookupFormat("jstypeParseMissing",[o]));if(!n.match(/^[0-9A-Za-z]*$/))return new f(b,a);if(this._isIteratorOrGenerator(c))return null;var r=n.length,s=r===0?b:b.slice(0,-r),t=h.INCOMPLETE,u="",v={},w=0,x=c;try{while(x!=null&&Object.keys(v).length<j.MAX_COMPLETION_MATCHES)Object.keys(x).forEach(function(a){a.indexOf(n)===0&&!(a in v)&&(v[a]={prop:a,distUpPrototypeChain:w})}),w++,x=Object.getPrototypeOf(x)}catch(q){return new f(b,a,h.INCOMPLETE,"")}v=Object.keys(v).map(function(a){return a===n&&(t=h.VALID),v[a]}),v.sort(function(a,b){return a.distUpPrototypeChain!==b.distUpPrototypeChain?a.distUpPrototypeChain-b.distUpPrototypeChain:k(a.prop)?k(b.prop)?a.prop.localeCompare(b.prop):1:k(b.prop)?-1:a.prop.localeCompare(b.prop)}),v.length>j.MAX_COMPLETION_MATCHES&&(v=v.slice(0,j.MAX_COMPLETION_MATCHES-1));var y=v.map(function(a){var b,e=!0;if(this._isSafeProperty(c,a.prop))b="(property getter)";else try{var f=c[a.prop];typeof f=="function"?b="(function)":typeof f=="boolean"||typeof f=="number"?(b="= "+f,e=!1):typeof f=="string"?(f.length>40&&(f=f.substring(0,37)+"…"),b="= '"+f+"'",e=!1):b="("+typeof f+")"}catch(g){b="("+d.lookup("jstypeParseError")+")"}return{name:s+a.prop,value:{name:s+a.prop,description:b},description:b,incomplete:e}},this);return y.length===0&&(t=h.ERROR,u=d.lookupFormat("jstypeParseMissing",[n])),y.length===1&&t===h.VALID&&(y=undefined),new f(b,a,t,u,y)};var l={NORMAL:0,COMPLEX:1,QUOTE:2,DQUOTE:3},m="{[(".split(""),n="}])".split(""),o={"{":"}","[":"]","(":")"},p=/[a-zA-Z0-9.]/;j.prototype._findCompletionBeginning=function(a){var b=[],c=l.NORMAL,e=0,f,g=!1;for(var h=0;h<a.length;h++){f=a[h],p.test(f)||(g=!0);switch(c){case l.NORMAL:if(f==='"')c=l.DQUOTE;else if(f==="'")c=l.QUOTE;else if(f===";")e=h+1;else if(f===" ")e=h+1;else if(m.indexOf(f)!=-1)b.push({token:f,start:e}),e=h+1;else if(n.indexOf(f)!=-1){var i=b.pop();if(!i||o[i.token]!=f)return{err:d.lookup("jstypeBeginSyntax")};f==="}"?e=h+1:e=i.start}break;case l.DQUOTE:if(f==="\\")h++;else{if(f==="\n")return{err:d.lookup("jstypeBeginUnterm")};f==='"'&&(c=l.NORMAL)}break;case l.QUOTE:if(f==="\\")h++;else{if(f==="\n")return{err:d.lookup("jstypeBeginUnterm")};f==="'"&&(c=l.NORMAL)}}}return c===l.NORMAL&&g&&(c=l.COMPLEX),{state:c,startPos:e}},j.prototype._isIteratorOrGenerator=function(a){if(a===null)return!1;if(typeof aObject=="object"){if(typeof a.__iterator__=="function"||a.constructor&&a.constructor.name==="Iterator")return!0;try{var b=a.toString();if(typeof a.next=="function"&&b.indexOf("[object Generator")===0)return!0}catch(c){return!1}}return!1},j.prototype._isSafeProperty=function(a,b){if(typeof a!="object")return!1;var c;while(a){try{c=Object.getOwnPropertyDescriptor(a,b);if(c)break}catch(d){return d.name==="NS_ERROR_XPC_BAD_CONVERT_JS"||d.name==="NS_ERROR_XPC_BAD_OP_ON_WN_PROTO"?!1:!0}a=Object.getPrototypeOf(a)}return c?c.get?typeof c.get!="function"||"prototype"in c.get:!1:!1},j.prototype.name="javascript",b.JavascriptType=j}),define("gcli/types/node",["require","exports","module","gcli/host","gcli/l10n","gcli/types"],function(a,b,c){function k(a){if(Object.keys(a).length>0)throw new Error("NodeType can not be customized")}var d=a("gcli/host"),e=a("gcli/l10n"),f=a("gcli/types"),g=a("gcli/types").Type,h=a("gcli/types").Status,i=a("gcli/types").Conversion;b.startup=function(){f.registerType(k)},b.shutdown=function(){f.unregisterType(k)};var j;typeof document!="undefined"&&(j=document),b.setDocument=function(a){j=a},b.unsetDocument=function(){j=undefined},b.getDocument=function(){return j},k.prototype=Object.create(g.prototype),k.prototype.stringify=function(a){return a.__gcliQuery||"Error"},k.prototype.parse=function(a){if(a.text==="")return new i(undefined,a,h.INCOMPLETE);var b;try{b=j.querySelectorAll(a.text)}catch(c){return new i(undefined,a,h.ERROR,e.lookup("nodeParseSyntax"))}if(b.length===0)return new i(undefined,a,h.INCOMPLETE,e.lookup("nodeParseNone"));if(b.length===1){var f=b.item(0);return f.__gcliQuery=a.text,d.flashNodes(f,!0),new i(f,a,h.VALID,"")}return d.flashNodes(b,!1),new i(undefined,a,h.ERROR,e.lookupFormat("nodeParseMultiple",[b.length]))},k.prototype.name="node"}),define("gcli/host",["require","exports","module"],function(a,b,c){function d(a,b){if(!a.__gcliHighlighting){a.__gcliHighlighting=!0;var c=a.style.background;a.style.background=b?"green":"red",setTimeout(function(){a.style.background=c,delete a.__gcliHighlighting},500)}}b.flashNodes=function(a,b){a.style?d(a,b):Array.prototype.forEach.call(a,function(a){d(a,b)})},b.exec=function(a,b){var c=JSON.stringify(b),d=new XMLHttpRequest;d.open("POST","/exec/",!0),d.setRequestHeader("Content-Type","application/json; charset=utf-8"),d.setRequestHeader("Content-Length",c.length),d.onreadystatechange=function(b){if(d.readyState==4){if(d.status>=300||d.status<200){a.reject(d.responseText);return}a.resolve(d.responseText)}},d.send(c)},b.func=function(a,b){var c=JSON.stringify(b),d=new XMLHttpRequest;d.open("POST","/func/",!0),d.setRequestHeader("Content-Type","application/json; charset=utf-8"),d.setRequestHeader("Content-Length",c.length),d.onreadystatechange=function(b){if(d.readyState==4){if(d.status>=300||d.status<200){a.reject(JSON.parse(d.responseText));return}a.resolve(JSON.parse(d.responseText))}},d.send(c)}}),define("gcli/types/resource",["require","exports","module","gcli/types","gcli/types/selection"],function(a,b,c){function g(a,b,c,d){this.name=a,this.type=b,this.inline=c,this.element=d}function h(a){this.name=a.href,this.name||(this.name=a.ownerNode.id?"css#"+a.ownerNode.id:"inline-css"),this.inline=a.href==null,this.type=g.TYPE_CSS,this.element=a}function i(a){this.name=a.src,this.name||(this.name=a.id?"script#"+a.id:"inline-script"),this.inline=a.src===""||a.src==null,this.type=g.TYPE_SCRIPT,this.element=a}function j(a,b){var c={};a.forEach(function(a){c[a.name]==null&&(c[a.name]=[]),c[a.name].push(a)}),Object.keys(c).forEach(function(a){var d=c[a];d.length>1&&b(d)})}function k(a){this.include=a.include;if(this.include!==g.TYPE_SCRIPT&&this.include!==g.TYPE_CSS&&this.include!=null)throw new Error("invalid include property: "+this.include)}var d=a("gcli/types"),e=a("gcli/types/selection").SelectionType;b.startup=function(){d.registerType(k)},b.shutdown=function(){d.unregisterType(k),b.clearResourceCache()},b.clearResourceCache=function(){l.clear()};var f;typeof document!="undefined"&&(f=document),b.setDocument=function(a){f=a},b.unsetDocument=function(){l.clear(),f=undefined},b.getDocument=function(){return f},g.prototype.getContents=function(){throw new Error("not implemented")},g.TYPE_SCRIPT="text/javascript",g.TYPE_CSS="text/css",h.prototype=Object.create(g.prototype),h.prototype.loadContents=function(a){a(this.element.ownerNode.innerHTML)},h._getAllStyles=function(){var a=[];return f==null?a:(Array.prototype.forEach.call(f.styleSheets,function(b){h._getStyle(b,a)}),j(a,function(a){for(var b=0;b<a.length;b++)a[b].name=a[b].name+"-"+b}),a)},h._getStyle=function(a,b){var c=l.get(a);c||(c=new h(a),l.add(a,c)),b.push(c);try{Array.prototype.forEach.call(a.cssRules,function(a){a.type==CSSRule.IMPORT_RULE&&a.styleSheet&&h._getStyle(a.styleSheet,b)},this)}catch(d){}},i.prototype=Object.create(g.prototype),i.prototype.loadContents=function(a){if(this.inline)a(this.element.innerHTML);else{var b=new XMLHttpRequest;b.onreadystatechange=function(){if(b.readyState!==b.DONE)return;a(b.responseText)},b.open("GET",this.element.src,!0),b.send()}},i._getAllScripts=function(){if(f==null)return[];var a=f.querySelectorAll("script"),b=Array.prototype.map.call(a,function(a){var b=l.get(a);return b||(b=new i(a),l.add(a,b)),b});return j(b,function(a){for(var b=0;b<a.length;b++)a[b].name=a[b].name+"-"+b}),b},k.prototype=Object.create(e.prototype),k.prototype.getLookup=function(){var a=[];return this.include!==g.TYPE_SCRIPT&&Array.prototype.push.apply(a,h._getAllStyles()),this.include!==g.TYPE_CSS&&Array.prototype.push.apply(a,i._getAllScripts()),a.map(function(a){return{name:a.name,value:a}})},k.prototype.name="resource";var l={_cached:[],get:function(a){for(var b=0;b<l._cached.length;b++)if(l._cached[b].node===a)return l._cached[b].resource;return null},add:function(a,b){l._cached.push({node:a,resource:b})},clear:function(){l._cached={}}}}),define("gcli/types/setting",["require","exports","module","gcli/settings","gcli/types","gcli/types/selection","gcli/types/basic"],function(a,b,c){function i(a){if(Object.keys(a).length>0)throw new Error("SettingType can not be customized")}function j(a){if(Object.keys(a).length>0)throw new Error("SettingType can not be customized")}var d=a("gcli/settings"),e=a("gcli/types"),f=a("gcli/types/selection").SelectionType,g=a("gcli/types/basic").DeferredType;b.startup=function(){e.registerType(i),e.registerType(j)},b.shutdown=function(){e.unregisterType(i),e.unregisterType(j)};var h=null;i.prototype=Object.create(f.prototype),i.prototype.lookup=function(){return d.getAll().map(function(a){return{name:a.name,value:a}})},i.prototype.noMatch=function(){h=null},i.prototype.stringify=function(a){return h=a,f.prototype.stringify.call(this,a)},i.prototype.parse=function(a){var b=f.prototype.parse.call(this,a);return h=b.value,b},i.prototype.name="setting",j.prototype=Object.create(g.prototype),j.prototype.defer=function(){return h!=null?h.type:e.getType("blank")},j.prototype.name="settingValue"}),define("gcli/settings",["require","exports","module","gcli/util","gcli/types"],function(a,b,c){function i(){}function j(a,b,c,e){this.name=a,this.type=b,this.description=c,this._defaultValue=e,this.onChange=d.createEvent("Setting.onChange"),this.setDefault()}var d=a("gcli/util"),e=a("gcli/types"),f={},g={},h;b.setDefaults=function(a){Object.keys(a).forEach(function(b){g[b]===undefined&&(g[b]=a[b])})},b.startup=function(){h=new i,h.load(g)},b.shutdown=function(){},b.getAll=function(a){var b=[];return Object.keys(f).forEach(function(c){(a==null||c.indexOf(a)!==-1)&&b.push(f[c])}.bind(this)),b.sort(function(a,b){return a.name.localeCompare(b.name)}.bind(this)),b},b.addSetting=function(a){var b=e.getType(a.type),c=new j(a.name,b,a.description,a.defaultValue);return f[c.name]=c,c},b.removeSetting=function(a){var b=typeof nameOrPrefSpec=="string"?a:a.name;delete f[b]},i.prototype.load=function(a){if(typeof localStorage=="undefined")return;var b=localStorage.getItem("gcli-settings");if(b!=null){var c=JSON.parse(b);Object.keys(c).forEach(function(b){a[b]=c[b]})}},i.prototype.save=function(a){if(typeof localStorage!="undefined"){var b=JSON.stringify(a);localStorage.setItem("gcli-settings",b)}},b.LocalSettingStorage=i,j.prototype.setDefault=function(){this.value=this._defaultValue},Object.defineProperty(j.prototype,"value",{get:function(){return g[this.name]},set:function(a){g[this.name]=a,h.save(g),this.onChange({setting:this,value:a})},enumerable:!0})}),define("gcli/cli",["require","exports","module","gcli/util","gcli/ui/view","gcli/canon","gcli/promise","gcli/types","gcli/types/basic","gcli/argument"],function(require,exports,module){function Assignment(a,b){this.param=a,this.paramIndex=b,this.onAssignmentChange=util.createEvent("Assignment.onAssignmentChange"),this.setBlank()}function CommandAssignment(){var a={name:"__command",type:"command"},b=this;Object.defineProperty(a,"description",{get:function(){var a=b.value;return a&&a.description?a.description:"The command to execute"},enumerable:!0}),this.param=new canon.Parameter(a),this.paramIndex=-1,this.onAssignmentChange=util.createEvent("CommandAssignment.onAssignmentChange"),this.setBlank()}function UnassignedAssignment(){this.param=new canon.Parameter({name:"__unassigned",type:"string"}),this.paramIndex=-1,this.onAssignmentChange=util.createEvent("UnassignedAssignment.onAssignmentChange"),this.setBlank()}function Requisition(a,b){this.environment=a,this.document=b;if(this.document==null)try{this.document=document}catch(c){}this.commandAssignment=new CommandAssignment,this._assignments={},this.assignmentCount=0,this._args=[],this._unassigned=new UnassignedAssignment,this._structuralChangeInProgress=!1,this.commandAssignment.onAssignmentChange.add(this._commandAssignmentChanged,this),this.commandAssignment.onAssignmentChange.add(this._assignmentChanged,this),this.commandOutputManager=canon.commandOutputManager,this.onAssignmentChange=util.createEvent("Requisition.onAssignmentChange"),this.onTextChange=util.createEvent("Requisition.onTextChange")}function isSimple(a){for(var b=0;b<a.length;b++){var c=a.charAt(b);if(c===" "||c==='"'||c==="'"||c==="{"||c==="}"||c==="\\")return!1}return!0}function Output(a){a=a||{},this.command=a.command||"",this.args=a.args||{},this.typed=a.typed||"",this.canonical=a.canonical||"",this.hidden=a.hidden===!0?!0:!1,this.data=undefined,this.completed=!1,this.error=!1,this.start=new Date,this.onClose=util.createEvent("Output.onClose"),this.onChange=util.createEvent("Output.onChange")}var util=require("gcli/util"),view=require("gcli/ui/view"),canon=require("gcli/canon"),Promise=require("gcli/promise").Promise,Status=require("gcli/types").Status,Conversion=require("gcli/types").Conversion,ArrayType=require("gcli/types/basic").ArrayType,StringType=require("gcli/types/basic").StringType,BooleanType=require("gcli/types/basic").BooleanType,Argument=require("gcli/argument").Argument,ArrayArgument=require("gcli/argument").ArrayArgument,NamedArgument=require("gcli/argument").NamedArgument,TrueNamedArgument=require("gcli/argument").TrueNamedArgument,MergedArgument=require("gcli/argument").MergedArgument,ScriptArgument=require("gcli/argument").ScriptArgument,evalCommand;exports.startup=function(){evalCommand=canon.addCommand(evalCommandSpec)},exports.shutdown=function(){canon.removeCommand(evalCommandSpec.name),evalCommand=undefined},Assignment.prototype.param=undefined,Assignment.prototype.conversion=undefined,Assignment.prototype.paramIndex=undefined,Object.defineProperty(Assignment.prototype,"arg",{get:function(){return this.conversion.arg},enumerable:!0}),Object.defineProperty(Assignment.prototype,"value",{get:function(){return this.conversion.value},enumerable:!0}),Assignment.prototype.getMessage=function(){return this.conversion.message?this.conversion.message:""},Assignment.prototype.getPredictions=function(){return this.conversion.getPredictions()},Assignment.prototype.setConversion=function(a){var b=this.conversion;this.conversion=a,this.conversion.assign(this);if(this.conversion.equals(b))return;this.onAssignmentChange({assignment:this,conversion:this.conversion,oldConversion:b})},Assignment.prototype.setBlank=function(){this.setConversion(this.param.type.getBlank())},Assignment.prototype.ensureVisibleArgument=function(){if(!this.conversion.arg.isBlank())return!1;var a=this.conversion.arg.beget("",{prefixSpace:this.param instanceof CommandAssignment});return this.conversion=this.param.type.parse(a),this.conversion.assign(this),!0},Assignment.prototype.getStatus=function(a){return this.param.isDataRequired&&!this.conversion.isDataProvided()?Status.ERROR:!this.param.isDataRequired&&this.arg.isBlank()?Status.VALID:this.conversion.getStatus(a)},Assignment.prototype.decrement=function(){var a=this.param.type.decrement(this.conversion.value);if(a!=null){var b=this.param.type.stringify(a),c=this.conversion.arg.beget(b),d=new Conversion(a,c);this.setConversion(d)}},Assignment.prototype.increment=function(){var a=this.param.type.increment(this.conversion.value);if(a!=null){var b=this.param.type.stringify(a),c=this.conversion.arg.beget(b),d=new Conversion(a,c);this.setConversion(d)}},Assignment.prototype.toString=function(){return this.conversion.toString()},exports.Assignment=Assignment;var customEval=eval;exports.setEvalFunction=function(a){customEval=a},exports.unsetEvalFunction=function(){customEval=undefined};var evalCommandSpec={name:"{",params:[{name:"javascript",type:"javascript",description:""}],hidden:!0,returnType:"object",description:{key:"cliEvalJavascript"},exec:function(a,b){return customEval(a.javascript)},evalRegexp:/^\s*{\s*/};CommandAssignment.prototype=Object.create(Assignment.prototype),CommandAssignment.prototype.getStatus=function(a){return Status.combine(Assignment.prototype.getStatus.call(this,a),this.conversion.value&&this.conversion.value.exec?Status.VALID:Status.INCOMPLETE)},exports.CommandAssignment=CommandAssignment,UnassignedAssignment.prototype=Object.create(Assignment.prototype),UnassignedAssignment.prototype.getStatus=function(a){return Status.ERROR},UnassignedAssignment.prototype.setUnassigned=function(a){if(!a||a.length===0)this.setBlank();else{var b=this.param.type.parse(new MergedArgument(a));this.setConversion(b)}};var MORE_THAN_THE_MOST_ARGS_POSSIBLE=1e6;Requisition.prototype.destroy=function(){this.commandAssignment.onAssignmentChange.remove(this._commandAssignmentChanged,this),this.commandAssignment.onAssignmentChange.remove(this._assignmentChanged,this),delete this.document,delete this.environment},Requisition.prototype._assignmentChanged=function(a){if(a.oldConversion!=null&&a.conversion.valueEquals(a.oldConversion))return;if(this._structuralChangeInProgress)return;this.onAssignmentChange(a);if(a.conversion.argEquals(a.oldConversion))return;this._structuralChangeInProgress=!0;var b;if(a.assignment.param.isPositionalAllowed)for(b=0;b<a.assignment.paramIndex;b++){var c=this.getAssignment(b);c.param.isPositionalAllowed&&c.ensureVisibleArgument()&&this._args.push(c.arg)}var d=MORE_THAN_THE_MOST_ARGS_POSSIBLE;for(b=0;b<this._args.length;b++)this._args[b].assignment===a.assignment&&(b<d&&(d=b),this._args.splice(b,1),b--);if(d===MORE_THAN_THE_MOST_ARGS_POSSIBLE)this._args.push(a.assignment.arg);else{var e=a.conversion.arg.getArgs();for(b=0;b<e.length;b++)this._args.splice(d+b,0,e[b])}this._structuralChangeInProgress=!1,this.onTextChange()},Requisition.prototype._commandAssignmentChanged=function(a){if(a.conversion.valueEquals(a.oldConversion))return;this._assignments={};var b=this.commandAssignment.value;if(b)for(var c=0;c<b.params.length;c++){var d=b.params[c],e=new Assignment(d,c);e.onAssignmentChange.add(this._assignmentChanged,this),this._assignments[d.name]=e}this.assignmentCount=Object.keys(this._assignments).length},Requisition.prototype.getAssignment=function(a){var b=typeof a=="string"?a:Object.keys(this._assignments)[a];return this._assignments[b]||undefined},Requisition.prototype.getParameterNames=function(){return Object.keys(this._assignments)},Requisition.prototype.cloneAssignments=function(){return Object.keys(this._assignments).map(function(a){return this._assignments[a]},this)},Requisition.prototype.getStatus=function(){var a=Status.VALID;return this._unassigned.arg.isBlank()?(this.getAssignments(!0).forEach(function(b){var c=b.getStatus();c>a&&(a=c)},this),a===Status.INCOMPLETE&&(a=Status.ERROR),a):Status.ERROR},Requisition.prototype.getArgsObject=function(){var a={};return this.getAssignments().forEach(function(b){a[b.param.name]=b.conversion.isDataProvided()?b.value:b.param.defaultValue},this),a},Requisition.prototype.getAssignments=function(a){var b=[];return a===!0&&b.push(this.commandAssignment),Object.keys(this._assignments).forEach(function(a){b.push(this.getAssignment(a))},this),b},Requisition.prototype.setBlankArguments=function(){this.getAssignments().forEach(function(a){a.setBlank()},this)},Requisition.prototype.complete=function(a,b){var c=this.getAssignmentAt(a.start),d=c.conversion.getPredictions();if(d.length>0){this.onTextChange.holdFire();var e=c.conversion.getPredictionAt(b),f=c.arg.beget(e.name),g=c.param.type.parse(f);c.setConversion(g),this._args.indexOf(f)===-1&&this._args.push(f);if(e.incomplete)return;var h=c.paramIndex+1,i=this.getAssignment(h);if(i){var j=i.conversion.arg;if(j.prefix.charAt(0)!==" "){j.prefix=" "+j.prefix;var k=i.param.type.parse(j);i.setConversion(k),this._args.indexOf(j)===-1&&this._args.push(j)}}else{var g=c.conversion,f=g.arg;f.suffix.charAt(f.suffix.length-1)!==" "&&(f.suffix=f.suffix+" ",c.setConversion(g))}this.onTextChange(),this.onTextChange.resumeFire()}},Requisition.prototype.toCanonicalString=function(){var a=[],b=this.commandAssignment.value?this.commandAssignment.value.name:this.commandAssignment.arg.text;return a.push(b),Object.keys(this._assignments).forEach(function(b){var c=this._assignments[b],d=c.param.type;c.value!==c.param.defaultValue&&(a.push(" "),a.push(d.stringify(c.value)))},this),b==="{"&&this.getAssignment(0).arg.suffix.indexOf("}")===-1&&a.push(" }"),a.join("")},Requisition.prototype.createInputArgTrace=function(){if(!this._args)throw new Error("createInputMap requires a command line. See source.");var a=[],b;return this._args.forEach(function(c){for(b=0;b<c.prefix.length;b++)a.push({arg:c,"char":c.prefix[b],part:"prefix"});for(b=0;b<c.text.length;b++)a.push({arg:c,"char":c.text[b],part:"text"});for(b=0;b<c.suffix.length;b++)a.push({arg:c,"char":c.suffix[b],part:"suffix"})}),a},Requisition.prototype.toString=function(){return this._args?this._args.map(function(a){return a.toString()}).join(""):this.toCanonicalString()},Requisition.prototype.typedEndsWithWhitespace=function(){return this._args?this._args.slice(-1)[0].suffix.slice(-1)===" ":this.toCanonicalString().slice(-1)===" "},Requisition.prototype.getInputStatusMarkup=function(a){var b=this.createInputArgTrace();a=a===0?0:a-1;var c=b[a],d=[];for(var e=0;e<b.length;e++){var f=b[e],g=f.arg,h=Status.VALID;f.part==="text"&&(h=g.assignment.getStatus(g),h===Status.INCOMPLETE&&(g!==c.arg||c.part!=="text")&&(g.assignment instanceof CommandAssignment||(h=Status.ERROR))),d.push({status:h,string:f.char})}var e=0;while(e<d.length-1)d[e].status===d[e+1].status?(d[e].string+=d[e+1].string,d.splice(e+1,1)):e++;return d},Requisition.prototype.getAssignmentAt=function(a){if(!this._args)throw console.trace(),new Error("Missing args");if(a===0)return this.commandAssignment;var b=[],c,d;for(c=0;c<this._args.length;c++){var e=this._args[c],f=e.assignment;for(d=0;d<e.prefix.length;d++)b.push(f);for(d=0;d<e.text.length;d++)b.push(f);this._args.length>c+1?f=this._args[c+1].assignment:f&&f.paramIndex+1<this.assignmentCount&&(f=this.getAssignment(f.paramIndex+1));for(d=0;d<e.suffix.length;d++)b.push(f)}var g=b[a-1];if(!g)throw new Error("Missing assignment. cursor="+a+" text.length="+this.toString().length);return g},Requisition.prototype.exec=function(a){var b,c,d=!1;a&&a.hidden&&(d=!0),a&&(typeof a=="string"?this.update(a):typeof a.typed=="string"?this.update(a.typed):a.command!=null&&(b=canon.getCommand(a.command),b||console.error("Command not found: "+a.command),c=a.args)),b||(b=this.commandAssignment.value,c=this.getArgsObject());if(!b)throw new Error("Unknown command");var e=this.toString();evalCommandSpec.evalRegexp.test(e)&&(e=e.replace(evalCommandSpec.evalRegexp,""),e=e.replace(/\s*}\s*$/,""));var f=new Output({command:b,args:c,typed:e,canonical:this.toCanonicalString(),hidden:d});this.commandOutputManager.onOutput({output:f});try{var g=exports.createExecutionContext(this),h=b.exec(c,g);h!=null&&h.isPromise?(h.then(function(a){f.complete(a)},function(a){f.error=!0,f.complete(a)}),f.promise=h):f.complete(h)}catch(i){console.error(i),f.error=!0,f.complete(i)}return this.update(""),f},Requisition.prototype.update=function(a){this._structuralChangeInProgress=!0,this._args=this._tokenize(a);var b=this._args.slice(0);this._split(b),this._assign(b),this._structuralChangeInProgress=!1,this.onTextChange()};var In={WHITESPACE:1,SIMPLE:2,SINGLE_Q:3,DOUBLE_Q:4,SCRIPT:5};Requisition.prototype._tokenize=function(a){function c(a){return a.replace(/\uF000/g," ").replace(/\uF001/g,"'").replace(/\uF002/g,'"').replace(/\uF003/g,"{").replace(/\uF004/g,"}")}if(a==null||a.length===0)return[new Argument("","","")];if(isSimple(a))return[new Argument(a,"","")];var b=In.WHITESPACE;a=a.replace(/\\\\/g,"\\").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\ /g,"").replace(/\\'/g,"").replace(/\\"/g,"").replace(/\\{/g,"").replace(/\\}/g,"");var d=0,e=0,f="",g=[],h=0;for(;;){var i=a[d],j;switch(b){case In.WHITESPACE:i==="'"?(f=a.substring(e,d+1),b=In.SINGLE_Q,e=d+1):i==='"'?(f=a.substring(e,d+1),b=In.DOUBLE_Q,e=d+1):i==="{"?(f=a.substring(e,d+1),b=In.SCRIPT,h++,e=d+1):/ /.test(i)||(f=a.substring(e,d),b=In.SIMPLE,e=d);break;case In.SIMPLE:i===" "&&(j=c(a.substring(e,d)),g.push(new Argument(j,f,"")),b=In.WHITESPACE,e=d,f="");break;case In.SINGLE_Q:i==="'"&&(j=c(a.substring(e,d)),g.push(new Argument(j,f,i)),b=In.WHITESPACE,e=d+1,f="");break;case In.DOUBLE_Q:i==='"'&&(j=c(a.substring(e,d)),g.push(new Argument(j,f,i)),b=In.WHITESPACE,e=d+1,f="");break;case In.SCRIPT:i==="{"?h++:i==="}"&&(h--,h===0&&(j=c(a.substring(e,d)),g.push(new ScriptArgument(j,f,i)),b=In.WHITESPACE,e=d+1,f=""))}d++;if(d>=a.length){if(b===In.WHITESPACE){if(d!==e){var k=a.substring(e,d),l=g[g.length-1];l?l.suffix+=k:g.push(new Argument("",k,""))}}else b===In.SCRIPT?(j=c(a.substring(e,d+1)),g.push(new ScriptArgument(j,f,""))):(j=c(a.substring(e,d+1)),g.push(new Argument(j,f,"")));break}}return g},Requisition.prototype._split=function(a){var b;if(a[0]instanceof ScriptArgument){b=new Conversion(evalCommand,new ScriptArgument),this.commandAssignment.setConversion(b);return}var c=1;while(c<=a.length){var d=c===1?a[0]:new MergedArgument(a,0,c);b=this.commandAssignment.param.type.parse(d);if(!b.value||b.value.exec)break;c++}this.commandAssignment.setConversion(b);for(var e=0;e<c;e++)a.shift()},Requisition.prototype._assign=function(a){if(!this.commandAssignment.value){this._unassigned.setUnassigned(a);return}if(a.length===0){this.setBlankArguments(),this._unassigned.setBlank();return}if(this.assignmentCount===0){this._unassigned.setUnassigned(a);return}if(this.assignmentCount===1){var b=this.getAssignment(0);if(b.param.type instanceof StringType){var c=a.length===1?a[0]:new MergedArgument(a),d=b.param.type.parse(c);b.setConversion(d),this._unassigned.setBlank();return}}var e=this.getParameterNames(),f={};this.getAssignments(!1).forEach(function(b){var c=0;while(c<a.length)if(b.param.isKnownAs(a[c].text)){var d=a.splice(c,1)[0];e=e.filter(function(a){return a!==b.param.name});if(b.param.type instanceof BooleanType)d=new TrueNamedArgument(null,d);else{var g=null;c+1>=a.length&&(g=a.splice(c,1)[0]),d=new NamedArgument(d,g)}if(b.param.type instanceof ArrayType){var h=f[b.param.name];h||(h=new ArrayArgument,f[b.param.name]=h),h.addArgument(d)}else{var i=b.param.type.parse(d);b.setConversion(i)}}else c++},this),e.forEach(function(b){var c=this.getAssignment(b);if(!c.param.isPositionalAllowed){c.setBlank();return}if(c.param.type instanceof ArrayType){var d=f[c.param.name];d||(d=new ArrayArgument,f[c.param.name]=d),d.addArguments(a),a=[]}else{var e=a.length>0?a.splice(0,1)[0]:new Argument,g=c.param.type.parse(e);c.setConversion(g)}},this),Object.keys(f).forEach(function(a){var b=this.getAssignment(a),c=b.param.type.parse(f[a]);b.setConversion(c)},this),this._unassigned.setUnassigned(a)},exports.Requisition=Requisition,Output.prototype.complete=function(a){this.data=a,this.end=new Date,this.duration=this.end.getTime()-this.start.getTime(),this.completed=!0,this.onChange({output:this})},Output.prototype.toDom=function(a){util.clearElement(a);var b=a.ownerDocument,c=this.data;if(c==null)return;var d;typeof HTMLElement!="undefined"&&c instanceof HTMLElement?d=c:c.isView?d=c.toDom(b):(this.command.returnType==="terminal"?Array.isArray(c)?(d=util.createElement(b,"div"),c.forEach(function(){var a=util.createElement(b,"textarea");a.classList.add("gcli-row-subterminal"),a.readOnly=!0,d.appendChild(a)})):(d=util.createElement(b,"textarea"),d.classList.add("gcli-row-terminal"),d.readOnly=!0):d=util.createElement(b,"p"),util.setContents(d,c.toString())),a.appendChild(d)},Output.prototype.toString=function(a){var b=this.data;return b==null?"":typeof HTMLElement!="undefined"&&b instanceof HTMLElement?b.textContent:b.isView?b.toDom(a).textContent:b.toString()},exports.Output=Output,exports.createExecutionContext=function(a){return{exec:a.exec.bind(a),update:a.update.bind(a),document:a.document,environment:a.environment,createView:view.createView,createPromise:function(){return new Promise}}}}),define("gcli/ui/view",["require","exports","module","gcli/util","gcli/ui/domtemplate"],function(a,b,c){var d=a("gcli/util"),e=a("gcli/ui/domtemplate");b.createView=function(a){if(a.html==null)throw new Error("options.html is missing");return{isView:!0,appendTo:function(a,b){b===!0&&d.clearElement(a),a.appendChild(this.toDom(a.ownerDocument))},toDom:function(b){a.css&&d.importCss(a.css,b,a.cssId);var c=d.toDom(b,a.html);return e.template(c,a.data||{},a.options||{}),c}}}}),define("gcli/ui/domtemplate",["require","exports","module"],function(require,exports,module){function template(a,b,c){var d=new Templater(c||{});return d.processNode(a,b),d}function Templater(a){a==null&&(a={allowEval:!0}),this.options=a,a.stack&&Array.isArray(a.stack)?this.stack=a.stack:typeof a.stack=="string"?this.stack=[a.stack]:this.stack=[]}Templater.prototype._templateRegion=/\$\{([^}]*)\}/g,Templater.prototype._splitSpecial=/\uF001|\uF002/,Templater.prototype._isPropertyScript=/^[_a-zA-Z0-9.]*$/,Templater.prototype.processNode=function(a,b){typeof a=="string"&&(a=document.getElementById(a)),b==null&&(b={}),this.stack.push(a.nodeName+(a.id?"#"+a.id:""));try{if(a.attributes&&a.attributes.length){if(a.hasAttribute("foreach")){this._processForEach(a,b);return}if(a.hasAttribute("if")&&!this._processIf(a,b))return;b.__element=a;var c=Array.prototype.slice.call(a.attributes);for(var d=0;d<c.length;d++){var e=c[d].value,f=c[d].name;this.stack.push(f);try{if(f==="save")e=this._stripBraces(e),this._property(e,b,a),a.removeAttribute("save");else if(f.substring(0,2)==="on"){e=this._stripBraces(e);var g=this._property(e,b);typeof g!="function"&&this._handleError("Expected "+e+" to resolve to a function, but got "+typeof g),a.removeAttribute(f);var h=a.hasAttribute("capture"+f.substring(2));a.addEventListener(f.substring(2),g,h),h&&a.removeAttribute("capture"+f.substring(2))}else{var i=e.replace(this._templateRegion,function(a){var c=this._envEval(a.slice(2,-1),b,e);return this.options.blankNullUndefined&&c==null&&(c=""),c}.bind(this));f.charAt(0)==="_"?(a.removeAttribute(f),a.setAttribute(f.substring(1),i)):e!==i&&(c[d].value=i)}}finally{this.stack.pop()}}}var j=Array.prototype.slice.call(a.childNodes);for(var k=0;k<j.length;k++)this.processNode(j[k],b);a.nodeType===3&&this._processTextNode(a,b)}finally{delete b.__element,this.stack.pop()}},Templater.prototype._processIf=function(a,b){this.stack.push("if");try{var c=a.getAttribute("if"),d=this._stripBraces(c),e=!0;try{var f=this._envEval(d,b,c);e=!!f}catch(g){this._handleError("Error with '"+d+"'",g),e=!1}return e||a.parentNode.removeChild(a),a.removeAttribute("if"),e}finally{this.stack.pop()}},Templater.prototype._processForEach=function(a,b){this.stack.push("foreach");try{var c=a.getAttribute("foreach"),d=c,e="param";if(d.charAt(0)==="$")d=this._stripBraces(d);else{var f=d.split(" in ");e=f[0].trim(),d=this._stripBraces(f[1].trim())}a.removeAttribute("foreach");try{var g=this._envEval(d,b,c);this._handleAsync(g,a,function(c,d){this._processForEachLoop(c,a,d,b,e)}.bind(this)),a.parentNode.removeChild(a)}catch(h){this._handleError("Error with '"+d+"'",h)}}finally{this.stack.pop()}},Templater.prototype._processForEachLoop=function(a,b,c,d,e){if(Array.isArray(a))a.forEach(function(a,f){this._processForEachMember(a,b,c,d,e,""+f)},this);else for(var f in a)a.hasOwnProperty(f)&&this._processForEachMember(f,b,c,d,e,f)},Templater.prototype._processForEachMember=function(a,b,c,d,e,f){this.stack.push(f);try{this._handleAsync(a,c,function(a,c){d[e]=a;if(b.nodeName.toLowerCase()==="loop")for(var f=0;f<b.childNodes.length;f++){var g=b.childNodes[f].cloneNode(!0);c.parentNode.insertBefore(g,c),this.processNode(g,d)}else{var g=b.cloneNode(!0);g.removeAttribute("foreach"),c.parentNode.insertBefore(g,c),this.processNode(g,d)}delete d[e]}.bind(this))}finally{this.stack.pop()}},Templater.prototype._processTextNode=function(a,b){var c=a.data;c=c.replace(this._templateRegion,"$$$1");var d=c.split(this._splitSpecial);d.length>1&&(d.forEach(function(c){if(c===null||c===undefined||c==="")return;c.charAt(0)==="$"&&(c=this._envEval(c.slice(1),b,a.data)),this._handleAsync(c,a,function(a,b){var c=b.ownerDocument;a==null&&(a=this.options.blankNullUndefined?"":""+a);if(typeof a.cloneNode=="function")a=this._maybeImportNode(a,c),b.parentNode.insertBefore(a,b);else if(typeof a.item=="function"&&a.length)for(var d=0;d<a.length;d++){var e=this._maybeImportNode(a.item(d),c);b.parentNode.insertBefore(e,b)}else a=c.createTextNode(a.toString()),b.parentNode.insertBefore(a,b)}.bind(this))},this),a.parentNode.removeChild(a))},Templater.prototype._maybeImportNode=function(a,b){return a.ownerDocument===b?a:b.importNode(a,!0)},Templater.prototype._handleAsync=function(a,b,c){if(a!=null&&typeof a.then=="function"){var d=b.ownerDocument.createElement("span");b.parentNode.insertBefore(d,b),a.then(function(a){c(a,d),d.parentNode.removeChild(d)}.bind(this))}else c(a,b)},Templater.prototype._stripBraces=function(a){return a.match(this._templateRegion)?a.slice(2,-1):(this._handleError("Expected "+a+" to match ${...}"),a)},Templater.prototype._property=function(a,b,c){try{typeof a=="string"&&(a=a.split("."));var d=b[a[0]];return a.length===1?(c!==undefined&&(b[a[0]]=c),typeof d=="function"?d.bind(b):d):d?this._property(a.slice(1),d,c):(this._handleError('"'+a[0]+'" is undefined'),null)}catch(e){return this._handleError("Path error with '"+a+"'",e),"${"+a+"}"}},Templater.prototype._envEval=function(script,data,frame){try{this.stack.push(frame.replace(/\s+/g," "));if(this._isPropertyScript.test(script))return this._property(script,data);if(!this.options.allowEval)return this._handleError("allowEval is not set, however '"+script+"'"+" can not be resolved using a simple property path."),"${"+script+"}";with(data)return eval(script)}catch(ex){return this._handleError("Template error evaluating '"+script+"'",ex),"${"+script+"}"}finally{this.stack.pop()}},Templater.prototype._handleError=function(a,b){this._logError(a+" (In: "+this.stack.join(" > ")+")"),b&&this._logError(b)},Templater.prototype._logError=function(a){console.log(a)},exports.Templater=Templater,exports.template=template}),define("gcli/promise",["require","exports","module"],function(a,b,c){function d(){this._status=d.PENDING,this._value=undefined,this._onSuccessHandlers=[],this._onErrorHandlers=[],this._id=d._nextId++,d._outstanding[this._id]=this}d._nextId=0,d._outstanding=[],d._recent=[],d.ERROR=-1,d.PENDING=0,d.SUCCESS=1,d.prototype.isPromise=!0,d.prototype.isComplete=function(){return this._status!=d.PENDING},d.prototype.isResolved=function(){return this._status==d.SUCCESS},d.prototype.isRejected=function(){return this._status==d.ERROR},d.prototype.then=function(a,b){return typeof a=="function"&&(this._status===d.SUCCESS?a.call(null,this._value):this._status===d.PENDING&&this._onSuccessHandlers.push(a)),typeof b=="function"&&(this._status===d.ERROR?b.call(null,this._value):this._status===d.PENDING&&this._onErrorHandlers.push(b)),this},d.prototype.chainPromise=function(a){var b=new d;return b._chainedFrom=this,this.then(function(c){try{b.resolve(a(c))}catch(d){b.reject(d)}},function(a){b.reject(a)}),b},d.prototype.resolve=function(a){return this._complete(this._onSuccessHandlers,d.SUCCESS,a,"resolve")},d.prototype.reject=function(a){return this._complete(this._onErrorHandlers,d.ERROR,a,"reject")},d.prototype._complete=function(a,b,c,e){if(this._status!=d.PENDING)throw d._error("Promise complete. Attempted "+e+"() with ",c),d._error("Prev status = ",this._status,", value = ",this._value),new Error("Promise already complete");if(a.length==0&&b==d.ERROR){d._error("Promise rejection ignored and silently dropped"),d._error(c);var f;if(c.stack){d._error("Printing original stack");for(f=c.stack;f;f=f.caller)d._error(f)}else if(c.fileName&&c.lineNumber)d._error("Error originating at "+c.fileName+", line "+c.lineNumber);else if(typeof Components!="undefined")try{if(Components.stack){d._error("Original stack not available. Printing current stack");for(f=Components.stack;f;f=f.caller)d._error(f)}}catch(g){}}return d._setTimeout(function(){this._status=b,this._value=c,a.forEach(function(a){a.call(null,this._value)},this),delete this._onSuccessHandlers,delete this._onErrorHandlers,delete d._outstanding[this._id],d._recent.push(this);while(d._recent.length>20)d._recent.shift()}.bind(this),1),this},d.prototype.toString=function(){return"[Promise "+this._id+"]"},d.group=function(a){Array.isArray(a)||(a=Array.prototype.slice.call(arguments));if(a.length===0)return(new d).resolve([]);var b=new d,c=[],e=0,f=function(f){return function(g){c[f]=g,e++,b._status!==d.ERROR&&e===a.length&&b.resolve(c)}};return a.forEach(function(a,c){var d=f(c),e=b.reject.bind(b);a.then(d,e)}),b},d._setTimeout=function(a,b){return setTimeout(a,b)},d._error=console.warn.bind(console),b.Promise=d}),define("gcli/ui/intro",["require","exports","module","gcli/settings","gcli/l10n","gcli/ui/view","gcli/cli","text!gcli/ui/intro.html"],function(a,b,c){var d=a("gcli/settings"),e=a("gcli/l10n"),f=a("gcli/ui/view"),g=a("gcli/cli").Output,h={name:"hideIntro",type:"boolean",description:e.lookup("hideIntroDesc"),defaultValue:!1},i;b.startup=function(){i=d.addSetting(h)},b.shutdown=function(){d.removeSetting(h),i=undefined},b.maybeShowIntro=function(b){if(i.value)return;var c=new g;b.onOutput({output:c});var d=f.createView({html:a("text!gcli/ui/intro.html"),data:{showHideButton:!0,onGotIt:function(a){i.value=!0,c.onClose()}}});c.complete(d)}}),define("text!gcli/ui/intro.html",[],'\n<div>\n  <p>\n  GCLI is an experiment to create a highly usable <strong>graphical command\n  line</strong> for developers. It\'s not a JavaScript\n  <a href="https://en.wikipedia.org/wiki/Read�eval�print_loop">REPL</a>, so\n  it focuses on speed of input over JavaScript syntax and a rich display over\n  monospace output.</p>\n\n  <p>Type <span class="gcli-out-shortcut">help</span> for a list of commands,\n  or press <code>F1/Escape</code> to show/hide command hints.</p>\n\n  <button onclick="${onGotIt}" if="${showHideButton}">Got it!</button>\n</div>\n'),define("gcli/ui/focus",["require","exports","module","gcli/util","gcli/settings","gcli/l10n","gcli/canon"],function(a,b,c){function k(a,b){a=a||{},this._document=b.document||document,this._debug=a.debug||!1,this._blurDelay=a.blurDelay||150,this._window=this._document.defaultView,this._commandOutputManager=a.commandOutputManager||g.commandOutputManager,this._commandOutputManager.onOutput.add(this._outputted,this),this._blurDelayTimeout=null,this._monitoredElements=[],this._isError=!1,this._hasFocus=!1,this._helpRequested=!1,this._recentOutput=!1,this.onVisibilityChange=d.createEvent("FocusManager.onVisibilityChange"),this._focused=this._focused.bind(this),this._document.addEventListener("focus",this._focused,!0),j.onChange.add(this._eagerHelperChanged,this),this.isTooltipVisible=undefined,this.isOutputVisible=undefined,this._checkShow()}var d=a("gcli/util"),e=a("gcli/settings"),f=a("gcli/l10n"),g=a("gcli/canon"),h={NEVER:1,SOMETIMES:2,ALWAYS:3},i={name:"eagerHelper",type:{name:"selection",lookup:[{name:"never",value:h.NEVER},{name:"sometimes",value:h.SOMETIMES},{name:"always",value:h.ALWAYS}]},defaultValue:1,description:f.lookup("eagerHelperDesc"),ignoreTypeDifference:!0},j;b.startup=function(){j=e.addSetting(i)},b.shutdown=function(){e.removeSetting(i),j=undefined},k.prototype.destroy=function(){j.onChange.remove(this._eagerHelperChanged,this),this._document.removeEventListener("focus",this._focused,!0),this._commandOutputManager.onOutput.remove(this._outputted,this);for(var a=0;a<this._monitoredElements.length;a++){var b=this._monitoredElements[a];console.error("Hanging monitored element: ",b.element),b.element.removeEventListener("focus",b.onFocus,!0),b.element.removeEventListener("blur",b.onBlur,!0)}this._blurDelayTimeout&&(this._window.clearTimeout(this._blurDelayTimeout),this._blurDelayTimeout=null),delete this._focused,delete this._document,delete this._window,delete this._commandOutputManager},k.prototype.addMonitoredElement=function(a,b){this._debug&&console.log("FocusManager.addMonitoredElement("+(b||"unknown")+")");var c={element:a,where:b,onFocus:function(){this._reportFocus(b)}.bind(this),onBlur:function(){this._reportBlur(b)}.bind(this)};a.addEventListener("focus",c.onFocus,!0),a.addEventListener("blur",c.onBlur,!0),this._monitoredElements.push(c)},k.prototype.removeMonitoredElement=function(a,b){this._debug&&console.log("FocusManager.removeMonitoredElement("+(b||"unknown")+")");var c=this._monitoredElements.filter(function(b){return b.element===a?(a.removeEventListener("focus",b.onFocus,!0),a.removeEventListener("blur",b.onBlur,!0),!1):!0});this._monitoredElements=c},k.prototype.updatePosition=function(a){var b={tooltipVisible:this.isTooltipVisible,outputVisible:this.isOutputVisible};this.onVisibilityChange(b)},k.prototype._outputted=function(a){this._recentOutput=!0,this._helpRequested=!1,this._checkShow()},k.prototype._focused=function(){this._reportBlur("document")},k.prototype._reportFocus=function(a){this._debug&&console.log("FocusManager._reportFocus("+(a||"unknown")+")"),this._blurDelayTimeout&&(this._debug&&console.log("FocusManager.cancelBlur"),this._window.clearTimeout(this._blurDelayTimeout),this._blurDelayTimeout=null),this._hasFocus||(this._hasFocus=!0),this._checkShow()},k.prototype._reportBlur=function(a){this._debug&&console.log("FocusManager._reportBlur("+a+")");if(this._hasFocus){if(this._blurDelayTimeout){this._debug&&console.log("FocusManager.blurPending");return}this._blurDelayTimeout=this._window.setTimeout(function(){this._debug&&console.log("FocusManager.blur"),this._hasFocus=!1,this._checkShow(),this._blurDelayTimeout=null}.bind(this),this._blurDelay)}},k.prototype._eagerHelperChanged=function(){this._checkShow()},k.prototype.onInputChange=function(a){this._recentOutput=!1,this._checkShow()},k.prototype.helpRequest=function(){this._debug&&console.log("FocusManager.helpRequest"),this._helpRequested=!0,this._recentOutput=!1,this._checkShow()},k.prototype.removeHelp=function(){this._debug&&console.log("FocusManager.removeHelp"),this._importantFieldFlag=!1,this._isError=!1,this._helpRequested=!1,this._recentOutput=!1,this._checkShow()},k.prototype.setImportantFieldFlag=function(a){this._debug&&console.log("FocusManager.setImportantFieldFlag",a),this._importantFieldFlag=a,this._checkShow()},k.prototype.setError=function(a){this._debug&&console.log("FocusManager._isError",a),this._isError=a,this._checkShow()},k.prototype._checkShow=function(){var a=!1,b={tooltipVisible:this.isTooltipVisible,outputVisible:this.isOutputVisible},c=this._shouldShowTooltip();this.isTooltipVisible!==c.visible&&(b.tooltipVisible=this.isTooltipVisible=c.visible,a=!0);var d=this._shouldShowOutput();this.isOutputVisible!==d.visible&&(b.outputVisible=this.isOutputVisible=d.visible,a=!0),a&&(this._debug&&console.debug("FocusManager.onVisibilityChange",b),this.onVisibilityChange(b))},k.prototype._shouldShowTooltip=function(){return j.value===h.NEVER?{visible:!1,reason:"eagerHelper !== NEVER"}:j.value===h.ALWAYS?{visible:!0,reason:"eagerHelper !== ALWAYS"}:this._isError?{visible:!0,reason:"isError"}:this._helpRequested?{visible:!0,reason:"helpRequested"}:this._importantFieldFlag?{visible:!0,reason:"importantFieldFlag"}:{visible:!1,reason:"default"}},k.prototype._shouldShowOutput=function(){return this._recentOutput?{visible:!0,reason:"recentOutput"}:{visible:!1,reason:"default"}},b.FocusManager=k}),define("gcli/ui/fields/basic",["require","exports","module","gcli/util","gcli/l10n","gcli/argument","gcli/types","gcli/types/basic","gcli/ui/fields"],function(a,b,c){function s(a,b){q.call(this,a,b),this.arg=new f,this.element=d.createElement(this.document,"input"),this.element.type="text",this.element.classList.add("gcli-field"),this.onInputChange=this.onInputChange.bind(this),this.element.addEventListener("keyup",this.onInputChange,!1),this.onFieldChange=d.createEvent("StringField.onFieldChange")}function t(a,b){q.call(this,a,b),this.arg=new f,this.element=d.createElement(this.document,"input"),this.element.type="number",this.type.max&&(this.element.max=this.type.max),this.type.min&&(this.element.min=this.type.min),this.type.step&&(this.element.step=this.type.step),this.onInputChange=this.onInputChange.bind(this),this.element.addEventListener("keyup",this.onInputChange,!1),this.onFieldChange=d.createEvent("NumberField.onFieldChange")}function u(a,b){q.call(this,a,b),this.name=b.name,this.named=b.named,this.element=d.createElement(this.document,"input"),this.element.type="checkbox",this.element.id="gcliForm"+this.name,this.onInputChange=this.onInputChange.bind(this),this.element.addEventListener("change",this.onInputChange,!1),this.onFieldChange=d.createEvent("BooleanField.onFieldChange")}function v(a,b){q.call(this,a,b),this.options=b,this.requisition.onAssignmentChange.add(this.update,this),this.element=d.createElement(this.document,"div"),this.update(),this.onFieldChange=d.createEvent("DeferredField.onFieldChange")}function w(a,b){q.call(this,a,b),this.options=b,this._onAdd=this._onAdd.bind(this),this.members=[],this.element=d.createElement(this.document,"div"),this.element.classList.add("gcli-array-parent"),this.addButton=d.createElement(this.document,"button"),this.addButton.classList.add("gcli-array-member-add"),this.addButton.addEventListener("click",this._onAdd,!1),this.addButton.innerHTML=e.lookup("fieldArrayAdd"),this.element.appendChild(this.addButton),this.container=d.createElement(this.document,"div"),this.container.classList.add("gcli-array-members"),this.element.appendChild(this.container),this.onInputChange=this.onInputChange.bind(this),this.onFieldChange=d.createEvent("ArrayField.onFieldChange")}var d=a("gcli/util"),e=a("gcli/l10n"),f=a("gcli/argument").Argument,g=a("gcli/argument").TrueNamedArgument,h=a("gcli/argument").FalseNamedArgument,i=a("gcli/argument").ArrayArgument,j=a("gcli/types").Conversion,k=a("gcli/types").ArrayConversion,l=a("gcli/types/basic").StringType,m=a("gcli/types/basic").NumberType,n=a("gcli/types/basic").BooleanType,o=a("gcli/types/basic").DeferredType,p=a("gcli/types/basic").ArrayType,q=a("gcli/ui/fields").Field,r=a("gcli/ui/fields");b.startup=function(){r.addField(s),r.addField(t),r.addField(u),r.addField(v),r.addField(w)},b.shutdown=function(){r.removeField(s),r.removeField(t),r.removeField(u),r.removeField(v),r.removeField(w)},s.prototype=Object.create(q.prototype),s.prototype.destroy=function(){q.prototype.destroy.call(this),this.element.removeEventListener("keyup",this.onInputChange,!1),delete this.element,delete this.document,delete this.onInputChange},s.prototype.setConversion=function(a){this.arg=a.arg,this.element.value=a.arg.text,this.setMessage(a.message)},s.prototype.getConversion=function(){return this.arg=this.arg.beget(this.element.value,{prefixSpace:!0}),this.type.parse(this.arg)},s.claim=function(a){return a instanceof l?q.MATCH:q.BASIC},t.prototype=Object.create(q.prototype),t.claim=function(a){return a instanceof m?q.MATCH:q.NO_MATCH},t.prototype.destroy=function(){q.prototype.destroy.call(this),this.element.removeEventListener("keyup",this.onInputChange,!1),delete this.element,delete this.document,delete this.onInputChange},t.prototype.setConversion=function(a){this.arg=a.arg,this.element.value=a.arg.text,this.setMessage(a.message)},t.prototype.getConversion=function(){return this.arg=this.arg.beget(this.element.value,{prefixSpace:!0}),this.type.parse(this.arg)},u.prototype=Object.create(q.prototype),u.claim=function(a){return a instanceof n?q.MATCH:q.NO_MATCH},u.prototype.destroy=function(){q.prototype.destroy.call(this),this.element.removeEventListener("change",this.onInputChange,!1),delete this.element,delete this.document,delete this.onInputChange},u.prototype.setConversion=function(a){this.element.checked=a.value,this.setMessage(a.message)},u.prototype.getConversion=function(){var a;return this.named?a=this.element.checked?new g(this.name):new h:a=new f(" "+this.element.checked),this.type.parse(a)},v.prototype=Object.create(q.prototype),v.prototype.update=function(){var a=this.type.defer();if(a===this.subtype)return;this.field&&(this.field.onFieldChange.remove(this.fieldChanged,this),this.field.destroy()),this.subtype=a,this.field=r.getField(a,this.options),this.field.onFieldChange.add(this.fieldChanged,this),d.clearElement(this.element),this.element.appendChild(this.field.element)},v.claim=function(a){return a instanceof o?q.MATCH:q.NO_MATCH},v.prototype.destroy=function(){q.prototype.destroy.call(this),this.requisition.onAssignmentChange.remove(this.update,this),delete this.element,delete this.document,delete this.onInputChange},v.prototype.setConversion=function(a){this.field.setConversion(a)},v.prototype.getConversion=function(){return this.field.getConversion()},Object.defineProperty(v.prototype,"isImportant",{get:function(){return this.field.isImportant},enumerable:!0}),w.prototype=Object.create(q.prototype),w.claim=function(a){return a instanceof p?q.MATCH:q.NO_MATCH},w.prototype.destroy=function(){q.prototype.destroy.call(this),this.addButton.removeEventListener("click",this._onAdd,!1)},w.prototype.setConversion=function(a){d.clearElement(this.container),this.members=[],a.conversions.forEach(function(a){this._onAdd(null,a)},this)},w.prototype.getConversion=function(){var a=[],b=new i;for(var c=0;c<this.members.length;c++){var d=this.members[c].field.getConversion();a.push(d),b.addArgument(d.arg)}return new k(a,b)},w.prototype._onAdd=function(a,b){var c=d.createElement(this.document,"div");c.classList.add("gcli-array-member"),this.container.appendChild(c);var f=r.getField(this.type.subtype,this.options);f.onFieldChange.add(function(){var a=this.getConversion();this.onFieldChange({conversion:a}),this.setMessage(a.message)},this),b&&f.setConversion(b),c.appendChild(f.element);var g=d.createElement(this.document,"button");g.classList.add("gcli-array-member-del"),g.addEventListener("click",this._onDel,!1),g.innerHTML=e.lookup("fieldArrayDel"),c.appendChild(g);var h={element:c,field:f,parent:this};h.onDelete=function(){this.parent.container.removeChild(this.element),this.parent.members=this.parent.members.filter(function(a){return a!==this}),this.parent.onInputChange()}.bind(h),g.addEventListener("click",h.onDelete,!1),this.members.push(h)}}),define("gcli/ui/fields",["require","exports","module","gcli/util","gcli/types/basic"],function(a,b,c){function g(a,b){this.type=a,this.document=b.document,this.requisition=b.requisition}function i(a,b){g.call(this,a,b),this.element=d.createElement(this.document,"div"),this.onFieldChange=d.createEvent("BlankField.onFieldChange")}var d=a("gcli/util"),e=a("gcli/util").KeyEvent,f=a("gcli/types/basic").BlankType;g.prototype.element=undefined,g.prototype.destroy=function(){delete this.messageElement},g.prototype.setConversion=function(a){throw new Error("Field should not be used directly")},g.prototype.getConversion=function(){throw new Error("Field should not be used directly")},g.prototype.setMessageElement=function(a){this.messageElement=a},g.prototype.setMessage=function(a){this.messageElement&&(a==null&&(a=""),d.setContents(this.messageElement,a))},g.prototype.onInputChange=function(a){var b=this.getConversion();this.onFieldChange({conversion:b}),this.setMessage(b.message),a.keyCode===e.DOM_VK_RETURN&&this.requisition.exec()},g.prototype.isImportant=!1,g.claim=function(){throw new Error("Field should not be used directly")},g.TOOLTIP_MATCH=5,g.TOOLTIP_DEFAULT=4,g.MATCH=3,g.DEFAULT=2,g.BASIC=1,g.NO_MATCH=0,b.Field=g;var h=[];b.addField=function(a){if(typeof a!="function")throw console.error("addField erroring on ",a),new Error("addField requires a Field constructor");h.push(a)},b.removeField=function(a){if(typeof a!="string")fields=fields.filter(function(b){return b!==a}),delete fields[a];else{if(!(a instanceof g))throw console.error("removeField erroring on ",a),new Error("removeField requires an instance of Field");removeField(a.name)}},b.getField=function(a,b){var c,d=-1;h.forEach(function(b){var e=b.claim(a);e>d&&(d=e,c=b)});if(!c)throw console.error("Unknown field type ",a," in ",h),new Error("Can't find field for "+a);return b.tooltip&&d<g.TOOLTIP_DEFAULT?new i(a,b):new c(a,b)},i.prototype=Object.create(g.prototype),i.claim=function(a){return a instanceof f?g.MATCH:g.NO_MATCH},i.prototype.setConversion=function(a){this.setMessage(a.message)},i.prototype.getConversion=function(){return this.type.parse(new Argument)},b.addField(i)}),define("gcli/ui/fields/javascript",["require","exports","module","gcli/util","gcli/argument","gcli/types/javascript","gcli/ui/fields/menu","gcli/ui/fields"],function(a,b,c){function j(a,b){h.call(this,a,b),this.onInputChange=this.onInputChange.bind(this),this.arg=new e("","{ "," }"),this.element=d.createElement(this.document,"div"),this.input=d.createElement(this.document,"input"),this.input.type="text",this.input.addEventListener("keyup",this.onInputChange,!1),this.input.classList.add("gcli-field"),this.input.classList.add("gcli-field-javascript"),this.element.appendChild(this.input),this.menu=new g({document:this.document,field:!0,type:a}),this.element.appendChild(this.menu.element),this.setConversion(this.type.parse(new e(""))),this.onFieldChange=d.createEvent("JavascriptField.onFieldChange"),this.menu.onItemClick.add(this.itemClicked,this)}var d=a("gcli/util"),e=a("gcli/argument").Argument,f=a("gcli/types/javascript").JavascriptType,g=a("gcli/ui/fields/menu").Menu,h=a("gcli/ui/fields").Field,i=a("gcli/ui/fields");b.startup=function(){i.addField(j)},b.shutdown=function(){i.removeField(j)},j.prototype=Object.create(h.prototype),j.claim=function(a){return a instanceof f?h.TOOLTIP_MATCH:h.NO_MATCH},j.prototype.destroy=function(){h.prototype.destroy.call(this),this.input.removeEventListener("keyup",this.onInputChange,!1),this.menu.onItemClick.remove(this.itemClicked,this),this.menu.destroy(),delete this.element,delete this.input,delete this.menu,delete this.document,delete this.onInputChange},j.prototype.setConversion=function(a){this.arg=a.arg,this.input.value=a.arg.text;var b=0;if(this.type instanceof f){var c=a.arg.text,d=c.lastIndexOf(".");d!==-1&&(b=d)}var e=[],g=a.getPredictions();g.forEach(function(a){a.hidden||e.push({name:a.name.substring(b),complete:a.name,description:a.description||""})},this),this.menu.show(e),this.setMessage(a.message)},j.prototype.itemClicked=function(a){this.onFieldChange(a),this.setMessage(a.conversion.message)},j.prototype.onInputChange=function(a){this.item=a.currentTarget.item;var b=this.getConversion();this.onFieldChange({conversion:b}),this.setMessage(b.message)},j.prototype.getConversion=function(){return this.arg=this.arg.beget(this.input.value,{normalize:!0}),this.type.parse(this.arg)},j.DEFAULT_VALUE="__JavascriptField.DEFAULT_VALUE"}),define("gcli/ui/fields/menu",["require","exports","module","gcli/util","gcli/argument","gcli/canon","gcli/ui/domtemplate","text!gcli/ui/fields/menu.css","text!gcli/ui/fields/menu.html"],function(a,b,c){function j(a){a=a||{},this.document=a.document||document,this.type=a.type;if(!this.document)throw new Error("No document");this.element=d.createElement(this.document,"div"),this.element.classList.add(a.menuClass||"gcli-menu"),a&&a.field&&this.element.classList.add(a.menuFieldClass||"gcli-menu-field"),h!=null&&d.importCss(h,this.document,"gcli-menu"),this.template=d.toDom(this.document,i),this.templateOptions={blankNullUndefined:!0,stack:"menu.html"},this.items=null,this.onItemClick=d.createEvent("Menu.onItemClick")}function k(a,b,c){return typeof Proxy=="undefined"?a:Proxy.create({get:function(d,e){var f=a[e];if(e!=="name")return f;var g=f.indexOf(b);if(g===-1)return f;var h=f.substr(0,g),i=f.substr(g+b.length),j=c.createElement("span");j.appendChild(c.createTextNode(h));var k=c.createElement("span");return k.classList.add("gcli-menu-typed"),k.appendChild(c.createTextNode(b)),j.appendChild(k),j.appendChild(c.createTextNode(i)),j}})}var d=a("gcli/util"),e=a("gcli/argument").Argument,f=a("gcli/canon"),g=a("gcli/ui/domtemplate"),h=a("text!gcli/ui/fields/menu.css"),i=a("text!gcli/ui/fields/menu.html");j.prototype.destroy=function(){delete this.element,delete this.template,delete this.document},j.prototype.onItemClickInternal=function(a){var b=a.currentTarget.querySelector(".gcli-menu-name").innerHTML,c=new e(b);c.suffix=" ";var d=this.type.parse(c);this.onItemClick({conversion:d})},j.prototype.show=function(a,b){this.items=a.filter(function(a){return a.hidden===undefined||a.hidden!==!0}.bind(this)),b&&(this.items=this.items.map(function(a){return k(a,b,this.template.ownerDocument)}.bind(this)));if(this.items.length===0){this.element.style.display="none";return}var c=this.template.cloneNode(!0);g.template(c,this,this.templateOptions),d.clearElement(this.element),this.element.appendChild(c),this.element.style.display="block"},j.prototype.setChoiceIndex=function(a){var b=this.element.querySelectorAll(".gcli-menu-option");for(var c=0;c<b.length;c++)b[c].classList.remove("gcli-menu-highlight");if(a==null)return;if(b.length<=a){console.error("Cant highlight "+a+". Only "+b.length+" options");return}b.item(a).classList.add("gcli-menu-highlight")},j.prototype.selectChoice=function(){var a=this.element.querySelector(".gcli-menu-highlight .gcli-menu-name");if(a){var b=a.innerHTML,c=new e(b);c.suffix=" ";var d=this.type.parse(c);this.onItemClick({conversion:d})}},j.prototype.hide=function(){this.element.style.display="none"},j.prototype.setMaxHeight=function(a){this.element.style.maxHeight=a+"px"},b.Menu=j}),define("text!gcli/ui/fields/menu.css",[],"\n.gcli-menu {\n  width: 100%;\n  overflow: hidden;\n  font-size: 90%;\n}\n\n.gcli-menu-field {\n  border: 1px solid #aaa;\n  border-top: 0;\n  border-bottom-right-radius: 5px;\n  border-bottom-left-radius: 5px;\n  max-height: 300px;\n  margin: 0 3px;\n  padding: 0;\n}\n\n.gcli-menu-template {\n  border-collapse: collapse;\n  width: 100%;\n}\n\n.gcli-menu-option {\n  overflow: hidden;\n  white-space: nowrap;\n  cursor: pointer;\n}\n\n.gcli-menu-option:hover {\n  background-image: -moz-linear-gradient(top, #f8f8f8, #ccc);\n  background-color: #ddd;\n}\n\n.gcli-menu-name {\n  padding: 2px 3px;\n  -moz-padding-start: 8px;\n  -webkit-padding-start: 8px;\n}\n\n.gcli-menu-desc {\n  color: #777;\n  padding: 0 3px;\n  -moz-padding-end: 8px;\n  -webkit-padding-end: 8px;\n}\n\n.gcli-menu-error {\n  overflow: hidden;\n  white-space: nowrap;\n  padding: 8px 10px 2px;\n  font-size: 80%;\n  color: red;\n}\n\n.gcli-menu-highlight,\n.gcli-menu-highlight.gcli-menu-option:hover {\n  background-image: -moz-linear-gradient(top, #eee, #b8b8b8);\n  background-color: #c8c8c8;\n}\n\n.gcli-menu-typed {\n  color: #FF6600;\n}\n"),define("text!gcli/ui/fields/menu.html",[],'\n<table class="gcli-menu-template" aria-live="polite">\n  <tr class="gcli-menu-option" foreach="item in ${items}"\n      onclick="${onItemClickInternal}" title="${item.manual}">\n    <td class="gcli-menu-name">${item.name}</td>\n    <td class="gcli-menu-desc">${item.description}</td>\n  </tr>\n</table>\n'),define("gcli/ui/fields/selection",["require","exports","module","gcli/util","gcli/l10n","gcli/argument","gcli/types","gcli/types/basic","gcli/types/selection","gcli/ui/fields/menu","gcli/ui/fields"],function(a,b,c){function n(a,b){l.call(this,a,b),this.items=[],this.element=d.createElement(this.document,"select"),this.element.classList.add("gcli-field"),this._addOption({name:e.lookupFormat("fieldSelectionSelect",[b.name])});var c=this.type.getLookup();c.forEach(this._addOption,this),this.onInputChange=this.onInputChange.bind(this),this.element.addEventListener("change",this.onInputChange,!1),this.onFieldChange=d.createEvent("SelectionField.onFieldChange")}function o(a,b){l.call(this,a,b),this.onInputChange=this.onInputChange.bind(this),this.arg=new f,this.menu=new k({document:this.document,type:a}),this.element=this.menu.element,this.onFieldChange=d.createEvent("SelectionTooltipField.onFieldChange"),this.menu.onItemClick.add(this.itemClicked,this)}var d=a("gcli/util"),e=a("gcli/l10n"),f=a("gcli/argument").Argument,g=a("gcli/types").Status,h=a("gcli/types").Conversion,i=a("gcli/types/basic").BooleanType,j=a("gcli/types/selection").SelectionType,k=a("gcli/ui/fields/menu").Menu,l=a("gcli/ui/fields").Field,m=a("gcli/ui/fields");b.startup=function(){m.addField(n),m.addField(o)},b.shutdown=function(){m.removeField(n),m.removeField(o)},n.prototype=Object.create(l.prototype),n.claim=function(a){return a instanceof i?l.BASIC:a instanceof j?l.DEFAULT:l.NO_MATCH},n.prototype.destroy=function(){l.prototype.destroy.call(this),this.element.removeEventListener("change",this.onInputChange,!1),delete this.element,delete this.document,delete this.onInputChange},n.prototype.setConversion=function(a){var b;this.items.forEach(function(c){c.value&&c.value===a.value&&(b=c.index)},this),this.element.value=b,this.setMessage(a.message)},n.prototype.getConversion=function(){var a=this.items[this.element.value];return this.type.parse(new f(a.name," "))},n.prototype._addOption=function(a){a.index=this.items.length,this.items.push(a);var b=d.createElement(this.document,"option");b.innerHTML=a.name,b.value=a.index,this.element.appendChild(b)},o.prototype=Object.create(l.prototype),o.claim=function(a){return a.getType()instanceof j?l.TOOLTIP_MATCH:l.NO_MATCH},o.prototype.destroy=function(){l.prototype.destroy.call(this),this.menu.onItemClick.remove(this.itemClicked,this),this.menu.destroy(),delete this.element,delete this.document,delete this.onInputChange},o.prototype.setConversion=function(a){this.arg=a.arg;var b=a.getPredictions().map(function(a){return a.value.description?a.value:a},this);this.menu.show(b,a.arg.text),this.setMessage(a.message)},o.prototype.itemClicked=function(a){this.onFieldChange(a),this.setMessage(a.conversion.message)},o.prototype.onInputChange=function(a){this.item=a.currentTarget.item;var b=this.getConversion();this.onFieldChange({conversion:b}),this.setMessage(b.message)},o.prototype.getConversion=function(){return this.arg=this.arg.beget("typed",{normalize:!0}),this.type.parse(this.arg)},o.prototype.setChoiceIndex=function(a){this.menu.setChoiceIndex(a)},o.prototype.selectChoice=function(){this.menu.selectChoice()},Object.defineProperty(o.prototype,"isImportant",{get:function(){return this.type.name!=="command"},enumerable:!0}),o.DEFAULT_VALUE="__SelectionTooltipField.DEFAULT_VALUE"}),define("gcli/ui/display",["require","exports","module","gcli/util","gcli/settings","gcli/ui/intro","gcli/ui/domtemplate","gcli/ui/tooltip","gcli/ui/output_terminal","gcli/ui/inputter","gcli/ui/completer","gcli/ui/focus","gcli/ui/prompt","gcli/cli","text!gcli/ui/display.css","text!gcli/ui/display.html"],function(a,b,c){function q(a){var b=a.document||document;this.displayStyle=undefined,o!=null&&(this.displayStyle=d.importCss(o,b,"gcli-css-display")),this.requisition=new n(a.enviroment||{},b),this.focusManager=new l(a,{document:b}),this.inputElement=r(b,a.inputElement||null,"gcli-input"),this.inputter=new j(a,{requisition:this.requisition,focusManager:this.focusManager,element:this.inputElement}),this.completeElement=s(this.inputElement,a.completeElement||null,"gcli-row-complete"),this.completer=new k(a,{requisition:this.requisition,inputter:this.inputter,autoResize:this.completeElement.gcliCreated,element:this.completeElement}),this.prompt=new m(a,{inputter:this.inputter,element:s(this.inputElement,a.promptElement||null,"gcli-prompt")}),this.element=r(b,a.displayElement||null,"gcli-display"),this.element.classList.add("gcli-display"),this.template=d.toDom(b,p),this.elements={},g.template(this.template,this.elements,{stack:"display.html"}),this.element.appendChild(this.template),this.tooltip=new h(a,{requisition:this.requisition,inputter:this.inputter,focusManager:this.focusManager,element:this.elements.tooltip,panelElement:this.elements.panel}),this.inputter.tooltip=this.tooltip,this.outputElement=d.createElement(b,"div"),this.outputElement.classList.add("gcli-output"),this.outputList=new i(a,{requisition:this.requisition,element:this.outputElement}),this.element.appendChild(this.outputElement),f.maybeShowIntro(this.outputList.commandOutputManager)}function r(a,b,c){if(!b){b=a.getElementById(c);if(!b)throw new Error("Missing element, id="+c)}return b}function s(a,b,c){var e=a.ownerDocument;return b||(b=e.getElementById("gcli-row-complete"),b||(b=d.createElement(e,"div"),a.parentNode.insertBefore(b,a.nextSibling),b.gcliCreated=!0)),b}var d=a("gcli/util"),e=a("gcli/settings"),f=a("gcli/ui/intro"),g=a("gcli/ui/domtemplate"),h=a("gcli/ui/tooltip").Tooltip,i=a("gcli/ui/output_terminal").OutputTerminal,j=a("gcli/ui/inputter").Inputter,k=a("gcli/ui/completer").Completer,l=a("gcli/ui/focus").FocusManager,m=a("gcli/ui/prompt").Prompt,n=a("gcli/cli").Requisition,o=a("text!gcli/ui/display.css"),p=a("text!gcli/ui/display.html");b.createDisplay=function(a){a.settings!=null&&e.setDefaults(a.settings);var b=new q(a),c=b.requisition;return{exec:c.exec.bind(c),update:c.update.bind(c),destroy:b.destroy.bind(b)}},q.prototype.destroy=function(){delete this.element,delete this.template,this.outputList.destroy(),delete this.outputList,delete this.outputElement,this.tooltip.destroy(),delete this.tooltip,this.prompt.destroy(),delete this.prompt,this.completer.destroy(),delete this.completer,delete this.completeElement,this.inputter.destroy(),delete this.inputter,delete this.inputElement,this.focusManager.destroy(),delete this.focusManager,this.requisition.destroy(),delete this.requisition,this.displayStyle&&this.displayStyle.parentNode.removeChild(this.displayStyle),delete this.displayStyle},b.Display=q}),define("gcli/ui/tooltip",["require","exports","module","gcli/util","gcli/cli","gcli/ui/fields","gcli/ui/domtemplate","text!gcli/ui/tooltip.css","text!gcli/ui/tooltip.html"],function(a,b,c){function j(a,b){this.inputter=b.inputter,this.requisition=b.requisition,this.focusManager=b.focusManager,this.element=b.element,this.element.classList.add(a.tooltipClass||"gcli-tooltip"),this.document=this.element.ownerDocument,this.panelElement=b.panelElement,this.panelElement&&(this.panelElement.classList.add("gcli-panel-hide"),this.focusManager.onVisibilityChange.add(this.visibilityChanged,this)),this.focusManager.addMonitoredElement(this.element,"tooltip"),this.fields=[],h!=null&&(this.style=d.importCss(h,this.document,"gcli-tooltip")),this.template=d.toDom(this.document,i),this.templateOptions={blankNullUndefined:!0,stack:"tooltip.html"},this.inputter.onChoiceChange.add(this.choiceChanged,this),this.inputter.onAssignmentChange.add(this.assignmentChanged,this),this.assignment=undefined,this.assignmentChanged({assignment:this.inputter.assignment})}var d=a("gcli/util"),e=a("gcli/cli").CommandAssignment,f=a("gcli/ui/fields"),g=a("gcli/ui/domtemplate"),h=a("text!gcli/ui/tooltip.css"),i=a("text!gcli/ui/tooltip.html");j.prototype.destroy=function(){this.inputter.onAssignmentChange.remove(this.assignmentChanged,this),this.inputter.onChoiceChange.remove(this.choiceChanged,this),this.panelElement&&this.focusManager.onVisibilityChange.remove(this.visibilityChanged,this),this.focusManager.removeMonitoredElement(this.element,"tooltip"),this.style&&(this.style.parentNode.removeChild(this.style),delete this.style),this.field.onFieldChange.remove(this.fieldChanged,this),this.field.destroy(),delete this.errorEle,delete this.descriptionEle,delete this.highlightEle,delete this.document,delete this.element,delete this.panelElement,delete this.template},Object.defineProperty(j.prototype,"isMenuShowing",{get:function(){return this.focusManager.isTooltipVisible&&this.field!=null&&this.field.menu!=null},enumerable:!0}),j.prototype.assignmentChanged=function(a){if(this.assignment===a.assignment)return;this.assignment&&this.assignment.onAssignmentChange.remove(this.assignmentContentsChanged,this),this.assignment=a.assignment,this.field&&(this.field.onFieldChange.remove(this.fieldChanged,this),this.field.destroy()),this.field=f.getField(this.assignment.param.type,{document:this.document,name:this.assignment.param.name,requisition:this.requisition,required:this.assignment.param.isDataRequired,named:!this.assignment.param.isPositionalAllowed,tooltip:!0}),this.focusManager.setImportantFieldFlag(this.field.isImportant),this.field.onFieldChange.add(this.fieldChanged,this),this.assignment.onAssignmentChange.add(this.assignmentContentsChanged,this),this.field.setConversion(this.assignment.conversion),this.errorEle=undefined,this.descriptionEle=undefined,this.highlightEle=undefined;var b=this.template.cloneNode(!0);g.template(b,this,this.templateOptions),d.clearElement(this.element),this.element.appendChild(b),this.element.style.display="block",this.field.setMessageElement(this.errorEle),this._updatePosition()},j.prototype.choiceChanged=function(a){if(this.field&&this.field.setChoiceIndex){var b=this.assignment.conversion.constrainPredictionIndex(a.choice);this.field.setChoiceIndex(b)}},j.prototype.selectChoice=function(a){this.field&&this.field.selectChoice&&this.field.selectChoice()},j.prototype.fieldChanged=function(a){this.assignment.setConversion(a.conversion);var b=a.conversion.message!=null&&a.conversion.message!=="";this.focusManager.setError(b),this.document.defaultView.setTimeout(function(){this.inputter.focus()}.bind(this),10)},j.prototype.assignmentContentsChanged=function(a){if(a.conversion.arg.text===a.oldConversion.arg.text)return;this.field.setConversion(a.conversion),d.setContents(this.descriptionEle,this.description),this._updatePosition()},j.prototype._updatePosition=function(){var a=this.getDimensionsOfAssignment();this.panelElement&&(this.panelElement.style.left=a.start*10+"px"),this.focusManager.updatePosition(a)},j.prototype.getDimensionsOfAssignment=function(){var a="",b=this.requisition.getAssignments(!0);for(var c=0;c<b.length;c++){if(b[c]===this.assignment)break;a+=b[c].toString()}a+=this.assignment.arg.prefix;var d=a.length;a+=this.assignment.arg.text;var e=a.length;return{start:d,end:e}},Object.defineProperty(j.prototype,"description",{get:function(){if(this.assignment instanceof e&&this.assignment.value==null)return"";var a=this.assignment.param.manual;if(a){var b=this.document.createElement("span");d.setContents(b,a);if(!this.assignment.param.isDataRequired){var c=this.document.createElement("span");c.appendChild(this.document.createTextNode(" (Optional)")),b.appendChild(c)}return b}return this.assignment.param.description},enumerable:!0}),j.prototype.visibilityChanged=function(a){if(!this.panelElement)return;a.tooltipVisible?this.panelElement.classList.remove("gcli-panel-hide"):this.panelElement.classList.add("gcli-panel-hide")},b.Tooltip=j}),define("text!gcli/ui/tooltip.css",[],"\n.gcli-panel {\n  -moz-transition-property: opacity, height;\n  -moz-transition-duration: 0.5s, 2s;\n  overflow-y: auto;\n  overflow-x: hidden;\n  z-index: 2;\n  position: absolute;\n  max-height: 100%;\n  max-width: 350px;\n  left: 0;\n  bottom: 0;\n  font-family: Segoe UI, Helvetica Neue, Verdana, Arial, sans-serif;\n  margin-bottom: -3px;\n}\n\n.gcli-panel.gcli-panel-hide {\n  opacity: 0;\n  height: 0;\n}\n\n.gcli-panel-connector {\n  height: 10px;\n  margin-top: -1px;\n  margin-left: 20px;\n  width: 20px;\n  background: white;\n  border-left: 1px solid #999;\n  border-right: 1px solid #999;\n}\n\n.gcli-tt-description {\n  padding: 5px 10px 0;\n  font-size: 90%;\n}\n\n.gcli-tt-error {\n  font-size: 80%;\n  color: #900;\n  padding: 0 10px;\n}\n\n.gcli-field {\n  width: 100%;\n}\n\n.gcli-field-javascript {\n  margin-bottom: 0;\n}\n\n.gcli-tt {\n  box-shadow: 0 0 10px 1px #ddd;\n  border: 1px solid #999;\n  border-radius: 3px;\n  margin: 10px 10px 0;\n  background: hsla(0, 100%, 100%, 0.95);\n  padding-bottom: 5px;\n}\n"),define("text!gcli/ui/tooltip.html",[],'\n<div class="gcli-tt" aria-live="polite">\n  <div class="gcli-tt-description" save="${descriptionEle}">${description}</div>\n  ${field.element}\n  <div class="gcli-tt-error" save="${errorEle}">${assignment.conversion.message}</div>\n  <div class="gcli-tt-highlight" save="${highlightEle}"></div>\n</div>\n'),define("gcli/ui/output_terminal",["require","exports","module","gcli/util","gcli/canon","gcli/ui/domtemplate","text!gcli/ui/output_view.css","text!gcli/ui/output_terminal.html"],function(a,b,c){function i(a,b){this.element=b.element,this.requisition=b.requisition,this.commandOutputManager=a.commandOutputManager||e.commandOutputManager,this.commandOutputManager.onOutput.add(this.outputted,this);var c=b.element.ownerDocument;g!=null&&(this.style=d.importCss(g,c,"gcli-output-view")),this.template=d.toDom(c,h),this.templateOptions={allowEval:!0,stack:"output_terminal.html"}}function j(a,b){this.outputData=a,this.outputTerminal=b,this.url=d.createUrlLookup(c),this.elems={rowin:null,rowout:null,hide:null,show:null,duration:null,throb:null,prompt:null};var e=this.outputTerminal.template.cloneNode(!0);f.template(e,this,this.outputTerminal.templateOptions),this.outputTerminal.element.appendChild(this.elems.rowin),this.outputTerminal.element.appendChild(this.elems.rowout),this.outputData.onClose.add(this.closed,this),this.outputData.onChange.add(this.changed,this)}var d=a("gcli/util"),e=a("gcli/canon"),f=a("gcli/ui/domtemplate"),g=a("text!gcli/ui/output_view.css"),h=a("text!gcli/ui/output_terminal.html");i.prototype.destroy=function(){this.style&&(this.style.parentNode.removeChild(this.style),delete this.style),this.commandOutputManager.onOutput.remove(this.outputted,this),delete this.commandOutputManager,delete this.requisition,delete this.element,delete this.template},i.prototype.outputted=function(a){if(a.output.hidden)return;a.output.view=new j(a.output,this)},i.prototype.setHeight=function(a){this.element.style.height=a+"px"},b.OutputTerminal=i,j.prototype.destroy=function(){this.outputData.onChange.remove(this.changed,this),this.outputData.onClose.remove(this.closed,this),this.outputTerminal.element.removeChild(this.elems.rowin),this.outputTerminal.element.removeChild(this.elems.rowout),delete this.outputData,delete this.outputTerminal,delete this.url,delete this.elems},Object.defineProperty(j.prototype,"prompt",{get:function(){return this.outputData.canonical?"»":""},enumerable:!0}),j.prototype.copyToInput=function(){this.outputTerminal.requisition&&this.outputTerminal.requisition.update(this.outputData.typed)},j.prototype.execute=function(a){this.outputTerminal.requisition&&this.outputTerminal.requisition.exec({typed:this.outputData.typed})},j.prototype.hideOutput=function(a){this.elems.rowout.style.display="none",this.elems.hide.classList.add("cmd_hidden"),this.elems.show.classList.remove("cmd_hidden"),a.stopPropagation()},j.prototype.showOutput=function(a){this.elems.rowout.style.display="block",this.elems.hide.classList.remove("cmd_hidden"),this.elems.show.classList.add("cmd_hidden"),a.stopPropagation()},j.prototype.closed=function(a){this.destroy()},j.prototype.changed=function(a){var b=this.elems.rowout.ownerDocument,c=this.outputData.duration!=null?"completed in "+this.outputData.duration/1e3+" sec ":"";c=b.createTextNode(c),this.elems.duration.appendChild(c),this.outputData.completed&&this.elems.prompt.classList.add("gcli-row-complete"),this.outputData.error&&this.elems.prompt.classList.add("gcli-row-error"),this.outputData.toDom(this.elems.rowout);var d=Math.max(this.outputTerminal.element.scrollHeight,this.outputTerminal.element.clientHeight);this.outputTerminal.element.scrollTop=d-this.outputTerminal.element.clientHeight,this.elems.throb.style.display=this.outputData.completed?"none":"block"},b.OutputView=j}),define("text!gcli/ui/output_view.css",[],"\n.gcli-row-in-typed,\n.gcli-row-prompt,\n.gcli-row-terminal,\n.gcli-row-subterminal,\n.gcli-out-shortcut {\n  font-family: Consolas, Inconsolata, \"Courier New\", monospace;\n}\n\n.gcli-row-in {\n  margin: 10px 5px 0px;\n  padding: 3px 4px 1px;\n}\n\n.gcli-row-in > img {\n  cursor: pointer;\n}\n\n.gcli-row-hover {\n  display: none;\n  float: right;\n  padding: 2px 2px 0;\n}\n\n.gcli-row-in:hover > .gcli-row-hover {\n  display: inline;\n}\n\n.gcli-row-in:hover > .gcli-row-hover.gcli-row-hidden {\n  display: none;\n}\n\n.gcli-row-duration {\n  color: #666;\n}\n\n.gcli-row-prompt {\n  color: #00F;\n  font-weight: bold;\n  font-size: 120%;\n}\n\n.gcli-row-prompt.gcli-row-complete {\n  color: #060;\n}\n\n.gcli-row-prompt.gcli-row-error {\n  color: #F00;\n}\n\n.gcli-row-duration {\n  font-size: 80%;\n}\n\n.gcli-row-out {\n  margin: 0 8px 0px 40px;\n  padding: 1px 10px;\n  line-height: 1.2em;\n  font-size: 95%;\n}\n\n.gcli-row-out strong,\n.gcli-row-out b,\n.gcli-row-out th,\n.gcli-row-out h1,\n.gcli-row-out h2,\n.gcli-row-out h3 {\n  color: #000;\n}\n\n.gcli-row-out p {\n  margin: 5px 0;\n}\n\n.gcli-row-out a {\n  color: hsl(200,40%,40%);\n  text-decoration: none;\n}\n\n.gcli-row-out a:hover {\n  cursor: pointer;\n  border-bottom: 1px dotted hsl(200,40%,60%);\n}\n\n.gcli-row-out input[type=password],\n.gcli-row-out input[type=text],\n.gcli-row-out textarea {\n  font-size: 120%;\n  background: transparent;\n  padding: 3px;\n  border-radius: 3px;\n  border: 1px solid #bbb;\n}\n\n.gcli-row-out table,\n.gcli-row-out td,\n.gcli-row-out th {\n  border: 0;\n  padding: 0 2px;\n}\n\n.gcli-row-terminal,\n.gcli-row-subterminal {\n  border-radius: 3px;\n  border: 1px solid #ddd;\n}\n\n.gcli-row-terminal {\n  height: 200px;\n  width: 620px;\n  font-size: 80%;\n}\n\n.gcli-row-subterminal {\n  height: 150px;\n  width: 300px;\n  font-size: 75%;\n}\n\n.gcli-out-shortcut {\n  border: 1px solid #999;\n  border-radius: 3px;\n  padding: 1px 4px 0;\n  margin: 0 4px;\n  font-size: 80%;\n  color: #666;\n  cursor: pointer;\n  vertical-align: bottom;\n  white-space: pre;\n}\n\n.gcli-out-shortcut:before {\n  color: hsl(25,78%,50%);\n  font-weight: bold;\n  content: '\\bb ';\n  padding-right: 2px;\n}\n"),define("text!gcli/ui/output_terminal.html",[],'\n<div class="gcli-row">\n  <!-- The div for the input (i.e. what was typed) -->\n  <div class="gcli-row-in" save="${elems.rowin}" aria-live="assertive"\n      onclick="${copyToInput}" ondblclick="${execute}">\n\n    <!-- What the user actually typed -->\n    <span save="${elems.prompt}" class="gcli-row-prompt ${elems.error ? \'gcli-row-error\' : \'\'} ${elems.completed ? \'gcli-row-complete\' : \'\'}">${prompt}</span>\n    <span class="gcli-row-in-typed">${outputData.canonical}</span>\n\n    <!-- The extra details that appear on hover -->\n    <span class="gcli-row-duration gcli-row-hover" save="${elems.duration}"></span>\n    <!--\n    <img class="gcli-row-hover" onclick="${hideOutput}" save="${elems.hide}"\n        alt="Hide command output" _src="${url(\'images/minus.png\')}"/>\n    <img class="gcli-row-hover gcli-row-hidden" onclick="${showOutput}" save="${elems.show}"\n        alt="Show command output" _src="${url(\'images/plus.png\')}"/>\n    <img class="gcli-row-hover" onclick="${remove}"\n        alt="Remove this command from the history"\n        _src="${url(\'images/closer.png\')}"/>\n    -->\n    <img style="float:right;" _src="${url(\'images/throbber.gif\')}" save="${elems.throb}"/>\n  </div>\n\n  <!-- The div for the command output -->\n  <div class="gcli-row-out" aria-live="assertive" save="${elems.rowout}">\n  </div>\n</div>\n'),define("gcli/ui/inputter",["require","exports","module","gcli/util","gcli/types","gcli/history","text!gcli/ui/inputter.css"],function(a,b,c){function i(a,b){this.requisition=b.requisition,this.focusManager=b.focusManager,this.element=b.element,this.element.classList.add("gcli-in-input"),this.element.spellcheck=!1,this.document=this.element.ownerDocument,this.scratchpad=a.scratchpad,h!=null&&(this.style=d.importCss(h,this.document,"gcli-inputter")),this.lastTabDownAt=0,this._caretChange=null,this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.element.addEventListener("keydown",this.onKeyDown,!1),this.element.addEventListener("keyup",this.onKeyUp,!1),this.history=new g,this._scrollingThroughHistory=!1,this._choice=null,this.onChoiceChange=d.createEvent("Inputter.onChoiceChange"),this.onMouseUp=this.onMouseUp.bind(this),this.element.addEventListener("mouseup",this.onMouseUp,!1),this.focusManager&&this.focusManager.addMonitoredElement(this.element,"input"),this.requisition.onTextChange.add(this.textChanged,this),this.assignment=this.requisition.getAssignmentAt(0),this.onAssignmentChange=d.createEvent("Inputter.onAssignmentChange"),this.onInputChange=d.createEvent("Inputter.onInputChange"),this.onResize=d.createEvent("Inputter.onResize"),this.onWindowResize=this.onWindowResize.bind(this),this.document.defaultView.addEventListener("resize",this.onWindowResize,!1),this.requisition.update(this.element.value||"")}var d=a("gcli/util"),e=a("gcli/util").KeyEvent,f=a("gcli/types").Status,g=a("gcli/history").History,h=a("text!gcli/ui/inputter.css");i.prototype.destroy=function(){this.document.defaultView.removeEventListener("resize",this.onWindowResize,!1),this.requisition.onTextChange.remove(this.textChanged,this),this.focusManager&&this.focusManager.removeMonitoredElement(this.element,"input"),this.element.removeEventListener("mouseup",this.onMouseUp,!1),this.element.removeEventListener("keydown",this.onKeyDown,!1),this.element.removeEventListener("keyup",this.onKeyUp,!1),this.history.destroy(),this.style&&(this.style.parentNode.removeChild(this.style),delete this.style),delete this.onMouseUp,delete this.onKeyDown,delete this.onKeyUp,delete this.onWindowResize,delete this.tooltip,delete this.document,delete this.element},i.prototype.onWindowResize=function(){if(!this.element)return;var a=this.getDimensions();a&&this.onResize(a)},i.prototype.getDimensions=function(){if(!this.element.getBoundingClientRect)return undefined;var a=this.element.getBoundingClientRect();return{top:a.top+1,height:a.bottom-a.top-1,left:a.left+2,width:a.right-a.left}},i.prototype.onMouseUp=function(a){this._checkAssignment()},i.prototype.textChanged=function(){if(!this.document)return;this._caretChange==null&&(this._caretChange=j.TO_ARG_END);var a=this.requisition.toString(),b=this.getInputState();b.typed=a,this._processCaretChange(b),this.element.value=a,this.onInputChange({inputState:b})};var j={NO_CHANGE:0,SELECT_ALL:1,TO_END:2,TO_ARG_END:3};i.prototype._processCaretChange=function(a){var b,c;switch(this._caretChange){case j.SELECT_ALL:b=0,c=a.typed.length;break;case j.TO_END:b=a.typed.length,c=a.typed.length;break;case j.TO_ARG_END:b=a.cursor.start;do b++;while(b<a.typed.length&&a.typed[b-1]!==" ");c=b;break;default:b=a.cursor.start,c=a.cursor.end}b=b>a.typed.length?a.typed.length:b,c=c>a.typed.length?a.typed.length:c;var d={typed:a.typed,cursor:{start:b,end:c}};return this.element.selectionStart=b,this.element.selectionEnd=c,this._checkAssignment(b),this._caretChange=null,d},i.prototype._checkAssignment=function(a){a==null&&(a=this.element.selectionStart);var b=this.requisition.getAssignmentAt(a);this.assignment!==b&&(this.assignment=b,this.onAssignmentChange({assignment:this.assignment}));if(this.focusManager){var c=this.assignment.conversion.message;this.focusManager.setError(c!=null&&c!=="")}},i.prototype.setInput=function(a){this.requisition.update(a)},i.prototype.setCursor=function(a){this._caretChange=j.NO_CHANGE,this._processCaretChange({typed:this.element.value,cursor:a})},i.prototype.focus=function(){this.element.focus(),this._checkAssignment()},i.prototype.onKeyDown=function(a){if(a.keyCode===e.DOM_VK_UP||a.keyCode===e.DOM_VK_DOWN){a.preventDefault();return}if(a.keyCode===e.DOM_VK_F1||a.keyCode===e.DOM_VK_ESCAPE||a.keyCode===e.DOM_VK_UP||a.keyCode===e.DOM_VK_DOWN)return;this.focusManager&&this.focusManager.onInputChange(a);if(a.keyCode===e.DOM_VK_TAB){this.lastTabDownAt=0,a.shiftKey||(a.preventDefault(),this.lastTabDownAt=a.timeStamp);if(a.metaKey||a.altKey||a.crtlKey)this.document.commandDispatcher?this.document.commandDispatcher.advanceFocus():this.element.blur()}},i.prototype.onKeyUp=function(a){if(this.focusManager&&a.keyCode===e.DOM_VK_F1){this.focusManager.helpRequest();return}if(this.focusManager&&a.keyCode===e.DOM_VK_ESCAPE){this.focusManager.removeHelp();return}if(a.keyCode===e.DOM_VK_UP){this.tooltip&&this.tooltip.isMenuShowing?this.changeChoice(-1):this.element.value===""||this._scrollingThroughHistory?(this._scrollingThroughHistory=!0,this.requisition.update(this.history.backward())):this.assignment.getStatus()===f.VALID?(this.assignment.increment(),this.focusManager&&this.focusManager.onInputChange(a)):this.changeChoice(-1);return}if(a.keyCode===e.DOM_VK_DOWN){this.tooltip&&this.tooltip.isMenuShowing?this.changeChoice(1):this.element.value===""||this._scrollingThroughHistory?(this._scrollingThroughHistory=!0,this.requisition.update(this.history.forward())):this.assignment.getStatus()===f.VALID?(this.assignment.decrement(),this.focusManager&&this.focusManager.onInputChange(a)):this.changeChoice(1);return}if(a.keyCode===e.DOM_VK_RETURN){var b=this.requisition.getStatus();b===f.VALID?(this._scrollingThroughHistory=!1,this.history.add(this.element.value),this.requisition.exec()):this.tooltip.selectChoice(),this._choice=null;return}if(a.keyCode===e.DOM_VK_TAB&&!a.shiftKey){if(this.lastTabDownAt+1e3>a.timeStamp){this._caretChange=j.TO_ARG_END;var c=this.getInputState();this._processCaretChange(c),this._choice==null&&(this._choice=0),this.requisition.complete(c.cursor,this._choice)}this.lastTabDownAt=0,this._scrollingThroughHistory=!1,this._choice=null,this.onChoiceChange({choice:this._choice});return}if(this.scratchpad&&this.scratchpad.shouldActivate(a)){this.scratchpad.activate(this.element.value)&&this.requisition.update("");return}this._scrollingThroughHistory=!1,this._caretChange=j.NO_CHANGE,this.requisition.update(this.element.value),this._choice=null,this.onChoiceChange({choice:this._choice})},i.prototype.changeChoice=function(a){this._choice==null&&(this._choice=0),this._choice+=a,this.onChoiceChange({choice:this._choice})},i.prototype.getCurrentAssignment=function(){var a=this.element.selectionStart;return this.requisition.getAssignmentAt(a)},i.prototype.getInputState=function(){var a={typed:this.element.value,cursor:{start:this.element.selectionStart,end:this.element.selectionEnd}};return a.typed==null&&(a={typed:"",cursor:{start:0,end:0}},console.log('fixing input.typed=""',a)),a.cursor.start==null&&(a.cursor.start=0),a},b.Inputter=i}),define("gcli/history",["require","exports","module"],function(a,b,c){function d(){this._buffer=[""],this._current=0}d.prototype.destroy=function(){delete this._buffer},d.prototype.add=function(a){this._buffer.splice(1,0,a),this._current=0},d.prototype.forward=function(){return this._current>0&&this._current--,this._buffer[this._current]},d.prototype.backward=function(){return this._current<this._buffer.length-1&&this._current++,this._buffer[this._current]},b.History=d}),define("text!gcli/ui/inputter.css",[],'\n.gcli-in-input,\n.gcli-in-complete,\n.gcli-prompt {\n  font-family: Consolas, Inconsolata, "Courier New", monospace;\n}\n\n.gcli-in-input,\n.gcli-in-complete {\n  font-size: 110%;\n  font-weight: normal;\n  font-style: normal;\n  padding: 0 0 0 22px;\n  background-color: transparent;\n}\n\n.gcli-in-input {\n  color: #000;\n  border: 0;\n  box-shadow: 0 0 10px 1px #ddd;\n  border-top: 1px solid #999;\n}\n\n.gcli-in-complete {\n  position: absolute;\n  z-index: -1000;\n  color: transparent;\n  margin-top: -1px;\n  border-top: 1px solid transparent;\n}\n\n.gcli-prompt {\n  position: absolute;\n  z-index: -1001;\n  padding: 0 1px;\n  color: hsl(25,78%,50%);\n  font-size: 150%;\n  font-weight: bold;\n}\n\n.gcli-in-incomplete {\n  border-bottom: 2px dotted #999;\n}\n\n.gcli-in-error {\n  border-bottom: 2px dotted #F00;\n}\n\n.gcli-in-ontab {\n  color: hsl(200,40%,70%);\n}\n\n.gcli-in-todo {\n  color: hsl(48,28%,76%);\n}\n\n.gcli-in-closebrace {\n  color: hsl(0,0%,80%);\n}\n\n.gcli-in-scratchlink {\n  float: right;\n  font-size: 85%;\n  color: #888;\n  padding-right: 10px;\n}\n'),define("gcli/ui/completer",["require","exports","module","gcli/util","gcli/ui/domtemplate","text!gcli/ui/completer.html"],function(a,b,c){function g(a,b){this.requisition=b.requisition,this.scratchpad=a.scratchpad,this.input={typed:"",cursor:{start:0,end:0}},this.choice=0,this.element=b.element,this.element.classList.add("gcli-in-complete"),this.element.setAttribute("tabindex","-1"),this.element.setAttribute("aria-live","polite"),this.document=this.element.ownerDocument,this.inputter=b.inputter,this.inputter.onInputChange.add(this.update,this),this.inputter.onAssignmentChange.add(this.update,this),this.inputter.onChoiceChange.add(this.update,this);if(b.autoResize){this.inputter.onResize.add(this.resized,this);var c=this.inputter.getDimensions();c&&this.resized(c)}this.template=d.toDom(this.document,f),d.removeWhitespace(this.template,!0),this.update()}function h(a,b){return a=a.replace(/^\s*/,""),b.indexOf(a)===0}var d=a("gcli/util"),e=a("gcli/ui/domtemplate"),f=a("text!gcli/ui/completer.html");g.prototype.destroy=function(){this.inputter.onInputChange.remove(this.update,this),this.inputter.onAssignmentChange.remove(this.update,this),this.inputter.onChoiceChange.remove(this.update,this),this.inputter.onResize.remove(this.resized,this),delete this.document,delete this.element,delete this.template,delete this.inputter},g.prototype.resized=function(a){this.element.style.top=a.top+"px",this.element.style.height=a.height+"px",this.element.style.lineHeight=a.height+"px",this.element.style.left=a.left+"px",this.element.style.width=a.width+"px"},g.prototype.update=function(a){a&&a.choice!=null&&(this.choice=a.choice),this._preTemplateUpdate();var b=this.template.cloneNode(!0);e.template(b,this,{stack:"completer.html"}),d.clearElement(this.element);while(b.hasChildNodes())this.element.appendChild(b.firstChild)},g.prototype._preTemplateUpdate=function(){this.input=this.inputter.getInputState(),this.directTabText="",this.arrowTabText="";if(this.input.typed.trim().length===0)return;var a=this.inputter.assignment,b=a.conversion.getPredictionAt(this.choice);if(!b)return;var c=b.name,d=a.arg.text;if(d===c)return;if(h(d,c)&&this.input.cursor.start===this.input.typed.length){var e=d.match(/^(\s*)/)[0].length;this.directTabText=c.slice(d.length-e)}else this.arrowTabText="  ⇥ "+c},Object.defineProperty(g.prototype,"statusMarkup",{get:function(){var a=this.requisition.getInputStatusMarkup(this.input.cursor.start);return a.forEach(function(a){a.string=a.string.replace(/ /g," "),a.className="gcli-in-"+a.status.toString().toLowerCase()},this),a},enumerable:!0}),Object.defineProperty(g.prototype,"scratchLink",{get:function(){if(!this.scratchpad)return null;var a=this.requisition.commandAssignment.value;return a&&a.name==="{"?this.scratchpad.linkText:null},enumerable:!0}),Object.defineProperty(g.prototype,"unclosedJs",{get:function(){var a=this.requisition.commandAssignment.value,b=a&&a.name==="{",c=b&&this.requisition.getAssignment(0).arg.suffix.indexOf("}")===-1;return c},enumerable:!0}),Object.defineProperty(g.prototype,"emptyParameters",{get:function(){var a=this.requisition.typedEndsWithWhitespace(),b=this.directTabText,c=!0,d=[];return this.requisition.getAssignments().forEach(function(e){if(!e.param.isPositionalAllowed)return;if(!e.arg.isBlank()){b!==""&&(c=!1);return}if(b!==""&&c){c=!1;return}var f=e.param.isDataRequired?"<"+e.param.name+">":"["+e.param.name+"]";if(!a||!c)f=" "+f;c=!1,d.push(f)}.bind(this)),d},enumerable:!0}),b.Completer=g}),define("text!gcli/ui/completer.html",[],'\n<div>\n  <loop foreach="member in ${statusMarkup}">\n    <span class="${member.className}">${member.string}</span>\n  </loop>\n  <span class="gcli-in-ontab">${directTabText}</span>\n  <span class="gcli-in-todo" foreach="param in ${emptyParameters}">${param}</span>\n  <span class="gcli-in-ontab">${arrowTabText}</span>\n  <span class="gcli-in-closebrace" if="${unclosedJs}">}</span>\n  <div class="gcli-in-scratchlink" if="${scratchLink}">${scratchLink}</div>\n</div>\n'),define("gcli/ui/prompt",["require","exports","module"],function(a,b,c){function d(a,b){this.element=b.element,this.element.classList.add("gcli-prompt");var c=a.promptChar||"»",d=this.element.ownerDocument.createTextNode(c);this.element.appendChild(d),this.inputter=b.inputter;if(this.inputter){this.inputter.onResize.add(this.resized,this);var e=this.inputter.getDimensions();e&&this.resized(e)}}d.prototype.destroy=function(){this.inputter&&this.inputter.onResize.remove(this.resized,this),delete this.element},d.prototype.resized=function(a){this.element.style.top=a.top+"px",this.element.style.height=a.height+"px",this.element.style.lineHeight=a.height+"px",this.element.style.left=a.left+"px",this.element.style.width=a.width+"px"},b.Prompt=d}),define("text!gcli/ui/display.css",[],"\n.gcli-output {\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  font-family: Segoe UI, Helvetica Neue, Verdana, Arial, sans-serif;\n}\n"),define("text!gcli/ui/display.html",[],'\n<div class="gcli-panel" save="${panel}">\n  <div save="${tooltip}"></div>\n  <div class="gcli-panel-connector"></div>\n</div>\n'),define("demo/index",["require","exports","module","gcli/index","gcli/commands/help","gcli/commands/pref","gcli/commands/intro","test/commands/test","demo/commands/basic","demo/commands/bugs","demo/commands/demo"],function(a,b,c){a("gcli/index"),a("gcli/commands/help").startup(),a("gcli/commands/pref").startup(),a("gcli/commands/intro").startup(),a("test/commands/test").startup(),a("demo/commands/basic").startup(),a("demo/commands/bugs").startup(),a("demo/commands/demo").startup()}),define("gcli/commands/help",["require","exports","module","gcli/canon","gcli/l10n","gcli/ui/view","text!gcli/commands/help_man.html","text!gcli/commands/help_list.html","text!gcli/commands/help.css"],function(a,b,c){function i(a,b){var c=a.querySelector(".gcli-help-command").textContent;b.update(c)}function j(a,b){b.exec({visible:!0,typed:a.querySelector(".gcli-help-command").textContent})}function k(a,b){return{l10n:f.propertyLookup,includeIntro:a.search==null,onclick:function(a){i(a.currentTarget,b)},ondblclick:function(a){j(a.currentTarget,b)},getHeading:function(){return a.search==null?"Available Commands:":"Commands starting with '"+a.search+"':"},getMatchingCommands:function(){var b=e.getCommands().filter(function(b){return b.hidden?!1:a.search&&b.name.indexOf(a.search)!==0?!1:!a.search&&b.name.indexOf(" ")!=-1?!1:!0});return b.sort(),b}}}function l(a,b){var c={l10n:f.propertyLookup,command:a,onclick:function(a){i(a.currentTarget,b)},ondblclick:function(a){j(a.currentTarget,b)},getTypeDescription:function(a){var b="";return a.defaultValue===undefined?b="required":a.defaultValue===null?b="optional":b=a.defaultValue,"("+a.type.name+", "+b+")"}};return Object.defineProperty(c,"subcommands",{get:function(){var b=e.getCommands().filter(function(b){return b.name.indexOf(a.name)===0&&b.name!==a.name});return b.sort(),b},enumerable:!0}),c}var d=b,e=a("gcli/canon"),f=a("gcli/l10n"),g=a("gcli/ui/view");b.helpManHtml=a("text!gcli/commands/help_man.html"),b.helpListHtml=a("text!gcli/commands/help_list.html"),b.helpCss=a("text!gcli/commands/help.css");var h={name:"help",description:f.lookup("helpDesc"),manual:f.lookup("helpManual"),params:[{name:"search",type:"string",description:f.lookup("helpSearchDesc"),manual:f.lookup("helpSearchManual2"),defaultValue:null}],returnType:"html",exec:function(a,c){var d=e.getCommand(a.search||undefined);return d?g.createView({html:b.helpManHtml,options:{allowEval:!0,stack:"help_man.html"},data:l(d,c),css:b.helpCss,cssId:"gcli-help"}):g.createView({html:b.helpListHtml,options:{allowEval:!0,stack:"help_list.html"},data:k(a,c),css:b.helpCss,cssId:"gcli-help"})}};d.startup=function(){e.addCommand(h)},d.shutdown=function(){e.removeCommand(h)}}),define("text!gcli/commands/help_man.html",[],'\n<div>\n  <h3>${command.name}</h3>\n\n  <h4 class="gcli-help-header">\n    ${l10n.helpManSynopsis}:\n    <span class="gcli-help-synopsis" onclick="${onclick}">\n      <span class="gcli-help-command">${command.name}</span>\n      <span foreach="param in ${command.params}">\n        ${param.defaultValue !== undefined ? \'[\' + param.name + \']\' : param.name}\n      </span>\n    </span>\n  </h4>\n\n  <h4 class="gcli-help-header">${l10n.helpManDescription}:</h4>\n\n  <p class="gcli-help-description">\n    ${command.manual || command.description}\n  </p>\n\n  <div if="${command.exec}">\n    <h4 class="gcli-help-header">${l10n.helpManParameters}:</h4>\n\n    <ul class="gcli-help-parameter">\n      <li if="${command.params.length === 0}">${l10n.helpManNone}</li>\n      <li foreach="param in ${command.params}">\n        <tt>${param.name}</tt> ${getTypeDescription(param)}\n        <br/>\n        ${param.manual || param.description}\n      </li>\n    </ul>\n  </div>\n\n  <div if="${!command.exec}">\n    <h4 class="gcli-help-header">${l10n.subCommands}:</h4>\n\n    <ul class="gcli-help-${subcommands}">\n      <li if="${subcommands.length === 0}">${l10n.subcommandsNone}</li>\n      <li foreach="subcommand in ${subcommands}">\n        <strong>${subcommand.name}</strong>:\n        ${subcommand.description}\n        <span class="gcli-help-synopsis" onclick="${onclick}" ondblclick="${ondblclick}">\n          <span class="gcli-help-command">help ${subcommand.name}</span>\n        </span>\n      </li>\n    </ul>\n  </div>\n\n</div>\n'),define("text!gcli/commands/help_list.html",[],'\n<div>\n  <div if="${includeIntro}">\n    <h2>Welcome to GCLI</h2>\n    <p>GCLI is an experiment to create a highly usable JavaScript command line for developers.</p>\n    <p>\n      Useful links:\n      <a target=\'_blank\' href=\'https://github.com/joewalker/gcli\'>Source</a> (BSD),\n      <a target=\'_blank\' href=\'https://github.com/joewalker/gcli/blob/master/docs/index.md\'>Documentation</a> (for users/embedders),\n      <a target=\'_blank\' href=\'https://wiki.mozilla.org/DevTools/Features/GCLI\'>Mozilla feature page</a> (for GCLI in the web console).\n    </p>\n  </div>\n\n  <h3>${getHeading()}</h3>\n\n  <table>\n    <tr foreach="command in ${getMatchingCommands()}"\n        onclick="${onclick}" ondblclick="${ondblclick}">\n      <th class="gcli-help-name">${command.name}</th>\n      <td class="gcli-help-arrow">&#x2192;</td>\n      <td>\n        ${command.description}\n        <span class="gcli-out-shortcut gcli-help-command">help ${command.name}</span>\n      </td>\n    </tr>\n  </table>\n</div>\n'),define("text!gcli/commands/help.css",[],"\n.gcli-help-name {\n  text-align: end;\n}\n\n.gcli-help-arrow {\n  font-size: 70%;\n  color: #AAA;\n}\n\n.gcli-help-synopsis {\n  font-family: monospace;\n  font-weight: normal;\n  padding: 0 3px;\n  margin: 0 10px;\n  border: 1px solid #999;\n  border-radius: 3px;\n  color: #666;\n  cursor: pointer;\n  display: inline-block;\n}\n\n.gcli-help-synopsis:before {\n  color: #66F;\n  content: '\\bb';\n}\n\n.gcli-help-description {\n  margin: 0 20px;\n  padding: 0;\n}\n\n.gcli-help-parameter {\n  margin: 0 30px;\n  padding: 0;\n}\n\n.gcli-help-header {\n  margin: 10px 0 6px;\n}\n"),define("gcli/commands/pref",["require","exports","module","gcli/index","gcli/l10n","gcli/util","gcli/settings","gcli/promise","text!gcli/commands/pref_list_outer.html","text!gcli/commands/pref_list.css","text!gcli/commands/pref_set_check.html","text!gcli/commands/pref_list_inner.html"],function(a,b,c){function n(a,b){this.search=a.search,this.context=b,this.url=f.createUrlLookup(c),this.edit=this.url("pref_list_edit.png")}var d=a("gcli/index"),e=a("gcli/l10n"),f=a("gcli/util"),g=a("gcli/settings"),h=a("gcli/promise").Promise,i={name:"allowSet",type:"boolean",description:e.lookup("allowSetDesc"),defaultValue:!1};b.allowSet=undefined;var j={name:"pref",description:e.lookup("prefDesc"),manual:e.lookup("prefManual")},k={name:"pref list",description:e.lookup("prefListDesc"),manual:e.lookup("prefListManual"),params:[{name:"search",type:"string",defaultValue:null,description:e.lookup("prefListSearchDesc"),manual:e.lookup("prefListSearchManual")}],exec:function(c,d){return d.createView({html:a("text!gcli/commands/pref_list_outer.html"),data:new n(c,d),options:{blankNullUndefined:!0,allowEval:!0,stack:"pref_list_outer.html"},css:a("text!gcli/commands/pref_list.css"),cssId:"gcli-pref-list"})}},l={name:"pref set",description:e.lookup("prefSetDesc"),manual:e.lookup("prefSetManual"),params:[{name:"setting",type:"setting",description:e.lookup("prefSetSettingDesc"),manual:e.lookup("prefSetSettingManual")},{name:"value",type:"settingValue",description:e.lookup("prefSetValueDesc"),manual:e.lookup("prefSetValueManual")}],exec:function(d,f){return!b.allowSet.value&&d.setting.name!==b.allowSet.name?f.createView({html:a("text!gcli/commands/pref_set_check.html"),options:{allowEval:!0,stack:"pref_set_check.html"},data:{l10n:e.propertyLookup,activate:function(){f.exec("pref set allowSet true")}}}):(d.setting.value=d.value,null)}},m={name:"pref reset",description:e.lookup("prefResetDesc"),manual:e.lookup("prefResetManual"),params:[{name:"setting",type:"setting",description:e.lookup("prefResetSettingDesc"),manual:e.lookup("prefResetSettingManual")}],exec:function(b,c){return b.setting.setDefault(),null}};b.startup=function(){b.allowSet=g.addSetting(i),d.addCommand(j),d.addCommand(k),d.addCommand(l),d.addCommand(m)},b.shutdown=function(){d.removeCommand(j),d.removeCommand(k),d.removeCommand(l),d.removeCommand(m),g.removeSetting(i),b.allowSet=undefined},n.prototype.onLoad=function(a){var b=a.querySelector(".gcli-pref-list-table");return this.updateTable(b),""},n.prototype.l10n=e.propertyLookup,n.prototype.updateTable=function(b){f.clearElement(b);var c=this.context.createView({html:a("text!gcli/commands/pref_list_inner.html"),options:{blankNullUndefined:!0,stack:"pref_list_inner.html"},data:this}),d=c.toDom(b.ownerDocument);f.setContents(b,d)},Object.defineProperty(n.prototype,"preferences",{get:function(){return g.getAll(this.search)},enumerable:!0}),Object.defineProperty(n.prototype,"promisePreferences",{get:function(){var a=new h;return setTimeout(function(){a.resolve(g.getAll(this.search))}.bind(this),10),a},enumerable:!0}),n.prototype.onFilterChange=function(a){if(a.target.value!==this.search){this.search=a.target.value;var b=a.target.parentNode.parentNode,c=b.querySelector(".gcli-pref-list-table");this.updateTable(c)}},n.prototype.onSetClick=function(a){var b=a.currentTarget.getAttribute("data-command");this.context.update(b)}}),define("text!gcli/commands/pref_list_outer.html",[],'<div ignore="${onLoad(__element)}">\n  <div class="gcli-pref-list-filter">\n    ${l10n.prefOutputFilter}:\n    <input onKeyUp="${onFilterChange}" value="${search}"/>\n  </div>\n  <table class="gcli-pref-list-table">\n    <colgroup>\n      <col class="gcli-pref-list-name"/>\n      <col class="gcli-pref-list-value"/>\n    </colgroup>\n    <tr>\n      <th>${l10n.prefOutputName}</th>\n      <th>${l10n.prefOutputValue}</th>\n    </tr>\n  </table>\n  <div class="gcli-pref-list-scroller">\n    <table class="gcli-pref-list-table" save="${table}">\n    </table>\n  </div>\n</div>\n'),define("text!gcli/commands/pref_list.css",[],"\n.gcli-pref-list-scroller {\n  max-height: 200px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  display: inline-block;\n}\n\n.gcli-pref-list-table {\n  width: 500px;\n  table-layout: fixed;\n}\n\n.gcli-pref-list-table tr > th {\n  text-align: left;\n}\n\n.gcli-pref-list-table tr > td {\n  text-overflow: elipsis;\n  word-wrap: break-word;\n}\n\n.gcli-pref-list-name {\n  width: 70%;\n}\n\n.gcli-pref-list-command {\n  display: none;\n}\n\n.gcli-pref-list-row:hover .gcli-pref-list-command {\n  display: inline-block;\n}\n"),define("text!gcli/commands/pref_set_check.html",[],'<div>\n  <p><strong>${l10n.prefSetCheckHeading}</strong></p>\n  <p>${l10n.prefSetCheckBody}</p>\n  <button onclick="${activate}">${l10n.prefSetCheckGo}</button>\n</div>\n'),define("text!gcli/commands/pref_list_inner.html",[],'<table>\n  <colgroup>\n    <col class="gcli-pref-list-name"/>\n    <col class="gcli-pref-list-value"/>\n  </colgroup>\n  <tr class="gcli-pref-list-row" foreach="preference in ${promisePreferences}">\n    <td>${preference.name}</td>\n    <td onclick="${onSetClick}" data-command="pref set ${preference.name} ">\n      ${preference.value}\n      <img class="gcli-pref-list-command" _src="${edit}"/>\n    </td>\n  </tr>\n</table>\n'),define("gcli/commands/intro",["require","exports","module","gcli/index","gcli/l10n","text!gcli/ui/intro.html"],function(a,b,c){var d=a("gcli/index"),e=a("gcli/l10n"),f={name:"intro",description:e.lookup("introDesc"),manual:e.lookup("introManual"),returnType:"html",exec:function(c,d){return d.createView({html:a("text!gcli/ui/intro.html")})}};b.startup=function(){d.addCommand(f)},b.shutdown=function(){d.removeCommand(f)}}),define("test/commands/test",["require","exports","module","gcli/canon","test/examiner","text!test/commands/test.css","text!test/commands/test.html"],function(a,b,c){var d=a("gcli/canon"),e=a("test/examiner"),f=a("text!test/commands/test.css"),g=a("text!test/commands/test.html");b.startup=function(){d.addCommand(h)},b.shutdown=function(){d.removeCommand(h)};var h={name:"test",description:"Runs the GCLI Unit Tests",params:[],exec:function(a,b){var c=b.createPromise();return e.runAsync({},function(){c.resolve(b.createView({html:g,css:f,cssId:"gcli-test",data:e.toRemote(),options:{allowEval:!0,stack:"test.html"}}))}),c}}}),define("test/examiner",["require","exports","module","test/assert"],function(a,b,c){function h(a){Object.keys(d.defaultOptions).forEach(function(b){a[b]==null&&(a[b]=d.defaultOptions[b])})}function i(a,b){this.name=a.replace(/gclitest\//,""),this.suite=b,this.tests={},Object.keys(b).forEach(function(a){if(a!=="setup"&&a!=="shutdown"){var c=new j(this,a,b[a]);this.tests[a]=c}}.bind(this))}function j(a,b,c){this.suite=a,this.name=b,this.func=c,this.title=b.replace(/^test/,"").replace(/([A-Z])/g," $1"),this.failures=[],this.status=g.notrun,this.checks=0}var d=b,e=a("test/assert");d.suites={};var f=10,g={notrun:{index:0,name:"Skipped"},executing:{index:1,name:"Executing"},asynchronous:{index:2,name:"Waiting"},pass:{index:3,name:"Pass"},fail:{index:4,name:"Fail"}};d.addSuite=function(a,b){d.suites[a]=new i(a,b)},d.defaultOptions={},d.run=function(a){return h(a),Object.keys(d.suites).forEach(function(b){var c=d.suites[b];c.run(a)}.bind(this)),a.detailedResultLog?d.detailedResultLog():console.log("Completed test suite"),d.suites},d.runAsync=function(a,b){h(a),this._runAsyncInternal(0,a,b)},d._runAsyncInternal=function(a,b,c){if(a>=Object.keys(d.suites).length){typeof c=="function"&&c();return}var e=Object.keys(d.suites)[a];d.suites[e].runAsync(b,function(){setTimeout(function(){d._runAsyncInternal(a+1,b,c)}.bind(this),f)}.bind(this))},d.toRemote=function(){return{suites:Object.keys(d.suites).map(function(a){return d.suites[a].toRemote()}.bind(this)),summary:{checks:this.checks,status:this.status}}},Object.defineProperty(d,"checks",{get:function(){return Object.keys(d.suites).reduce(function(a,b){return a+d.suites[b].checks}.bind(this),0)},enumerable:!0}),Object.defineProperty(d,"status",{get:function(){return Object.keys(d.suites).reduce(function(a,b){var c=d.suites[b].status;return a.index>c.index?a:c}.bind(this),g.notrun)},enumerable:!0}),d.detailedResultLog=function(){Object.keys(this.suites).forEach(function(a){var b=d.suites[a];console.log(b.name+": "+b.status.name+" (funcs="+Object.keys(b.tests).length+", checks="+b.checks+")"),Object.keys(b.tests).forEach(function(a){var c=b.tests[a];if(c.status!==g.pass||c.failures.length!==0)console.log("- "+c.name+": "+c.status.name),c.failures.forEach(function(a){console.log("  - "+a.message),a.params&&(console.log("    - P1: "+a.p1),console.log("    - P2: "+a.p2))}.bind(this))}.bind(this))}.bind(this)),console.log(),console.log("Summary: "+this.status.name+" ("+this.checks+" checks)")},i.prototype.run=function(a){if(!this._setup(a))return;Object.keys(this.tests).forEach(function(b){var c=this.tests[b];c.run(a)}.bind(this)),this._shutdown(a)},i.prototype.runAsync=function(a,b){if(!this._setup(a)){typeof b=="function"&&b();return}this._runAsyncInternal(0,a,function(){this._shutdown(a),typeof b=="function"&&b()}.bind(this))},i.prototype._runAsyncInternal=function(a,b,c){if(a>=Object.keys(this.tests).length){typeof c=="function"&&c();return}var d=Object.keys(this.tests)[a];this.tests[d].runAsync(b,function(){setTimeout(function(){this._runAsyncInternal(a+1,b,c)}.bind(this),f)}.bind(this))},i.prototype.toRemote=function(){return{name:this.name,tests:Object.keys(this.tests).map(function(a){return this.tests[a].toRemote()}.bind(this))}},Object.defineProperty(i.prototype,"checks",{get:function(){return Object.keys(this.tests).reduce(function(a,b){return a+this.tests[b].checks}.bind(this),0)},enumerable:!0}),Object.defineProperty(i.prototype,"status",{get:function(){return Object.keys(this.tests).reduce(function(a,b){var c=this.tests[b].status;return a.index>c.index?a:c}.bind(this),g.notrun)},enumerable:!0}),i.prototype._setup=function(a){if(typeof this.suite.setup!="function")return!0;try{return this.suite.setup(a),!0}catch(b){return this._logToAllTests(""+b),console.error(b),b.stack&&console.error(b.stack),!1}},i.prototype._shutdown=function(a){if(typeof this.suite.shutdown!="function")return!0;try{return this.suite.shutdown(a),!0}catch(b){return this._logToAllTests(""+b),console.error(b),b.stack&&console.error(b.stack),!1}},i.prototype._logToAllTests=function(a){var b=e.currentTest;Object.keys(this.tests).forEach(function(b){e.currentTest=this.tests[b],e.ok(!1,a)}.bind(this)),e.currentTest=b},j.prototype.run=function(a){e.currentTest=this,this.status=g.executing,this.failures=[],this.checks=0;try{this.func.apply(this.suite,[a])}catch(b){e.ok(!1,""+b),console.error(b),(a.isNode||a.isFirefox)&&b.stack&&console.error(b.stack)}this.status===g.executing&&(this.status=g.pass),e.currentTest=null},j.prototype.runAsync=function(a,b){setTimeout(function(){this.run(a),typeof b=="function"&&b()}.bind(this),f)},j.prototype.toRemote=function(){return{name:this.name,title:this.title,status:this.status,failures:this.failures,checks:this.checks}}}),define("test/assert",["require","exports","module"],function(a,b,c){b.currentTest=null,b.ok=function(a,c){if(!b.currentTest){console.error("No currentTest for "+c);return}a?b.currentTest.checks++:(console.error("Failure: "+c),console.trace(),b.currentTest.status=stati.fail,b.currentTest.failures.push({message:c}))},b.is=function(a,c,d){if(!b.currentTest){console.error("No currentTest for "+failure.message);return}a!==c?(console.error("Failure: "+d),console.error("- P1: ",a),console.error("- P2: ",c),console.trace(),b.currentTest.status=stati.fail,b.currentTest.failures.push({message:d,params:!0,p1:a,p2:c})):b.currentTest.checks++},b.log=function(a){if(!b.currentTest){console.error("No currentTest for "+failure.message);return}b.currentTest.failures.push({message:a})}}),define("text!test/commands/test.css",[],"\n.gcliTestSkipped {\n  background-color: #EEE;\n  color: #000;\n}\n\n.gcliTestExecuting {\n  background-color: #888;\n  color: #FFF;\n}\n\n.gcliTestWaiting {\n  background-color: #FFA;\n  color: #000;\n}\n\n.gcliTestPass {\n  background-color: #8F8;\n  color: #000;\n}\n\n.gcliTestFail {\n  background-color: #F00;\n  color: #FFF;\n}\n\ntd.gcliTestSuite {\n  font-family: monospace;\n  font-size: 90%;\n  text-align: right;\n}\n\n.gcliTestResults th.gcliTestSuite,\n.gcliTestResults .gcliTestChecks {\n  text-align: right;\n}\n\n.gcliTestResults th {\n  text-align: left;\n}\n\n.gcliTestMessages ul {\n  margin: 0 0 10px;\n  padding-left: 20px;\n  list-style-type: square;\n}\n"),define("text!test/commands/test.html",[],'\n<div>\n  <table class="gcliTestResults">\n    <thead>\n      <tr>\n        <th class="gcliTestSuite">Suite</th>\n        <th>Test</th>\n        <th>Results</th>\n        <th>Checks</th>\n        <th>Notes</th>\n      </tr>\n    </thead>\n    <tbody foreach="suite in ${suites}">\n      <tr foreach="test in ${suite.tests}" title="${suite.name}.${test.name}()">\n        <td class="gcliTestSuite">${suite.name}</td>\n        <td class="gcliTestTitle">${test.title}</td>\n        <td class="gcliTest${test.status.name}">${test.status.name}</td>\n        <td class="gcliTestChecks">${test.checks}</td>\n        <td class="gcliTestMessages">\n          <div foreach="failure in ${test.failures}">\n            ${failure.message}\n            <ul if="${failure.params}">\n              <li>P1: ${failure.p1}</li>\n              <li>P2: ${failure.p2}</li>\n            </ul>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n    <tfoot>\n      <tr>\n        <th></th>\n        <th>Total</th>\n        <th>${summary.status.name}</th>\n        <th class="gcliTestChecks">${summary.checks}</th>\n        <th></th>\n      </tr>\n    </tfoot>\n  </table>\n</div>\n'),define("demo/commands/basic",["require","exports","module","gcli/index"],function(a,b,c){var d=a("gcli/index");b.startup=function(){d.addCommand(f),d.addCommand(e),d.addCommand(g),d.addCommand(h)},b.shutdown=function(){d.removeCommand(f),d.removeCommand(e),d.removeCommand(g),d.removeCommand(h)};var e={name:"alert",description:"Show an alert dialog",params:[{name:"message",type:"string",description:"Message to display"}],exec:function(a,b){window.alert(a.message)}},f={name:"echo",description:{root:"Show a message",fr_fr:"Afficher un message"},params:[{name:"message",type:"string",description:{root:"The message to output",fr_fr:"Le message à afficher"}}],returnType:"string",exec:function(b,c){return b.message}},g={name:"edit",description:"Edit a file",params:[{name:"resource",type:{name:"resource",include:"text/css"},description:"The resource to edit"}],returnType:"html",exec:function(a,b){var c=b.createPromise();return a.resource.loadContents(function(a){c.resolve("<p>This is just a demo</p><textarea rows=5 cols=80>"+a+"</textarea>")}),c}},h={name:"sleep",description:"Wait for a while",params:[{name:"length",type:{name:"number",min:1},description:"How long to wait (s)"}],returnType:"html",exec:function(a,b){var c=b.createPromise();return window.setTimeout(function(){c.resolve("done")},a.length*1e3),c}}}),define("demo/commands/bugs",["require","exports","module","gcli/index","gcli/util","text!demo/commands/bugs.html"],function(a,b,c){function h(a,b,c){var d="https://api-dev.bugzilla.mozilla.org/0.9/bug?"+a,e=new XMLHttpRequest;e.open("GET",d,!0),e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Content-type","application/json"),e.onreadystatechange=function(a){if(e.readyState==4){if(e.status>=300||e.status<200){c("Error: "+JSON.stringify(e));return}var d;try{d=JSON.parse(e.responseText)}catch(f){c("Invalid response: "+f+": "+e.responseText);return}if(d.error){c("Error: "+d.error.message);return}b(d)}}.bind(this),e.send()}var d=a("gcli/index"),e=a("gcli/util"),f=a("text!demo/commands/bugs.html");b.startup=function(){d.addCommand(g)},b.shutdown=function(){d.removeCommand(g)};var g={name:"bugz",returnType:"html",description:"List the GCLI bugs open in Bugzilla",exec:function(a,b){function d(a){c.resolve(a)}var c=b.createPromise(),e="short_desc=GCLI&short_desc_type=allwords&bug_status=UNCONFIRMED&bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED";return h(e,function(a){a.bugs.forEach(function(a){a.target_milestone==="---"&&(a.target_milestone="Future")}),a.bugs.sort(function(a,b){var c=a.target_milestone.localeCompare(b.target_milestone);return c!==0?c:a.priority.localeCompare(b.priority)}),c.resolve(b.createView({html:f,data:a}))},d),c}}}),define("text!demo/commands/bugs.html",[],'\n<div>\n  <p>\n    Open GCLI meta-bugs\n    (i.e. <a target="_blank" href="https://bugzilla.mozilla.org/buglist.cgi?list_id=2622790;short_desc=GCLI;resolution=---;resolution=DUPLICATE;query_format=advanced;bug_status=UNCONFIRMED;bug_status=NEW;bug_status=ASSIGNED;bug_status=REOPENED;short_desc_type=allwords">this search</a>):\n  </p>\n  <table>\n    <thead>\n      <tr>\n        <th>ID</th>\n        <th>Milestone</th>\n        <th>Pri</th>\n        <th>Summary</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr foreach="bug in ${bugs}">\n        <td><a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=${bug.id}">${bug.id}</a></td>\n        <td>${bug.target_milestone}</td>\n        <td>${bug.priority}</td>\n        <td>${bug.summary}</td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n'),define("demo/commands/demo",["require","exports","module","gcli/index"],function(a,b,c){function l(){var a=Math.floor(Math.random()*k.length);return k[a]}var d=a("gcli/index");b.startup=function(){d.addCommand(e),d.addCommand(f),d.addCommand(g),d.addCommand(h),d.addCommand(i),d.addCommand(j)},b.shutdown=function(){d.removeCommand(e),d.removeCommand(f),d.removeCommand(g),d.removeCommand(h),d.removeCommand(i),d.removeCommand(j)};var e={name:"gcli",description:"Commands for playing with the UI"},f={name:"gcli onestring",description:"Single string parameter",params:[{name:"text",type:"string",description:"Demo param"}],returnType:"html",exec:function(a,b){return l()+"text="+a.text}},g={name:"gcli twostrings",description:"2 string parameters",params:[{name:"p1",type:"string",description:"First param"},{name:"p2",type:"string",description:"Second param"}],returnType:"html",exec:function(a,b){return l()+"p1='"+a.p1+"', p2='"+a.p2+"'"}},h={name:"gcli twonums",description:"2 numeric parameters",params:[{name:"p1",type:"number",description:"First param"},{name:"p2",type:{name:"number",min:-20,max:42,step:5},description:"Second param"}],returnType:"html",exec:function(a,b){return l()+"p1="+a.p1+", p2="+a.p2}},i={name:"gcli selboolnum",description:"A selection, a boolean and a number",params:[{name:"sel",type:{name:"selection",lookup:[{name:"firefox",value:4},{name:"chrome",value:12},{name:"ie",value:9},{name:"opera",value:10},{name:"safari",value:5}]},description:"First param"},{name:"bool",type:"boolean",description:"A boolean param"},{name:"num",type:{name:"number",min:-4,max:42,step:5},description:"A number param"}],returnType:"html",exec:function(a,b){return l()+"p1="+a.p1+", p2="+a.p2+", p3="+a.p3}},j={name:"gcli node",description:"Single node parameter",params:[{name:"node",type:"node",description:"CSS selector pointing at a single node"}],returnType:"html",exec:function(a,b){return l()+"node="+a.node}},k=["GCLI wants you to trick it out in some way.</br>","GCLI is your web command line.</br>","GCLI would love to be like Zsh on the Web.</br>","GCLI is written on the Web platform, so you can tweak it.</br>"]}),define("gclitest/index",["require","exports","module","gclitest/suite"],function(a,b,c){var d=a("gclitest/suite").examiner,e={isFake:!0,document:{title:"Fake DOM"}};e.window=e,d.defaultOptions={window:e,hideExec:!0},b.run=function(a){d.run(a||{}),d.defaultOptions={window:a.window,display:a.display,hideExec:a.hideExec}}}),define("gclitest/suite",["require","exports","module","gcli/index","test/examiner","gclitest/testCanon","gclitest/testCli","gclitest/testCompletion","gclitest/testExec","gclitest/testHelp","gclitest/testHistory","gclitest/testInputter","gclitest/testIntro","gclitest/testJs","gclitest/testKeyboard","gclitest/testPref","gclitest/testRequire","gclitest/testResource","gclitest/testScratchpad","gclitest/testSettings","gclitest/testSpell","gclitest/testSplit","gclitest/testTokenize","gclitest/testTooltip","gclitest/testTypes","gclitest/testUtil"],function(a,b,c){a("gcli/index");var d=a("test/examiner");d.addSuite("gclitest/testCanon",a("gclitest/testCanon")),d.addSuite("gclitest/testCli",a("gclitest/testCli")),d.addSuite("gclitest/testCompletion",a("gclitest/testCompletion")),d.addSuite("gclitest/testExec",a("gclitest/testExec")),d.addSuite("gclitest/testHelp",a("gclitest/testHelp")),d.addSuite("gclitest/testHistory",a("gclitest/testHistory")),d.addSuite("gclitest/testInputter",a("gclitest/testInputter")),d.addSuite("gclitest/testIntro",a("gclitest/testIntro")),d.addSuite("gclitest/testJs",a("gclitest/testJs")),d.addSuite("gclitest/testKeyboard",a("gclitest/testKeyboard")),d.addSuite("gclitest/testPref",a("gclitest/testPref")),d.addSuite("gclitest/testRequire",a("gclitest/testRequire")),d.addSuite("gclitest/testResource",a("gclitest/testResource")),d.addSuite("gclitest/testScratchpad",a("gclitest/testScratchpad")),d.addSuite("gclitest/testSettings",a("gclitest/testSettings")),d.addSuite("gclitest/testSpell",a("gclitest/testSpell")),d.addSuite("gclitest/testSplit",a("gclitest/testSplit")),d.addSuite("gclitest/testTokenize",a("gclitest/testTokenize")),d.addSuite("gclitest/testTooltip",a("gclitest/testTooltip")),d.addSuite("gclitest/testTypes",a("gclitest/testTypes")),d.addSuite("gclitest/testUtil",a("gclitest/testUtil")),b.examiner=d}),define("gclitest/testCanon",["require","exports","module","gclitest/helpers","gcli/canon","test/assert"],function(a,b,c){var d=a("gclitest/helpers"),e=a("gcli/canon"),f=a("test/assert");b.testAddRemove=function(a){var b=e.getCommands().length,c=0,g=function(a){c++};e.onCanonChange.add(g),e.addCommand({name:"testadd",exec:function(){return 1}}),f.is(e.getCommands().length,b+1,"add command success"),f.is(c,1,"add event"),d.exec(a,{typed:"testadd",outputMatch:/^1$/}),e.addCommand({name:"testadd",exec:function(){return 2}}),f.is(e.getCommands().length,b+1,"readd command success"),f.is(c,2,"readd event"),d.exec(a,{typed:"testadd",outputMatch:/^2$/}),e.removeCommand("testadd"),f.is(e.getCommands().length,b,"remove command success"),f.is(c,3,"remove event"),d.status(a,{typed:"testadd",status:"ERROR"}),e.addCommand({name:"testadd",exec:function(){return 3}}),f.is(e.getCommands().length,b+1,"rereadd command success"),f.is(c,4,"rereadd event"),d.exec(a,{typed:"testadd",outputMatch:/^3$/}),e.removeCommand({name:"testadd"}),f.is(e.getCommands().length,b,"reremove command success"),f.is(c,5,"reremove event"),d.status(a,{typed:"testadd",status:"ERROR"}),e.onCanonChange.remove(g)}}),define("gclitest/helpers",["require","exports","module","test/assert"],function(a,b,c){var d=a("test/assert");b.status=function(a,b){var c=a.display.requisition,e=a.display.inputter,f=a.display.completer;if(!b.typed){d.ok(!1,"Missing typed for "+JSON.stringify(b));return}e.setInput(b.typed),b.cursor&&e.setCursor(b.cursor),b.status&&d.is(c.getStatus().toString(),b.status,"status for "+b.typed);if(b.emptyParameters!=null){var g=f.emptyParameters;d.is(g.length,b.emptyParameters.length,"emptyParameters.length for '"+b.typed+"'");if(g.length===b.emptyParameters.length)for(var h=0;h<g.length;h++)d.is(g[h].replace(/\u00a0/g," "),b.emptyParameters[h],"emptyParameters["+h+"] for '"+b.typed+"'")}if(b.markup){var i=b.cursor?b.cursor.start:b.typed.length,j=c.getInputStatusMarkup(i),k=j.map(function(a){return Array(a.string.length+1).join(a.status.toString()[0])}).join("");d.is(b.markup,k,"markup for "+b.typed)}b.directTabText&&d.is(f.directTabText,b.directTabText,"directTabText for '"+b.typed+"'"),b.arrowTabText&&d.is(f.arrowTabText,"  ⇥ "+b.arrowTabText,"arrowTabText for '"+b.typed+"'")},b.exec=function(a,b){var c=a.display.requisition,e=a.display.inputter;b=b||{},b.typed&&e.setInput(b.typed);var f=e.getInputState().typed,g=c.exec({hidden:!0});d.is(f,g.typed,"output.command for: "+f),b.completed!==!1&&d.ok(g.completed,"output.completed false for: "+f),b.args!=null&&(d.is(Object.keys(b.args).length,Object.keys(g.args).length,"arg count for "+f),Object.keys(g.args).forEach(function(a){var c=b.args[a],e=g.args[a];if(Array.isArray(c)){if(!Array.isArray(e)){d.ok(!1,"actual is not an array. "+f+"/"+a);return}d.is(c.length,e.length,"array length: "+f+"/"+a);for(var h=0;h<c.length;h++)d.is(c[h],e[h],'member: "'+f+"/"+a+"/"+h)}else d.is(c,e,'typed: "'+f+'" arg: '+a)}));if(!a.window.document.createElement){d.log("skipping output tests (missing doc.createElement) for "+f);return}var h=a.window.document.createElement("div");g.toDom(h);var i=h.textContent.trim();if(b.outputMatch){function j(a,b){a.test(b)||(d.ok(!1,"html output for "+f+" against "+a.source),console.log("Actual textContent"),console.log(b))}Array.isArray(b.outputMatch)?b.outputMatch.forEach(function(a){j(a,i)}):j(b.outputMatch,i)}b.blankOutput!=null&&(/^$/.test(i)||(d.ok(!1,"html for "+f+" (textContent sent to info)"),console.log("Actual textContent"),console.log(i)))}}),define("gclitest/testCli",["require","exports","module","gcli/cli","gcli/types","gclitest/mockCommands","test/assert"],function(a,b,c){function o(a){k||(k=new d),k.update(a.typed),l&&console.log('####### TEST: typed="'+a.typed+'" cur='+a.cursor.start+" cli=",k),m=k.getStatus(),j=k.getAssignmentAt(a.cursor.start),n=k.getInputStatusMarkup(a.cursor.start).map(function(a){return Array(a.string.length+1).join(a.status.toString()[0])}).join(""),k.commandAssignment.value?(h=k.getAssignment(0),i=k.getAssignment(1)):(h=undefined,i=undefined)}function p(a,b){return b.every(function(b){return a===b.name},this)}var d=a("gcli/cli").Requisition,e=a("gcli/types").Status,f=a("gclitest/mockCommands"),g=a("test/assert");b.setup=function(){f.setup()},b.shutdown=function(){f.shutdown()};var h,i,j,k,l=!1,m,n;b.testBlank=function(){o({typed:"",cursor:{start:0,end:0}}),g.is("",n),g.is(e.ERROR,m),g.is(-1,j.paramIndex),g.is(undefined,k.commandAssignment.value),o({typed:" ",cursor:{start:1,end:1}}),g.is("V",n),g.is(e.ERROR,m),g.is(-1,j.paramIndex),g.is(undefined,k.commandAssignment.value),o({typed:" ",cursor:{start:0,end:0}}),g.is("V",n),g.is(e.ERROR,m),g.is(-1,j.paramIndex),g.is(undefined,k.commandAssignment.value)},b.testIncompleteMultiMatch=function(){o({typed:"t",cursor:{start:1,end:1}}),g.is("I",n),g.is(e.ERROR,m),g.is(-1,j.paramIndex),g.ok(j.getPredictions().length>0),p("tsv",j.getPredictions()),p("tsr",j.getPredictions()),g.is(undefined,k.commandAssignment.value)},b.testIncompleteSingleMatch=function(){o({typed:"tselar",cursor:{start:6,end:6}}),g.is("IIIIII",n),g.is(e.ERROR,m),g.is(-1,j.paramIndex),g.is(1,j.getPredictions().length),g.is("tselarr",j.getPredictions()[0].name),g.is(undefined,k.commandAssignment.value)},b.testTsv=function(){o({typed:"tsv",cursor:{start:3,end:3}}),g.is("VVV",n),g.is(e.ERROR,m),g.is(-1,j.paramIndex),g.is("tsv",k.commandAssignment.value.name),o({typed:"tsv ",cursor:{start:4,end:4}}),g.is("VVVV",n),g.is(e.ERROR,m),g.is(0,j.paramIndex),g.is("tsv",k.commandAssignment.value.name),o({typed:"tsv ",cursor:{start:2,end:2}}),g.is("VVVV",n),g.is(e.ERROR,m),g.is(-1,j.paramIndex),g.is("tsv",k.commandAssignment.value.name),o({typed:"tsv o",cursor:{start:5,end:5}}),g.is("VVVVI",n),g.is(e.ERROR,m),g.is(0,j.paramIndex),g.ok(j.getPredictions().length>=2),g.is(f.option1,j.getPredictions()[0].value),g.is(f.option2,j.getPredictions()[1].value),g.is("tsv",k.commandAssignment.value.name),g.is("o",h.arg.text),g.is(undefined,h.value),o({typed:"tsv option",cursor:{start:10,end:10}}),g.is("VVVVIIIIII",n),g.is(e.ERROR,m),g.is(0,j.paramIndex),g.ok(j.getPredictions().length>=2),g.is(f.option1,j.getPredictions()[0].value),g.is(f.option2,j.getPredictions()[1].value),g.is("tsv",k.commandAssignment.value.name),g.is("option",h.arg.text),g.is(undefined,h.value),o({typed:"tsv option",cursor:{start:1,end:1}}),g.is("VVVVEEEEEE",n),g.is(e.ERROR,m),g.is(-1,j.paramIndex),g.is("tsv",k.commandAssignment.value.name),g.is("option",h.arg.text),g.is(undefined,h.value),o({typed:"tsv option ",cursor:{start:11,end:11}}),g.is("VVVVEEEEEEV",n),g.is(e.ERROR,m),g.is(1,j.paramIndex),g.is(0,j.getPredictions().length),g.is("tsv",k.commandAssignment.value.name),g.is("option",h.arg.text),g.is(undefined,h.value),o({typed:"tsv option1",cursor:{start:11,end:11}}),g.is("VVVVVVVVVVV",n),g.is(e.ERROR,m),g.is("tsv",k.commandAssignment.value.name),g.is("option1",h.arg.text),g.is(f.option1,h.value),g.is(0,j.paramIndex),o({typed:"tsv option1 ",cursor:{start:12,end:12}}),g.is("VVVVVVVVVVVV",n),g.is(e.ERROR,m),g.is("tsv",k.commandAssignment.value.name),g.is("option1",h.arg.text),g.is(f.option1,h.value),g.is(1,j.paramIndex),o({typed:"tsv option1 6",cursor:{start:13,end:13}}),g.is("VVVVVVVVVVVVV",n),g.is(e.VALID,m),g.is("tsv",k.commandAssignment.value.name),g.is("option1",h.arg.text),g.is(f.option1,h.value),g.is("6",i.arg.text),g.is("6",i.value),g.is("string",typeof i.value),g.is(1,j.paramIndex),o({typed:"tsv option2 6",cursor:{start:13,end:13}}),g.is("VVVVVVVVVVVVV",n),g.is(e.VALID,m),g.is("tsv",k.commandAssignment.value.name),g.is("option2",h.arg.text),g.is(f.option2,h.value),g.is("6",i.arg.text),g.is(6,i.value),g.is("number",typeof i.value),g.is(1,j.paramIndex)},b.testInvalid=function(){o({typed:"zxjq",cursor:{start:4,end:4}}),g.is("EEEE",n),g.is("zxjq",k.commandAssignment.arg.text),g.is("",k._unassigned.arg.text),g.is(-1,j.paramIndex),o({typed:"zxjq ",cursor:{start:5,end:5}}),g.is("EEEEV",n),g.is("zxjq",k.commandAssignment.arg.text),g.is("",k._unassigned.arg.text),g.is(-1,j.paramIndex),o({typed:"zxjq one",cursor:{start:8,end:8}}),g.is("EEEEVEEE",n),g.is("zxjq",k.commandAssignment.arg.text),g.is("one",k._unassigned.arg.text)},b.testSingleString=function(){o({typed:"tsr",cursor:{start:3,end:3}}),g.is("VVV",n),g.is(e.ERROR,m),g.is("tsr",k.commandAssignment.value.name),g.ok(h.arg.isBlank()),g.is(undefined,h.value),g.is(undefined,i),o({typed:"tsr ",cursor:{start:4,end:4}}),g.is("VVVV",n),g.is(e.ERROR,m),g.is("tsr",k.commandAssignment.value.name),g.ok(h.arg.isBlank()),g.is(undefined,h.value),g.is(undefined,i),o({typed:"tsr h",cursor:{start:5,end:5}}),g.is("VVVVV",n),g.is(e.VALID,m),g.is("tsr",k.commandAssignment.value.name),g.is("h",h.arg.text),g.is("h",h.value),o({typed:'tsr "h h"',cursor:{start:9,end:9}}),g.is("VVVVVVVVV",n),g.is(e.VALID,m),g.is("tsr",k.commandAssignment.value.name),g.is("h h",h.arg.text),g.is("h h",h.value),o({typed:"tsr h h h",cursor:{start:9,end:9}}),g.is("VVVVVVVVV",n),g.is("tsr",k.commandAssignment.value.name),g.is("h h h",h.arg.text),g.is("h h h",h.value)},b.testSingleNumber=function(){o({typed:"tsu",cursor:{start:3,end:3}}),g.is("VVV",n),g.is(e.ERROR,m),g.is("tsu",k.commandAssignment.value.name),g.is("",h.arg.text),g.is(undefined,h.value),o({typed:"tsu ",cursor:{start:4,end:4}}),g.is("VVVV",n),g.is(e.ERROR,m),g.is("tsu",k.commandAssignment.value.name),g.is("",h.arg.text),g.is(undefined,h.value),o({typed:"tsu 1",cursor:{start:5,end:5}}),g.is("VVVVV",n),g.is(e.VALID,m),g.is("tsu",k.commandAssignment.value.name),g.is("1",h.arg.text),g.is(1,h.value),g.is("number",typeof h.value),o({typed:"tsu x",cursor:{start:5,end:5}}),g.is("VVVVE",n),g.is(e.ERROR,m),g.is("tsu",k.commandAssignment.value.name),g.is("x",h.arg.text),g.is(undefined,h.value)},b.testElement=function(a){o({typed:"tse",cursor:{start:3,end:3}}),g.is("VVV",n),g.is(e.ERROR,m),g.is("tse",k.commandAssignment.value.name),g.ok(h.arg.isBlank()),g.is(undefined,h.value);if(!a.isNode){o({typed:"tse :root",cursor:{start:9,end:9}}),g.is("VVVVVVVVV",n),g.is(e.VALID,m),g.is("tse",k.commandAssignment.value.name),g.is(":root",h.arg.text),a.window.isFake||g.is(a.window.document.documentElement,h.value);if(!a.window.isFake){var b=a.window.document.getElementById("gcli-input");b?(o({typed:"tse #gcli-input",cursor:{start:15,end:15}}),g.is("VVVVVVVVVVVVVVV",n),g.is(e.VALID,m),g.is("tse",k.commandAssignment.value.name),g.is("#gcli-input",h.arg.text),g.is(b,h.value)):g.log("Skipping test that assumes gcli on the web")}o({typed:"tse #gcli-nomatch",cursor:{start:17,end:17}}),g.is("VVVVIIIIIIIIIIIII",n),g.is(e.ERROR,m),g.is("tse",k.commandAssignment.value.name),g.is("#gcli-nomatch",h.arg.text),g.is(undefined,h.value)}else g.log("Skipping :root test due to jsdom (from isNode)");o({typed:"tse #",cursor:{start:5,end:5}}),g.is("VVVVE",n),g.is(e.ERROR,m),g.is("tse",k.commandAssignment.value.name),g.is("#",h.arg.text),g.is(undefined,h.value),o({typed:"tse .",cursor:{start:5,end:5}}),g.is("VVVVE",n),g.is(e.ERROR,m),g.is("tse",k.commandAssignment.value.name),g.is(".",h.arg.text),g.is(undefined,h.value),o({typed:"tse *",cursor:{start:5,end:5}}),g.is("VVVVE",n),g.is(e.ERROR,m),g.is("tse",k.commandAssignment.value.name),g.is("*",h.arg.text),g.is(undefined,h.value)},b.testNestedCommand=function(){o({typed:"tsn",cursor:{start:3,end:3}}),g.is("III",n),g.is(e.ERROR,m),g.is("tsn",k.commandAssignment.arg.text),g.is(undefined,h),o({typed:"tsn ",cursor:{start:4,end:4}}),g.is("IIIV",n),g.is(e.ERROR,m),g.is("tsn",k.commandAssignment.arg.text),g.is(undefined,h),o({typed:"tsn x",cursor:{start:5,end:5}}),g.is(e.ERROR,m),g.is("tsn x",k.commandAssignment.arg.text),g.is(undefined,h),o({typed:"tsn dif",cursor:{start:7,end:7}}),g.is("VVVVVVV",n),g.is(e.ERROR,m),g.is("tsn dif",k.commandAssignment.value.name),g.is("",h.arg.text),g.is(undefined,h.value),o({typed:"tsn dif ",cursor:{start:8,end:8}}),g.is("VVVVVVVV",n),g.is(e.ERROR,m),g.is("tsn dif",k.commandAssignment.value.name),g.is("",h.arg.text),g.is(undefined,h.value),o({typed:"tsn dif x",cursor:{start:9,end:9}}),g.is("VVVVVVVVV",n),g.is(e.VALID,m),g.is("tsn dif",k.commandAssignment.value.name),g.is("x",h.arg.text),g.is("x",h.value),o({typed:"tsn ext",cursor:{start:7,end:7}}),g.is("VVVVVVV",n),g.is(e.ERROR,m),g.is("tsn ext",k.commandAssignment.value.name),g.is("",h.arg.text),g.is(undefined,h.value),o({typed:"tsn exte",cursor:{start:8,end:8}}),g.is("VVVVVVVV",n),g.is(e.ERROR,m),g.is("tsn exte",k.commandAssignment.value.name),g.is("",h.arg.text),g.is(undefined,h.value),o({typed:"tsn exten",cursor:{start:9,end:9}}),g.is("VVVVVVVVV",n),g.is(e.ERROR,m),g.is("tsn exten",k.commandAssignment.value.name),g.is("",h.arg.text),g.is(undefined,h.value),o({typed:"tsn extend",cursor:{start:10,end:10}}),g.is("VVVVVVVVVV",n),g.is(e.ERROR,m),g.is("tsn extend",k.commandAssignment.value.name),g.is("",h.arg.text),g.is(undefined,h.value),o({typed:"ts ",cursor:{start:3,end:3}}),g.is("EEV",n),g.is(e.ERROR,m),g.is("ts",k.commandAssignment.arg.text),g.is(undefined,h)},b.testDeeplyNested=function(){o({typed:"tsn deep down nested cmd",cursor:{start:24,end:24}}),g.is("VVVVVVVVVVVVVVVVVVVVVVVV",n),g.is(e.VALID,m),g.is("tsn deep down nested cmd",k.commandAssignment.value.name),g.is(undefined,h),o({typed:"tsn deep down nested",cursor:{start:20,end:20}}),g.is("IIIVIIIIVIIIIVIIIIII",n),g.is(e.ERROR,m),g.is("tsn deep down nested",k.commandAssignment.value.name),g.is(undefined,h)}}),define("gclitest/mockCommands",["require","exports","module","gcli/canon","gcli/util","gcli/types/selection","gcli/types/basic","gcli/types"],function(a,b,c){function j(a){return function(c,d){var e={command:b[a],args:c,context:d};return b.onCommandExec(e),e}}var d=a("gcli/canon"),e=a("gcli/util"),f=a("gcli/types/selection").SelectionType,g=a("gcli/types/basic").DeferredType,h=a("gcli/types");b.setup=function(){b.option1.type=h.getType("string"),b.option2.type=h.getType("number"),h.registerType(b.optionType),h.registerType(b.optionValue),d.addCommand(b.tsv),d.addCommand(b.tsr),d.addCommand(b.tse),d.addCommand(b.tsj),d.addCommand(b.tsb),d.addCommand(b.tss),d.addCommand(b.tsu),d.addCommand(b.tsn),d.addCommand(b.tsnDif),d.addCommand(b.tsnExt),d.addCommand(b.tsnExte),d.addCommand(b.tsnExten),d.addCommand(b.tsnExtend),d.addCommand(b.tsnDeep),d.addCommand(b.tsnDeepDown),d.addCommand(b.tsnDeepDownNested),d.addCommand(b.tsnDeepDownNestedCmd),d.addCommand(b.tselarr),d.addCommand(b.tsm),d.addCommand(b.tsg)},b.shutdown=function(){d.removeCommand(b.tsv),d.removeCommand(b.tsr),d.removeCommand(b.tse),d.removeCommand(b.tsj),d.removeCommand(b.tsb),d.removeCommand(b.tss),d.removeCommand(b.tsu),d.removeCommand(b.tsn),d.removeCommand(b.tsnDif),d.removeCommand(b.tsnExt),d.removeCommand(b.tsnExte),d.removeCommand(b.tsnExten),d.removeCommand(b.tsnExtend),d.removeCommand(b.tsnDeep),d.removeCommand(b.tsnDeepDown),d.removeCommand(b.tsnDeepDownNested),d.removeCommand(b.tsnDeepDownNestedCmd),d.removeCommand(b.tselarr),d.removeCommand(b.tsm),d.removeCommand(b.tsg),h.deregisterType(b.optionType),h.deregisterType(b.optionValue)},b.option1={type:h.getType("string")},b.option2={type:h.getType("number")};var i=undefined;b.optionType=new f({name:"optionType",lookup:[{name:"option1",value:b.option1},{name:"option2",value:b.option2}],noMatch:function(){i=undefined},stringify:function(a){return i=a,f.prototype.stringify.call(this,a)},parse:function(a){var b=f.prototype.parse.call(this,a);return i=b.value,b}}),b.optionValue=new g({name:"optionValue",defer:function(){return i&&i.type?i.type:h.getType("blank")}}),b.onCommandExec=e.createEvent("commands.onCommandExec"),b.tsv={name:"tsv",params:[{name:"optionType",type:"optionType"},{name:"optionValue",type:"optionValue"}],exec:j("tsv")},b.tsr={name:"tsr",params:[{name:"text",type:"string"}],exec:j("tsr")},b.tse={name:"tse",params:[{name:"node",type:"node"}],exec:j("tse")},b.tsj={name:"tsj",params:[{name:"javascript",type:"javascript"}],exec:j("tsj")},b.tsb={name:"tsb",params:[{name:"toggle",type:"boolean"}],exec:j("tsb")},b.tss={name:"tss",exec:j("tss")},b.tsu={name:"tsu",params:[{name:"num",type:{name:"number",max:10,min:-5,step:3}}],exec:j("tsu")},b.tsn={name:"tsn"},b.tsnDif={name:"tsn dif",params:[{name:"text",type:"string"}],exec:j("tsnDif")},b.tsnExt={name:"tsn ext",params:[{name:"text",type:"string"}],exec:j("tsnExt")},b.tsnExte={name:"tsn exte",params:[{name:"text",type:"string"}],exec:j("")},b.tsnExten={name:"tsn exten",params:[{name:"text",type:"string"}],exec:j("tsnExte")},b.tsnExtend={name:"tsn extend",params:[{name:"text",type:"string"}],exec:j("tsnExtend")},b.tsnDeep={name:"tsn deep"},b.tsnDeepDown={name:"tsn deep down"},b.tsnDeepDownNested={name:"tsn deep down nested"},b.tsnDeepDownNestedCmd={name:"tsn deep down nested cmd",exec:j("tsnDeepDownNestedCmd")},b.tselarr={name:"tselarr",params:[{name:"num",type:{name:"selection",data:["1","2","3"]}},{name:"arr",type:{name:"array",subtype:"string"}}],exec:j("tselarr")},b.tsm={name:"tsm",description:"a 3-param test selection|string|number",params:[{name:"abc",type:{name:"selection",data:["a","b","c"]}},{name:"txt",type:"string"},{name:"num",type:{name:"number",max:42,min:0}}],exec:j("tsm")},b.tsg={name:"tsg",description:"a param group test",params:[{name:"solo",type:{name:"selection",data:["aaa","bbb","ccc"]}},{group:"First",params:[{name:"txt1",type:"string",defaultValue:null},{name:"bool",type:"boolean"}]},{group:"Second",params:[{name:"txt2",type:"string",defaultValue:"d"},{name:"num",type:{name:"number",min:40},defaultValue:42}]}],exec:j("tsg")}}),define("gclitest/testCompletion",["require","exports","module","test/assert","gclitest/mockCommands"],function(a,b,c){function f(a,b,c){var e=c.display.inputter,f=c.display.completer;e.setInput(a),b.cursor&&e.setCursor({start:b.cursor,end:b.cursor}),b.emptyParameters==null&&(b.emptyParameters=[]);var g=f.emptyParameters;d.is(b.emptyParameters.length,g.length,"emptyParameters.length for '"+a+"'");if(g.length===b.emptyParameters.length)for(var h=0;h<g.length;h++)d.is(b.emptyParameters[h],g[h].replace(/\u00a0/g," "),"emptyParameters["+h+"] for '"+a+"'");b.directTabText?d.is(b.directTabText,f.directTabText,"directTabText for '"+a+"'"):d.is("",f.directTabText,"directTabText for '"+a+"'"),b.arrowTabText?d.is("  ⇥ "+b.arrowTabText,f.arrowTabText,"arrowTabText for '"+a+"'"):d.is("",f.arrowTabText,"arrowTabText for '"+a+"'")}var d=a("test/assert"),e=a("gclitest/mockCommands");b.setup=function(){e.setup()},b.shutdown=function(){e.shutdown()},b.testActivate=function(a){if(!a.display){d.log("No display. Skipping activate tests");return}f("",{},a),f(" ",{},a),f("tsr",{emptyParameters:[" <text>"]},a),f("tsr ",{emptyParameters:["<text>"]},a),f("tsr b",{},a),f("tsb",{emptyParameters:[" [toggle]"]},a),f("tsm",{emptyParameters:[" <abc>"," <txt>"," <num>"]},a),f("tsm ",{emptyParameters:[" <txt>"," <num>"],directTabText:"a"},a),f("tsm a",{emptyParameters:[" <txt>"," <num>"]},a),f("tsm a ",{emptyParameters:["<txt>"," <num>"]},a),f("tsm a  ",{emptyParameters:["<txt>"," <num>"]},a),f("tsm a  d",{emptyParameters:[" <num>"]},a),f('tsm a "d d"',{emptyParameters:[" <num>"]},a),f('tsm a "d ',{emptyParameters:[" <num>"]},a),f('tsm a "d d" ',{emptyParameters:["<num>"]},a),f('tsm a "d d ',{emptyParameters:[" <num>"]},a),f("tsm d r",{emptyParameters:[" <num>"]},a),f("tsm a d ",{emptyParameters:["<num>"]},a),f("tsm a d 4",{},a),f("tsg",{emptyParameters:[" <solo>"]},a),f("tsg ",{directTabText:"aaa"},a),f("tsg a",{directTabText:"aa"},a),f("tsg b",{directTabText:"bb"},a),f("tsg d",{},a),f("tsg aa",{directTabText:"a"},a),f("tsg aaa",{},a),f("tsg aaa ",{},a),f("tsg aaa d",{},a),f("tsg aaa dddddd",{},a),f("tsg aaa dddddd ",{},a),f('tsg aaa "d',{},a),f('tsg aaa "d d',{},a),f('tsg aaa "d d"',{},a),f("tsn ex ",{},a),f("selarr",{arrowTabText:"tselarr"},a),f("tselar 1",{},a),f("tselar 1",{cursor:7},a),f("tselar 1",{cursor:6,arrowTabText:"tselarr"},a),f("tselar 1",{cursor:5,arrowTabText:"tselarr"},a)}}),define("gclitest/testExec",["require","exports","module","gcli/cli","gcli/canon","gclitest/mockCommands","gcli/types/node","test/assert"],function(a,b,c){function l(a){i=a}function m(a){j=a.output}function n(a,b){var c={},e=new d(c),f=e.exec({typed:a,hidden:k});h.is(a.indexOf(i.command.name),0,"Command name: "+a),h.is(a,f.typed,"outputObject.command for: "+a),h.ok(f.completed,"outputObject.completed false for: "+a);if(b==null){h.ok(!1,"expectedArgs == null for "+a);return}if(i.args==null){h.ok(!1,"actualExec.args == null for "+a);return}h.is(Object.keys(b).length,Object.keys(i.args).length,"Arg count: "+a),Object.keys(b).forEach(function(c){var d=b[c],e=i.args[c];if(Array.isArray(d)){if(!Array.isArray(e)){h.ok(!1,"actual is not an array. "+a+"/"+c);return}h.is(d.length,e.length,"Array length: "+a+"/"+c);for(var f=0;f<d.length;f++)h.is(d[f],e[f],'Member: "'+a+"/"+c+"/"+f)}else h.is(d,e,'Command: "'+a+'" arg: '+c)}),h.is(c,i.context.environment,"Environment"),k||(h.is(!1,j.error,"output error is false"),h.is(a,j.typed,"command is typed"),h.ok(typeof j.canonical=="string","canonical exists"),h.is(i.args,j.args,"actualExec.args is actualOutput.args"))}var d=a("gcli/cli").Requisition,e=a("gcli/canon"),f=a("gclitest/mockCommands"),g=a("gcli/types/node"),h=a("test/assert"),i,j,k=!1;b.setup=function(){f.setup(),f.onCommandExec.add(l),e.commandOutputManager.onOutput.add(m)},b.shutdown=function(){f.shutdown(),f.onCommandExec.remove(l),e.commandOutputManager.onOutput.remove(m)},b.testExec=function(a){k=a.hideExec,n("tss",{}),n("tsv option1 10",{optionType:f.option1,optionValue:"10"}),n("tsv option2 10",{optionType:f.option2,optionValue:10}),n("tsr fred",{text:"fred"}),n("tsr fred bloggs",{text:"fred bloggs"}),n('tsr "fred bloggs"',{text:"fred bloggs"}),n("tsb",{toggle:!1}),n("tsb --toggle",{toggle:!0}),n("tsu 10",{num:10}),n("tsu --num 10",{num:10}),n("tsj { 1 + 1 }",{javascript:"1 + 1"});var b=g.getDocument();g.setDocument(p),n("tse :root",{node:o}),g.setDocument(b),n("tsn dif fred",{text:"fred"}),n("tsn exten fred",{text:"fred"}),n("tsn extend fred",{text:"fred"}),n("tselarr 1",{num:"1",arr:[]}),n("tselarr 1 a",{num:"1",arr:["a"]}),n("tselarr 1 a b",{num:"1",arr:["a","b"]}),n("tsm a 10 10",{abc:"a",txt:"10",num:10}),n("tsg aaa",{solo:"aaa",txt1:null,bool:!1,txt2:"d",num:42})};var o={style:{}},p={querySelectorAll:function(a){if(a===":root")return{length:1,item:function(a){return o}};throw new Error("mockDoc.querySelectorAll('"+a+"') error")}}}),define("gclitest/testHelp",["require","exports","module","gclitest/helpers"],function(a,b,c){var d=a("gclitest/helpers");b.testHelpStatus=function(a){d.status(a,{typed:"help",markup:"VVVV",status:"VALID",emptyParameters:[" [search]"]}),d.status(a,{typed:"help foo",markup:"VVVVVVVV",status:"VALID",emptyParameters:[]}),d.status(a,{typed:"help foo bar",markup:"VVVVVVVVVVVV",status:"VALID",emptyParameters:[]})},b.testHelpExec=function(a){a.isFirefox?d.exec(a,{typed:"help",args:{search:null},outputMatch:[/Available Commands/,/Get help/]}):d.exec(a,{typed:"help",args:{search:null},outputMatch:[/Welcome to GCLI/,/Source \(BSD\)/,/Get help/]}),d.exec(a,{typed:"help nomatch",args:{search:"nomatch"},outputMatch:/Commands starting with 'nomatch':$/}),d.exec(a,{typed:"help help",args:{search:"help"},outputMatch:[/Synopsis:/,/Provide help either/,/\(string, optional\)/]}),d.exec(a,{typed:"help a b",args:{search:"a b"},outputMatch:/Commands starting with 'a b':$/}),d.exec(a,{typed:"help hel",args:{search:"hel"},outputMatch:[/Commands starting with 'hel':/,/Get help on the available commands/]})}}),define("gclitest/testHistory",["require","exports","module","test/assert","gcli/history"],function(a,b,c){var d=a("test/assert"),e=a("gcli/history").History;b.setup=function(){},b.shutdown=function(){},b.testSimpleHistory=function(){var a=new e({});a.add("foo"),a.add("bar"),d.is("bar",a.backward()),d.is("foo",a.backward()),a.add("quux"),d.is("quux",a.backward()),d.is("bar",a.backward()),d.is("foo",a.backward())},b.testBackwardsPastIndex=function(){var a=new e({});a.add("foo"),a.add("bar"),d.is("bar",a.backward()),d.is("foo",a.backward()),d.is("foo",a.backward())},b.testForwardsPastIndex=function(){var a=new e({});a.add("foo"),a.add("bar"),d.is("bar",a.backward()),d.is("foo",a.backward()),d.is("bar",a.forward()),d.is("",a.forward()),d.is("",a.forward())}}),define("gclitest/testInputter",["require","exports","module","gclitest/mockCommands","gcli/util","test/assert"],function(a,b,c){var d=a("gclitest/mockCommands"),e=a("gcli/util").KeyEvent,f=a("test/assert"),g=undefined,h=undefined,i=undefined,j=function(a){function b(){i=h.data}h!=null&&a.output.onChange.remove(b),g=a,h=a.output,a.output.onChange.add(b)};b.setup=function(a){a.display.requisition.commandOutputManager.onOutput.add(j),d.setup()},b.shutdown=function(a){d.shutdown(),a.display.requisition.commandOutputManager.onOutput.remove(j)},b.testOutput=function(a){g=undefined,h=undefined,i=undefined;var b=a.display.inputter,c=a.display.focusManager;b.setInput("tss"),b.onKeyDown({keyCode:e.DOM_VK_RETURN}),f.is(b.element.value,"tss","inputter should do nothing on RETURN keyDown"),f.is(g,undefined,"no events this test"),f.is(i,undefined,"no data this test"),b.onKeyUp({keyCode:e.DOM_VK_RETURN}),f.ok(g!=null,"events this test"),f.is(i.command.name,"tss","last command is tss"),f.is(b.element.value,"","inputter should exec on RETURN keyUp"),f.ok(c._recentOutput,"recent output happened"),b.onKeyUp({keyCode:e.DOM_VK_F1}),f.ok(!c._recentOutput,"no recent output happened post F1"),f.ok(c._helpRequested,"F1 = help"),b.onKeyUp({keyCode:e.DOM_VK_ESCAPE}),f.ok(!c._helpRequested,"ESCAPE = anti help"),h.onClose()}}),define("gclitest/testIntro",["require","exports","module","gclitest/helpers","test/assert"],function(a,b,c){var d=a("gclitest/helpers"),e=a("test/assert");b.testIntroStatus=function(a){if(a.isFirefox){e.log("Skipping testIntroStatus in Firefox.");return}d.status(a,{typed:"intro",markup:"VVVVV",status:"VALID",emptyParameters:[]}),d.status(a,{typed:"intro foo",markup:"VVVVVVEEE",status:"ERROR",emptyParameters:[]})},b.testIntroExec=function(a){if(a.isFirefox){e.log("Skipping testIntroExec in Firefox.");return}d.exec(a,{typed:"intro",args:{},outputMatch:[/graphical\s*command\s*line/,/GCLI/,/help/,/F1/,/Escape/]})}}),define("gclitest/testJs",["require","exports","module","gcli/cli","gcli/types","gcli/types/javascript","gcli/canon","test/assert"],function(a,b,c){function o(a){j||(j=new d);var b={start:a.length,end:a.length};j.update(a),i&&console.log('####### TEST: typed="'+a+'" cur='+b.start+" cli=",j),l=j.getStatus(),m=j.getInputStatusMarkup(b.start).map(function(a){return Array(a.string.length+1).join(a.status.toString()[0])}).join(""),j.commandAssignment.value?k=j.getAssignment(0):k=undefined}function p(a){return k.getPredictions().some(function(b){return a===b.name},this)}function q(a,b,c,d){h.is("{",j.commandAssignment.value.name,"is exec"),h.is(a,m,"unexpected status markup"),h.is(b.toString(),l.toString(),"unexpected status"),h.is(c,k.value,"unexpected assignment");if(d!=null){var e;Array.isArray(d)?d.forEach(function(a){e=p(a),h.ok(e,"missing prediction "+a)}):typeof d=="number"?(e=!0,h.is(k.getPredictions().length,d,"prediction count"),k.getPredictions().length!==d&&k.getPredictions().forEach(function(a){h.log("actual prediction: ",a)})):(e=p(d),h.ok(e,"missing prediction "+d)),e||h.log("Predictions: "+k.getPredictions().map(function(a){return a.name}).join(", "))}}var d=a("gcli/cli").Requisition,e=a("gcli/types").Status,f=a("gcli/types/javascript"),g=a("gcli/canon"),h=a("test/assert"),i=!1,j,k,l,m,n;b.setup=function(a){n=f.getGlobalObject(),f.setGlobalObject(a.window),Object.defineProperty(a.window,"donteval",{get:function(){return h.ok(!1,"donteval should not be used"),{cant:"",touch:"","this":""}},enumerable:!0,configurable:!0})},b.shutdown=function(a){delete a.window.donteval,f.setGlobalObject(n),n=undefined},b.testBasic=function(a){if(!g.getCommand("{")){h.log("Skipping exec tests because { is not registered");return}o("{"),q("V",e.ERROR,undefined),o("{ "),q("VV",e.ERROR,undefined),o("{ w"),q("VVI",e.ERROR,"w","window"),o("{ windo"),q("VVIIIII",e.ERROR,"windo","window"),o("{ window"),q("VVVVVVVV",e.VALID,"window"),o("{ window.d"),q("VVIIIIIIII",e.ERROR,"window.d","window.document"),o("{ window.document.title"),q("VVVVVVVVVVVVVVVVVVVVVVV",e.VALID,"window.document.title",0),o("{ d"),q("VVI",e.ERROR,"d","document"),o("{ document.title"),q("VVVVVVVVVVVVVVVV",e.VALID,"document.title",0),h.ok("donteval"in a.window,"donteval exists"),o("{ don"),q("VVIII",e.ERROR,"don","donteval"),o("{ donteval"),q("VVVVVVVVVV",e.VALID,"donteval",0),o("{ donteval.cant"),q("VVVVVVVVVVVVVVV",e.VALID,"donteval.cant",0),o("{ donteval.xxx"),q("VVVVVVVVVVVVVV",e.VALID,"donteval.xxx",0)}}),define("gclitest/testKeyboard",["require","exports","module","gcli/cli","gcli/canon","gclitest/mockCommands","gcli/types/javascript","test/assert"],function(a,b,c){function n(a,b,c,e,f,g){var i;j?(i=j.requisition,j.setInput(a)):(i=new d,i.update(a)),f==null&&(f=a.length);var n=i.getAssignmentAt(f);switch(b){case k:i.complete({start:f,end:f},e);break;case l:n.increment();break;case m:n.decrement()}h.is(c,i.toString(),a+" + "+b+" -> "+c),g!=null&&j&&h.is(g,j.getInputState().cursor.start,"Ending cursor position for '"+a+"'")}var d=a("gcli/cli").Requisition,e=a("gcli/canon"),f=a("gclitest/mockCommands"),g=a("gcli/types/javascript"),h=a("test/assert"),i,j;b.setup=function(a){i=g.getGlobalObject(),g.setGlobalObject(a.window),a.display&&(j=a.display.inputter),f.setup()},b.shutdown=function(a){f.shutdown(),j=undefined,g.setGlobalObject(i),i=undefined};var k="complete",l="keyup",m="keydown";b.testComplete=function(a){j||h.log("Missing display, reduced checks"),n("tsela",k,"tselarr ",0),n("tsn di",k,"tsn dif ",0),n("tsg a",k,"tsg aaa ",0),n("tsn e",k,"tsn extend ",-5),n("tsn e",k,"tsn ext ",-4),n("tsn e",k,"tsn exte ",-3),n("tsn e",k,"tsn exten ",-2),n("tsn e",k,"tsn extend ",-1),n("tsn e",k,"tsn ext ",0),n("tsn e",k,"tsn exte ",1),n("tsn e",k,"tsn exten ",2),n("tsn e",k,"tsn extend ",3),n("tsn e",k,"tsn ext ",4),n("tsn e",k,"tsn exte ",5),n("tsn e",k,"tsn exten ",6),n("tsn e",k,"tsn extend ",7),n("tsn e",k,"tsn ext ",8),e.getCommand("{")?(n("{ wind",k,"{ window",0),n("{ window.docum",k,"{ window.document",0),a.isNode?h.log("Running under Node. Skipping tests due to bug 717228."):n("{ window.document.titl",k,"{ window.document.title ",0)):h.log("Skipping exec tests because { is not registered")},b.testInternalComplete=function(a){},b.testIncrDecr=function(){n("tsu -70",l,"tsu -5"),n("tsu -7",l,"tsu -5"),n("tsu -6",l,"tsu -5"),n("tsu -5",l,"tsu -3"),n("tsu -4",l,"tsu -3"),n("tsu -3",l,"tsu 0"),n("tsu -2",l,"tsu 0"),n("tsu -1",l,"tsu 0"),n("tsu 0",l,"tsu 3"),n("tsu 1",l,"tsu 3"),n("tsu 2",l,"tsu 3"),n("tsu 3",l,"tsu 6"),n("tsu 4",l,"tsu 6"),n("tsu 5",l,"tsu 6"),n("tsu 6",l,"tsu 9"),n("tsu 7",l,"tsu 9"),n("tsu 8",l,"tsu 9"),n("tsu 9",l,"tsu 10"),n("tsu 10",l,"tsu 10"),n("tsu 100",l,"tsu -5"),n("tsu -70",m,"tsu 10"),n("tsu -7",m,"tsu 10"),n("tsu -6",m,"tsu 10"),n("tsu -5",m,"tsu -5"),n("tsu -4",m,"tsu -5"),n("tsu -3",m,"tsu -5"),n("tsu -2",m,"tsu -3"),n("tsu -1",m,"tsu -3"),n("tsu 0",m,"tsu -3"),n("tsu 1",m,"tsu 0"),n("tsu 2",m,"tsu 0"),n("tsu 3",m,"tsu 0"),n("tsu 4",m,"tsu 3"),n("tsu 5",m,"tsu 3"),n("tsu 6",m,"tsu 3"),n("tsu 7",m,"tsu 6"),n("tsu 8",m,"tsu 6"),n("tsu 9",m,"tsu 6"),n("tsu 10",m,"tsu 9"),n("tsu 100",m,"tsu 10"),n("tselarr 1",m,"tselarr 2"),n("tselarr 2",m,"tselarr 3"),n("tselarr 3",m,"tselarr 1"),n("tselarr 3",l,"tselarr 2")}}),define("gclitest/testPref",["require","exports","module","gcli/commands/pref","gclitest/helpers","gclitest/mockSettings","test/assert"],function(a,b,c){var d=a("gcli/commands/pref"),e=a("gclitest/helpers"),f=a("gclitest/mockSettings"),g=a("test/assert");b.setup=function(a){a.isFirefox?g.log("Skipping testPref in Firefox."):f.setup()},b.shutdown=function(a){a.isFirefox||f.shutdown()},b.testPrefSetStatus=function(a){if(a.isFirefox){g.log("Skipping testPref in Firefox.");return}e.status(a,{typed:"pref s",markup:"IIIIVI",status:"ERROR",directTabText:"et"}),e.status(a,{typed:"pref set",markup:"VVVVVVVV",status:"ERROR",emptyParameters:[" <setting>"," <value>"]}),e.status(a,{typed:"pref xxx",markup:"EEEEVEEE",status:"ERROR"}),e.status(a,{typed:"pref set ",markup:"VVVVVVVVV",status:"ERROR",emptyParameters:[" <value>"]}),e.status(a,{typed:"pref set ",markup:"VVVVVVVVV",status:"ERROR",emptyParameters:[" <value>"]}),e.status(a,{typed:"pref set tempTBo",markup:"VVVVVVVVVIIIIIII",directTabText:"ol",status:"ERROR",emptyParameters:[" <value>"]}),e.status(a,{typed:"pref set tempTBool 4",markup:"VVVVVVVVVVVVVVVVVVVE",directTabText:"",status:"ERROR",emptyParameters:[]}),e.status(a,{typed:"pref set tempNumber 4",markup:"VVVVVVVVVVVVVVVVVVVVV",directTabText:"",status:"VALID",emptyParameters:[]})},b.testPrefExec=function(a){if(a.isFirefox){g.log("Skipping testPref in Firefox.");return}var b=d.allowSet.value;d.allowSet.value=!1,g.is(f.tempNumber.value,42,"set to 42"),e.exec(a,{typed:"pref set tempNumber 4",args:{setting:f.tempNumber,value:4},outputMatch:[/void your warranty/,/I promise/]}),g.is(f.tempNumber.value,42,"still set to 42"),d.allowSet.value=!0,e.exec(a,{typed:"pref set tempNumber 4",args:{setting:f.tempNumber,value:4},blankOutput:!0}),g.is(f.tempNumber.value,4,"set to 4"),e.exec(a,{typed:"pref reset tempNumber",args:{setting:f.tempNumber},blankOutput:!0}),g.is(f.tempNumber.value,42,"reset to 42"),d.allowSet.value=b,e.exec(a,{typed:"pref list tempNum",args:{search:"tempNum"},outputMatch:/Filter/})}}),define("gclitest/mockSettings",["require","exports","module","gcli/settings"],function(a,b,c){var d=a("gcli/settings"),e={name:"tempTBool",type:"boolean",description:"temporary default true boolean",defaultValue:!0};b.tempTBool=undefined;var f={name:"tempFBool",type:"boolean",description:"temporary default false boolean",defaultValue:!1};b.tempFBool=undefined;var g={name:"tempUString",type:"string",description:"temporary default undefined string"};b.tempUString=undefined;var h={name:"tempNString",type:"string",description:"temporary default undefined string",defaultValue:null};b.tempNString=undefined;var i={name:"tempQString",type:"string",description:'temporary default "q" string',defaultValue:"q"};b.tempQString=undefined;var j={name:"tempNumber",type:"number",description:"temporary number",defaultValue:42};b.tempNumber=undefined;var k={name:"tempSelection",type:{name:"selection",data:["a","b","c"]},description:"temporary selection",defaultValue:"a"};b.tempSelection=undefined,b.setup=function(){b.tempTBool=d.addSetting(e),b.tempFBool=d.addSetting(f),b.tempUString=d.addSetting(g),b.tempNString=d.addSetting(h),b.tempQString=d.addSetting(i),b.tempNumber=d.addSetting(j),b.tempSelection=d.addSetting(k)},b.shutdown=function(){d.removeSetting(e),d.removeSetting(f),d.removeSetting(g),d.removeSetting(h),d.removeSetting(i),d.removeSetting(j),d.removeSetting(k),b.tempTBool=undefined,b.tempFBool=undefined,b.tempUString=undefined,b.tempNString=undefined,b.tempQString=undefined,b.tempNumber=undefined,b.tempSelection=undefined}}),define("gclitest/testRequire",["require","exports","module","test/assert","gclitest/requirable"],function(a,b,c){var d=a("test/assert");b.testWorking=function(){var b=a("gclitest/requirable");d.is("thing1",b.thing1),d.is(2,b.thing2),d.ok(b.thing3===undefined)},b.testDomains=function(b){var c=a("gclitest/requirable");d.ok(c.status===undefined),c.setStatus(null),d.is(null,c.getStatus()),d.ok(c.status===undefined),c.setStatus("42"),d.is("42",c.getStatus()),d.ok(c.status===undefined);if(b.isUnamdized){d.log("Running unamdized, Reduced tests");return}if(define.Domain){var e=new define.Domain,f=e.require("gclitest/requirable");d.is(undefined,f.status),d.is("initial",f.getStatus()),f.setStatus(999),d.is(999,f.getStatus()),d.is(undefined,f.status),d.is("42",c.getStatus()),d.is(undefined,c.status)}},b.testLeakage=function(){var b=a("gclitest/requirable");d.ok(b.setup===undefined),d.ok(b.shutdown===undefined),d.ok(b.testWorking===undefined)},b.testMultiImport=function(){var b=a("gclitest/requirable"),c=a("gclitest/requirable");d.is(b,c)},b.testUncompilable=function(){},b.testRecursive=function(){}}),define("gclitest/requirable",["require","exports","module"],function(a,b,c){b.thing1="thing1",b.thing2=2;var d="initial";b.setStatus=function(a){d=a},b.getStatus=function(){return d}}),define("gclitest/testResource",["require","exports","module","gcli/types/resource","gcli/types","test/assert"],function(a,b,c){function i(a,b){var c=b.name,d=b.value,e=a.parseString(c);g.is(e.getStatus(),f.VALID,"status VALID for "+c),g.is(e.value,d,"value for "+c);var h=a.stringify(d);g.is(h,c,"stringify for "+c),g.is(typeof d.loadContents,"function","resource for "+c),g.is(typeof d.element,"object","resource for "+c)}var d=a("gcli/types/resource"),e=a("gcli/types"),f=a("gcli/types").Status,g=a("test/assert"),h;b.setup=function(a){h=d.getDocument(),d.setDocument(a.window.document)},b.shutdown=function(a){d.setDocument(h),h=undefined},b.testPredictions=function(a){if(a.window.isFake||a.isFirefox){g.log("Skipping resource tests: window.isFake || isFirefox");return}var b=e.getType("resource"),c=b.parseString("").getPredictions();g.ok(c.length>1,"have resources"),c.forEach(function(a){i(b,a)});var d=e.getType({name:"resource",include:"text/javascript"}),f=d.parseString("").getPredictions();g.ok(f.length>1,"have resources"),f.forEach(function(a){i(d,a)});var h=e.getType({name:"resource",include:"text/css"}),j=h.parseString("").getPredictions();a.isNode?g.log("Running under Node. Skipping checks due to jsdom document.stylsheets support."):g.ok(j.length>=1,"have resources"),j.forEach(function(a){i(h,a)});var k=e.getType({name:"resource"}),l=k.parseString("").getPredictions();g.is(c.length,l.length,"type spec")}}),define("gclitest/testScratchpad",["require","exports","module","test/assert"],function(a,b,c){var d=a("test/assert"),e;b.setup=function(a){a.display&&(e=a.display.inputter.scratchpad,a.display.inputter.scratchpad=f)},b.shutdown=function(a){a.display&&(a.display.inputter.scratchpad=e)};var f={shouldActivate:function(a){return!0},activatedCount:0,linkText:"scratchpad.linkText"};f.activate=function(a){return f.activatedCount++,!0},b.testActivate=function(a){if(!a.display){d.log("No display. Skipping scratchpad tests");return}var b={};f.activatedCount=0,a.display.inputter.onKeyUp(b),d.is(1,f.activatedCount,"scratchpad is activated")}}),define("gclitest/testSettings",["require","exports","module","gclitest/mockSettings","test/assert"],function(a,b,c){var d=a("gclitest/mockSettings"),e=a("test/assert");b.setup=function(a){a.isFirefox?e.log("Skipping testSettings in Firefox."):d.setup()},b.shutdown=function(a){a.isFirefox||d.shutdown()},b.testChange=function(a){function b(a){e.is(a.setting,d.tempTBool,"tempTBool event setting"),e.is(a.value,!1,"tempTBool event value"),e.is(a.setting.value,!1,"tempTBool event setting value")}function c(a){e.is(a.setting,d.tempFBool,"tempFBool event setting"),e.is(a.value,!0,"tempFBool event value"),e.is(a.setting.value,!0,"tempFBool event setting value")}function f(a){e.is(a.setting,d.tempUString,"tempUString event setting"),e.is(a.value,"x","tempUString event value"),e.is(a.setting.value,"x","tempUString event setting value")}function g(a){e.is(a.setting,d.tempNString,"tempNString event setting"),e.is(a.value,"y","tempNString event value"),e.is(a.setting.value,"y","tempNString event setting value")}function h(a){e.is(a.setting,d.tempQString,"tempQString event setting"),e.is(a.value,"qq","tempQString event value"),e.is(a.setting.value,"qq","tempQString event setting value")}function i(a){e.is(a.setting,d.tempNumber,"tempNumber event setting"),e.is(a.value,-1,"tempNumber event value"),e.is(a.setting.value,-1,"tempNumber event setting value")}function j(a){e.is(a.setting,d.tempSelection,"tempSelection event setting"),e.is(a.value,"b","tempSelection event value"),e.is(a.setting.value,"b","tempSelection event setting value")}function k(a){e.is(a.setting,d.tempNString,"tempNString event reset"),e.is(a.value,null,"tempNString event revalue"),e.is(a.setting.value,null,"tempNString event setting revalue")}if(a.isFirefox){e.log("Skipping testPref in Firefox.");return}d.tempTBool.setDefault(),d.tempFBool.setDefault(),d.tempUString.setDefault(),d.tempNString.setDefault(),d.tempQString.setDefault(),d.tempNumber.setDefault(),d.tempSelection.setDefault(),e.is(d.tempTBool.value,!0,"tempTBool default"),e.is(d.tempFBool.value,!1,"tempFBool default"),e.is(d.tempUString.value,undefined,"tempUString default"),e.is(d.tempNString.value,null,"tempNString default"),e.is(d.tempQString.value,"q","tempQString default"),e.is(d.tempNumber.value,42,"tempNumber default"),e.is(d.tempSelection.value,"a","tempSelection default"),d.tempTBool.onChange.add(b),d.tempTBool.value=!1,e.is(d.tempTBool.value,!1,"tempTBool change"),d.tempFBool.onChange.add(c),d.tempFBool.value=!0,e.is(d.tempFBool.value,!0,"tempFBool change"),d.tempUString.onChange.add(f),d.tempUString.value="x",e.is(d.tempUString.value,"x","tempUString change"),d.tempNString.onChange.add(g),d.tempNString.value="y",e.is(d.tempNString.value,"y","tempNString change"),d.tempQString.onChange.add(h),d.tempQString.value="qq",e.is(d.tempQString.value,"qq","tempQString change"),d.tempNumber.onChange.add(i),d.tempNumber.value=-1,e.is(d.tempNumber.value,-1,"tempNumber change"),d.tempSelection.onChange.add(j),d.tempSelection.value="b",e.is(d.tempSelection.value,"b","tempSelection change"),d.tempTBool.onChange.remove(b),d.tempFBool.onChange.remove(c),d.tempUString.onChange.remove(f),d.tempNString.onChange.remove(g),d.tempQString.onChange.remove(h),d.tempNumber.onChange.remove(i),d.tempSelection.onChange.remove(j),d.tempNString.onChange.add(k),d.tempTBool.setDefault(),d.tempFBool.setDefault(),d.tempUString.setDefault(),d.tempNString.setDefault(),d.tempQString.setDefault(),d.tempNumber.setDefault(),d.tempSelection.setDefault(),d.tempNString.onChange.remove(k),e.is(d.tempTBool.value,!0,"tempTBool reset"),e.is(d.tempFBool.value,!1,"tempFBool reset"),e.is(d.tempUString.value,undefined,"tempUString reset"),e.is(d.tempNString.value,null,"tempNString reset"),e.is(d.tempQString.value,"q","tempQString reset"),e.is(d.tempNumber.value,42,"tempNumber reset"),e.is(d.tempSelection.value,"a","tempSelection reset")}}),define("gclitest/testSpell",["require","exports","module","test/assert","gcli/types/spell"],function(a,b,c){var d=a("test/assert"),e=a("gcli/types/spell").Speller;b.setup=function(){},b.shutdown=function(){},b.testSpellerSimple=function(a){if(a.isFirefox){d.log("Skipping testPref in Firefox.");return}var b=new e;b.train(Object.keys(a.window)),d.is(b.correct("document"),"document"),d.is(b.correct("documen"),"document"),d.is(b.correct("ocument"),"document"),d.is(b.correct("odcument"),"document"),d.is(b.correct("========="),null)}}),define("gclitest/testSplit",["require","exports","module","test/assert","gclitest/mockCommands","gcli/cli","gcli/canon"],function(a,b,c){var d=a("test/assert"),e=a("gclitest/mockCommands"),f=a("gcli/cli").Requisition,g=a("gcli/canon");b.setup=function(){e.setup()},b.shutdown=function(){e.shutdown()},b.testSplitSimple=function(){var a,b=new f;a=b._tokenize("s"),b._split(a),d.is(0,a.length),d.is("s",b.commandAssignment.arg.text)},b.testFlatCommand=function(){var a,b=new f;a=b._tokenize("tsv"),b._split(a),d.is(0,a.length),d.is("tsv",b.commandAssignment.value.name),a=b._tokenize("tsv a b"),b._split(a),d.is("tsv",b.commandAssignment.value.name),d.is(2,a.length),d.is("a",a[0].text),d.is("b",a[1].text)},b.testJavascript=function(){if(!g.getCommand("{")){d.log("Skipping testJavascript because { is not registered");return}var a,b=new f;a=b._tokenize("{"),b._split(a),d.is(1,a.length),d.is("",a[0].text),d.is("",b.commandAssignment.arg.text),d.is("{",b.commandAssignment.value.name)}}),define("gclitest/testTokenize",["require","exports","module","test/assert","gcli/cli","gcli/argument"],function(a,b,c){var d=a("test/assert"),e=a("gcli/cli").Requisition,f=a("gcli/argument").Argument,g=a("gcli/argument").ScriptArgument;b.testBlanks=function(){var a,b=new e;a=b._tokenize(""),d.is(1,a.length),d.is("",a[0].text),d.is("",a[0].prefix),d.is("",a[0].suffix),a=b._tokenize(" "),d.is(1,a.length),d.is("",a[0].text),d.is(" ",a[0].prefix),d.is("",a[0].suffix)},b.testTokSimple=function(){var a,b=new e;a=b._tokenize("s"),d.is(1,a.length),d.is("s",a[0].text),d.is("",a[0].prefix),d.is("",a[0].suffix),d.ok(a[0]instanceof f),a=b._tokenize("s s"),d.is(2,a.length),d.is("s",a[0].text),d.is("",a[0].prefix),d.is("",a[0].suffix),d.ok(a[0]instanceof f),d.is("s",a[1].text),d.is(" ",a[1].prefix),d.is("",a[1].suffix),d.ok(a[1]instanceof f)},b.testJavascript=function(){var a,b=new e;a=b._tokenize("{x}"),d.is(1,a.length),d.is("x",a[0].text),d.is("{",a[0].prefix),d.is("}",a[0].suffix),d.ok(a[0]instanceof g),a=b._tokenize("{ x }"),d.is(1,a.length),d.is("x",a[0].text),d.is("{ ",a[0].prefix),d.is(" }",a[0].suffix),d.ok(a[0]instanceof g),a=b._tokenize("{x} {y}"),d.is(2,a.length),d.is("x",a[0].text),d.is("{",a[0].prefix),d.is("}",a[0].suffix),d.ok(a[0]instanceof g),d.is("y",a[1].text),d.is(" {",a[1].prefix),d.is("}",a[1].suffix),d.ok(a[1]instanceof g),a=b._tokenize("{x}{y}"),d.is(2,a.length),d.is("x",a[0].text),d.is("{",a[0].prefix),d.is("}",a[0].suffix),d.ok(a[0]instanceof g),d.is("y",a[1].text),d.is("{",a[1].prefix),d.is("}",a[1].suffix),d.ok(a[1]instanceof g),a=b._tokenize("{"),d.is(1,a.length),d.is("",a[0].text),d.is("{",a[0].prefix),d.is("",a[0].suffix),d.ok(a[0]instanceof g),a=b._tokenize("{ "),d.is(1,a.length),d.is("",a[0].text),d.is("{ ",a[0].prefix),d.is("",a[0].suffix),d.ok(a[0]instanceof g),a=b._tokenize("{x"),d.is(1,a.length),d.is("x",a[0].text),d.is("{",a[0].prefix),d.is("",a[0].suffix),d.ok(a[0]instanceof g)},b.testRegularNesting=function(){var a,b=new e;a=b._tokenize('{"x"}'),d.is(1,a.length),d.is('"x"',a[0].text),d.is("{",a[0].prefix),d.is("}",a[0].suffix),d.ok(a[0]instanceof g),a=b._tokenize("{'x'}"),d.is(1,a.length),d.is("'x'",a[0].text),d.is("{",a[0].prefix),d.is("}",a[0].suffix),d.ok(a[0]instanceof g),a=b._tokenize('"{x}"'),d.is(1,a.length),d.is("{x}",a[0].text),d.is('"',a[0].prefix),d.is('"',a[0].suffix),d.ok(a[0]instanceof f),a=b._tokenize("'{x}'"),d.is(1,a.length),d.is("{x}",a[0].text),d.is("'",a[0].prefix),d.is("'",a[0].suffix),d.ok(a[0]instanceof f)},b.testDeepNesting=function(){var a,b=new e;a=b._tokenize("{{}}"),d.is(1,a.length),d.is("{}",a[0].text),d.is("{",a[0].prefix),d.is("}",a[0].suffix),d.ok(a[0]instanceof g),a=b._tokenize("{{x} {y}}"),d.is(1,a.length),d.is("{x} {y}",a[0].text),d.is("{",a[0].prefix),d.is("}",a[0].suffix),d.ok(a[0]instanceof g),a=b._tokenize("{{w} {{{x}}}} {y} {{{z}}}"),d.is(3,a.length),d.is("{w} {{{x}}}",a[0].text),d.is("{",a[0].prefix),d.is("}",a[0].suffix),d.ok(a[0]instanceof g),d.is("y",a[1].text),d.is(" {",a[1].prefix),d.is("}",a[1].suffix),d.ok(a[1]instanceof g),d.is("{{z}}",a[2].text),d.is(" {",a[2].prefix),d.is("}",a[2].suffix),d.ok(a[2]instanceof g),a=b._tokenize("{{w} {{{x}}} {y} {{{z}}}"),d.is(1,a.length),d.is("{w} {{{x}}} {y} {{{z}}}",a[0].text),d.is("{",a[0].prefix),d.is("",a[0].suffix),d.ok(a[0]instanceof g)},b.testStrangeNesting=function(){var a,b=new e;a=b._tokenize('{"x}"}'),d.is(2,a.length),d.is('"x',a[0].text),d.is("{",a[0].prefix),d.is("}",a[0].suffix),d.ok(a[0]instanceof g),d.is("}",a[1].text),d.is('"',a[1].prefix),d.is("",a[1].suffix),d.ok(a[1]instanceof f)},b.testComplex=function(){var a,b=new e;a=b._tokenize(" 1234  '12 34'"),d.is(2,a.length),d.is("1234",a[0].text),d.is(" ",a[0].prefix),d.is("",a[0].suffix),d.ok(a[0]instanceof f),d.is("12 34",a[1].text),d.is("  '",a[1].prefix),d.is("'",a[1].suffix),d.ok(a[1]instanceof f),a=b._tokenize('12\'34 "12 34" \\'),d.is(3,a.length),d.is("12'34",a[0].text),d.is("",a[0].prefix),d.is("",a[0].suffix),d.ok(a[0]instanceof f),d.is("12 34",a[1].text),d.is(' "',a[1].prefix),d.is('"',a[1].suffix),d.ok(a[1]instanceof f),d.is("\\",a[2].text),d.is(" ",a[2].prefix),d.is("",a[2].suffix),d.ok(a[2]instanceof f)},b.testPathological=function(){var a,b=new e;a=b._tokenize("a\\ b \\t\\n\\r \\'x\\\" 'd"),d.is(4,a.length),d.is("a b",a[0].text),d.is("",a[0].prefix),d.is("",a[0].suffix),d.ok(a[0]instanceof f),d.is("\t\n\r",a[1].text),d.is(" ",a[1].prefix),d.is("",a[1].suffix),d.ok(a[1]instanceof f),d.is("'x\"",a[2].text),d.is(" ",a[2].prefix),d.is("",a[2].suffix),d.ok(a[2]instanceof f),d.is("d",a[3].text),d.is(" '",a[3].prefix),d.is("",a[3].suffix),d.ok(a[3]instanceof f)}}),define("gclitest/testTooltip",["require","exports","module","test/assert","gclitest/mockCommands"],function(a,b,c){function f(a,b,c){var e=c.display.inputter,f=c.display.tooltip;e.setInput(a),b.cursor&&e.setCursor({start:b.cursor,end:b.cursor});if(!c.isNode){b.important?d.ok(f.field.isImportant,"Important for "+a):d.ok(!f.field.isImportant,"Not important for "+a);if(b.options){var g=f.field.menu.items.map(function(a){return a.name.textContent?a.name.textContent:a.name});d.is(b.options.join("|"),g.join("|"),"Options for "+a)}b.error?d.is(b.error,f.errorEle.textContent,"Error for "+a):d.is("",f.errorEle.textContent,"No error for "+a)}}var d=a("test/assert"),e=a("gclitest/mockCommands");b.setup=function(){e.setup()},b.shutdown=function(){e.shutdown()},b.testActivate=function(a){if(!a.display){d.log("No display. Skipping activate tests");return}a.isNode&&d.log("Running under Node. Reduced checks due to JSDom.textContent"),f(" ",{},a),f("tsb ",{important:!0,options:["false","true"]},a),f("tsb t",{important:!0,options:["true"]},a),f("tsb tt",{important:!0,options:[],error:"Can't use 'tt'."},a),f("asdf",{important:!1,options:[],error:"Can't use 'asdf'."},a),f("",{},a)}}),define("gclitest/testTypes",["require","exports","module","test/assert","gcli/types"],function(a,b,c){var d=a("test/assert"),e=a("gcli/types");b.setup=function(){},b.shutdown=function(){},b.testDefault=function(a){if(a.isNode){d.log("Running under Node. Skipping tests due to issues with resource type.");return}e.getTypeNames().forEach(function(a){a==="selection"&&(a={name:"selection",data:["a","b"]}),a==="deferred"&&(a={name:"deferred",defer:function(){return e.getType("string")}}),a==="array"&&(a={name:"array",subtype:"string"});var b=e.getType(a);b.name!=="boolean"&&b.name!=="array"&&d.ok(b.getBlank().value===undefined,"default defined for "+b.name)})}}),define("gclitest/testUtil",["require","exports","module","gcli/util","test/assert"],function(a,b,c){var d=a("gcli/util"),e=a("test/assert");b.testFindCssSelector=function(a){if(a.window.isFake){e.log("Skipping dom.findCssSelector tests due to window.isFake");return}var b=a.window.document.querySelectorAll("*");for(var c=0;c<b.length;c++){var f=d.findCssSelector(b[c]),g=a.window.document.querySelectorAll(f);e.is(g.length,1,"multiple matches for "+f),e.is(g[0],b[c],"non-matching selector: "+f)}}}),define("text!/gcli/commands/pref_list_edit.png",[],"data:image/png;base64,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"),define("text!/gcli/ui/images/closer.png",[],"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAj9JREFUeNp0ks+LUlEUx7/vV1o8Z8wUx3IEHcQmiBiQlomjRNCiZpEuEqF/oEUwq/6EhvoHggmRcJUQBM1CRJAW0aLIaGQimZJxJsWxyV/P9/R1zzWlFl04vPvOPZ9z7rnnK5imidmKRCIq+zxgdoPZ1T/ut8xeM3tcKpW6s1hhBkaj0Qj7bDebTX+324WmadxvsVigqipcLleN/d4rFoulORiLxTZY8ItOp8MBCpYkiYPj8Xjus9vtlORWoVB4KcTjcQc732dLpSRXvCZaAws6Q4WDdqsO52kNH+oCRFGEz+f7ydwBKRgMPmTXi49GI1x2D/DsznesB06ws2eDbI7w9HYN6bVjvGss4KAjwDAMq81mM2SW5Wa/3weBbz42UL9uYnVpiO2Nr9ANHSGXib2Wgm9tCYIggGKJEVkvlwgi5/FQRmTLxO6hgJVzI1x0T/fJrBtHJxPeL6tI/fsZLA6ot8lkQi8HRVbw94gkWYI5MaHrOjcCGSNRxZosy9y5cErDzn0Dqx7gcwO8WtBp4PndI35GMYqiUMUvBL5yOBz8yRfFNpbPmqgcCFh/IuHa1nR/YXGM8+oUpFhihEQiwcdRLpfVRqOBtWXWq34Gra6AXq8Hp2piZcmKT4cKnE4nwuHwdByVSmWQz+d32WCTlHG/qaHHREN9kgi0sYQfv0R4PB4EAgESQDKXy72fSy6VSnHJVatVf71eR7vd5n66mtfrRSgU4pLLZrOlf7RKK51Ok8g3/yPyR5lMZi7y3wIMAME4EigHWgKnAAAAAElFTkSuQmCC"),define("text!/gcli/ui/images/dot_clear.gif",[],"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAEBMgA7"),define("text!/gcli/ui/images/minus.png",[],"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAAZiS0dEANIA0gDS7KbF4AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kFGw4xMrIJw5EAAAHcSURBVCjPhZIxSxtxGMZ/976XhJA/RA5EAyJcFksnp64hjUPBoXRyCYLQTyD0UxScu0nFwalCQSgFCVk7dXAwUAiBDA2RO4W7yN1x9+9gcyhU+pteHt4H3pfncay1LOl0OgY4BN4Ar/7KP4BvwNFwOIyWu87S2O12O8DxfD73oygiSRIAarUaxhhWV1fHwMFgMBiWxl6v9y6Koi+3t7ckSUKtVkNVAcjzvNRWVlYwxry9vLz86uzs7HjAZDKZGGstjUaDfxHHMSLC5ubmHdB2VfVwNpuZ5clxHPMcRVFwc3PTXFtbO3RFZHexWJCmabnweAaoVqvlv4vFAhHZdVX1ZZqmOI5DURR8fz/lxbp9Yrz+7bD72SfPcwBU1XdF5N5aWy2KgqIoeBzPEnWVLMseYnAcRERdVR27rrsdxzGqyutP6898+GBsNBqo6i9XVS88z9sOggAR4X94noeqXoiIHPm+H9XrdYIgIAxDwjAkTVPCMESzBy3LMprNJr7v34nIkV5dXd2fn59fG2P2siwjSRIqlQrWWlSVJFcqlQqtVot2u40xZu/s7OxnWbl+v98BjkejkT+dTgmCoDxtY2ODra2tMXBweno6fNJVgP39fQN8eKbkH09OTsqS/wHFRdHPfTSfjwAAAABJRU5ErkJggg=="),define("text!/gcli/ui/images/pinaction.png",[],"data:image/png;base64,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"),define("text!/gcli/ui/images/pinin.png",[],"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC7mlDQ1BJQ0MgUHJvZmlsZQAAeAGFVM9rE0EU/jZuqdAiCFprDrJ4kCJJWatoRdQ2/RFiawzbH7ZFkGQzSdZuNuvuJrWliOTi0SreRe2hB/+AHnrwZC9KhVpFKN6rKGKhFy3xzW5MtqXqwM5+8943731vdt8ADXLSNPWABOQNx1KiEWlsfEJq/IgAjqIJQTQlVdvsTiQGQYNz+Xvn2HoPgVtWw3v7d7J3rZrStpoHhP1A4Eea2Sqw7xdxClkSAog836Epx3QI3+PY8uyPOU55eMG1Dys9xFkifEA1Lc5/TbhTzSXTQINIOJT1cVI+nNeLlNcdB2luZsbIEL1PkKa7zO6rYqGcTvYOkL2d9H5Os94+wiHCCxmtP0a4jZ71jNU/4mHhpObEhj0cGDX0+GAVtxqp+DXCFF8QTSeiVHHZLg3xmK79VvJKgnCQOMpkYYBzWkhP10xu+LqHBX0m1xOv4ndWUeF5jxNn3tTd70XaAq8wDh0MGgyaDUhQEEUEYZiwUECGPBoxNLJyPyOrBhuTezJ1JGq7dGJEsUF7Ntw9t1Gk3Tz+KCJxlEO1CJL8Qf4qr8lP5Xn5y1yw2Fb3lK2bmrry4DvF5Zm5Gh7X08jjc01efJXUdpNXR5aseXq8muwaP+xXlzHmgjWPxHOw+/EtX5XMlymMFMXjVfPqS4R1WjE3359sfzs94i7PLrXWc62JizdWm5dn/WpI++6qvJPmVflPXvXx/GfNxGPiKTEmdornIYmXxS7xkthLqwviYG3HCJ2VhinSbZH6JNVgYJq89S9dP1t4vUZ/DPVRlBnM0lSJ93/CKmQ0nbkOb/qP28f8F+T3iuefKAIvbODImbptU3HvEKFlpW5zrgIXv9F98LZua6N+OPwEWDyrFq1SNZ8gvAEcdod6HugpmNOWls05Uocsn5O66cpiUsxQ20NSUtcl12VLFrOZVWLpdtiZ0x1uHKE5QvfEp0plk/qv8RGw/bBS+fmsUtl+ThrWgZf6b8C8/UXAeIuJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZ0lEQVQ4Ea2TPUsDQRCGZ89Eo4FACkULEQs1CH4Uamfjn7GxEYJFIFXgChFsbPwzNnZioREkaiHBQtEiEEiMRm/dZ8OEGAxR4sBxx877Pju7M2estTJIxLrNuVwuMxQEx0ZkzcFHyRtjXt02559RtB2GYanTYzoryOfz+6l4Nbszf2niwffKmpGRo9sVW22mDgqFwp5C2gDMm+P32a3JB1N+n5JifUGeP9JeNxGryPLYjcwMP8rJ07Q9fZltQzyAstOJ2vVu5sKc1ZZkRBrOcKeb+HexPidvkpCN5JUcllZtpZFc5DgBWc5M2eysZuMuofMBSA4NWjx4PUCsXefMlI0QY3ewRg4NWi4ZTQsgrjYXema+e4VqtEMK6KXvu+4B9Bklt90vVKMeD2BI6DOt4rZ/Gk7WyKFBi4fNPIAJY0joM61SCCZ9tI1o0OIB8D+DBIkYaJRbCBH9mZgNt+bb++ufSSF/eX8BYcDeAzuQJVUAAAAASUVORK5CYII="),define("text!/gcli/ui/images/pinout.png",[],"data:image/png;base64,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"),define("text!/gcli/ui/images/pins.png",[],"data:image/png;base64,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"),define("text!/gcli/ui/images/plus.png",[],"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAAZiS0dEANIA0gDS7KbF4AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kFGw4yFTwuJTkAAAH7SURBVCjPdZKxa1NRFMZ/956XZMgFyyMlCZRA4hBx6lBcQ00GoYi4tEstFPwLAs7iLDi7FWuHThaUggihBDI5OWRoQAmBQFISQgvvpbwX3rsOaR4K+o2H8zvfOZxPWWtZqVarGaAJPAEe3ZW/A1+Bd+1221v1qhW4vb1dA44mk0nZ8zyCIAAgk8lgjGF9fb0PHF5cXLQTsF6vP/c879P19TVBEJDJZBARAKIoSmpra2sYY561Wq3PqtFouMBgMBgYay3ZbJZ/yfd9tNaUSqUboOKISPPq6sqsVvZ9H4AvL34B8PTj/QSO45jpdHovn883Ha31znw+JwzDpCEMQx4UloM8zyOdTif3zudztNY7jog8DMMQpRRxHPPt5TCBAEZvxlyOFTsfykRRBICIlB2t9a21Nh3HMXEc8+d7VhJHWCwWyzcohdZaHBHpO46z6fs+IsLj94XECaD4unCHL8FsNouI/HRE5Nx13c3ZbIbWOnG5HKtl+53TSq7rIiLnand31wUGnU7HjEYjlFLJZN/3yRnL1FMYY8jlcmxtbd0AFel2u7dnZ2eXxpi9xWJBEASkUimstYgIQSSkUimKxSKVSgVjzN7p6emPJHL7+/s14KjX65WHwyGz2SxZbWNjg2q12gcOT05O2n9lFeDg4MAAr/4T8rfHx8dJyH8DvvbYGzKvWukAAAAASUVORK5CYII="),define("text!/gcli/ui/images/throbber.gif",[],"data:image/gif;base64,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")